(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function zw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bm={exports:{}},sc={},$m={exports:{}},Me={};var Rv;function YT(){if(Rv)return Me;Rv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,T={};function C(z,te,pe){this.props=z,this.context=te,this.refs=T,this.updater=pe||E}C.prototype.isReactComponent={},C.prototype.setState=function(z,te){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,te,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function V(){}V.prototype=C.prototype;function D(z,te,pe){this.props=z,this.context=te,this.refs=T,this.updater=pe||E}var U=D.prototype=new V;U.constructor=D,I(U,C.prototype),U.isPureReactComponent=!0;var H=Array.isArray,O=Object.prototype.hasOwnProperty,q={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(z,te,pe){var Ne,Ee={},Oe=null,Pe=null;if(te!=null)for(Ne in te.ref!==void 0&&(Pe=te.ref),te.key!==void 0&&(Oe=""+te.key),te)O.call(te,Ne)&&!A.hasOwnProperty(Ne)&&(Ee[Ne]=te[Ne]);var Ke=arguments.length-2;if(Ke===1)Ee.children=pe;else if(1<Ke){for(var ze=Array(Ke),zt=0;zt<Ke;zt++)ze[zt]=arguments[zt+2];Ee.children=ze}if(z&&z.defaultProps)for(Ne in Ke=z.defaultProps,Ke)Ee[Ne]===void 0&&(Ee[Ne]=Ke[Ne]);return{$$typeof:n,type:z,key:Oe,ref:Pe,props:Ee,_owner:q.current}}function P(z,te){return{$$typeof:n,type:z.type,key:te,ref:z.ref,props:z.props,_owner:z._owner}}function F(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var te={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return te[pe]})}var B=/\/+/g;function j(z,te){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):te.toString(36)}function Ce(z,te,pe,Ne,Ee){var Oe=typeof z;(Oe==="undefined"||Oe==="boolean")&&(z=null);var Pe=!1;if(z===null)Pe=!0;else switch(Oe){case"string":case"number":Pe=!0;break;case"object":switch(z.$$typeof){case n:case e:Pe=!0}}if(Pe)return Pe=z,Ee=Ee(Pe),z=Ne===""?"."+j(Pe,0):Ne,H(Ee)?(pe="",z!=null&&(pe=z.replace(B,"$&/")+"/"),Ce(Ee,te,pe,"",function(zt){return zt})):Ee!=null&&(F(Ee)&&(Ee=P(Ee,pe+(!Ee.key||Pe&&Pe.key===Ee.key?"":(""+Ee.key).replace(B,"$&/")+"/")+z)),te.push(Ee)),1;if(Pe=0,Ne=Ne===""?".":Ne+":",H(z))for(var Ke=0;Ke<z.length;Ke++){Oe=z[Ke];var ze=Ne+j(Oe,Ke);Pe+=Ce(Oe,te,pe,ze,Ee)}else if(ze=_(z),typeof ze=="function")for(z=ze.call(z),Ke=0;!(Oe=z.next()).done;)Oe=Oe.value,ze=Ne+j(Oe,Ke++),Pe+=Ce(Oe,te,pe,ze,Ee);else if(Oe==="object")throw te=String(z),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Pe}function oe(z,te,pe){if(z==null)return z;var Ne=[],Ee=0;return Ce(z,Ne,"","",function(Oe){return te.call(pe,Oe,Ee++)}),Ne}function J(z){if(z._status===-1){var te=z._result;te=te(),te.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=te)}if(z._status===1)return z._result.default;throw z._result}var ae={current:null},ee={transition:null},ce={ReactCurrentDispatcher:ae,ReactCurrentBatchConfig:ee,ReactCurrentOwner:q};return Me.Children={map:oe,forEach:function(z,te,pe){oe(z,function(){te.apply(this,arguments)},pe)},count:function(z){var te=0;return oe(z,function(){te++}),te},toArray:function(z){return oe(z,function(te){return te})||[]},only:function(z){if(!F(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Me.Component=C,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=D,Me.StrictMode=r,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Me.cloneElement=function(z,te,pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ne=I({},z.props),Ee=z.key,Oe=z.ref,Pe=z._owner;if(te!=null){if(te.ref!==void 0&&(Oe=te.ref,Pe=q.current),te.key!==void 0&&(Ee=""+te.key),z.type&&z.type.defaultProps)var Ke=z.type.defaultProps;for(ze in te)O.call(te,ze)&&!A.hasOwnProperty(ze)&&(Ne[ze]=te[ze]===void 0&&Ke!==void 0?Ke[ze]:te[ze])}var ze=arguments.length-2;if(ze===1)Ne.children=pe;else if(1<ze){Ke=Array(ze);for(var zt=0;zt<ze;zt++)Ke[zt]=arguments[zt+2];Ne.children=Ke}return{$$typeof:n,type:z.type,key:Ee,ref:Oe,props:Ne,_owner:Pe}},Me.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Me.createElement=k,Me.createFactory=function(z){var te=k.bind(null,z);return te.type=z,te},Me.createRef=function(){return{current:null}},Me.forwardRef=function(z){return{$$typeof:c,render:z}},Me.isValidElement=F,Me.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:J}},Me.memo=function(z,te){return{$$typeof:f,type:z,compare:te===void 0?null:te}},Me.startTransition=function(z){var te=ee.transition;ee.transition={};try{z()}finally{ee.transition=te}},Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Me.useCallback=function(z,te){return ae.current.useCallback(z,te)},Me.useContext=function(z){return ae.current.useContext(z)},Me.useDebugValue=function(){},Me.useDeferredValue=function(z){return ae.current.useDeferredValue(z)},Me.useEffect=function(z,te){return ae.current.useEffect(z,te)},Me.useId=function(){return ae.current.useId()},Me.useImperativeHandle=function(z,te,pe){return ae.current.useImperativeHandle(z,te,pe)},Me.useInsertionEffect=function(z,te){return ae.current.useInsertionEffect(z,te)},Me.useLayoutEffect=function(z,te){return ae.current.useLayoutEffect(z,te)},Me.useMemo=function(z,te){return ae.current.useMemo(z,te)},Me.useReducer=function(z,te,pe){return ae.current.useReducer(z,te,pe)},Me.useRef=function(z){return ae.current.useRef(z)},Me.useState=function(z){return ae.current.useState(z)},Me.useSyncExternalStore=function(z,te,pe){return ae.current.useSyncExternalStore(z,te,pe)},Me.useTransition=function(){return ae.current.useTransition()},Me.version="18.2.0",Me}var Nv;function ng(){return Nv||(Nv=1,$m.exports=YT()),$m.exports}var Pv;function QT(){if(Pv)return sc;Pv=1;var n=ng(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var g,y={},_=null,E=null;f!==void 0&&(_=""+f),h.key!==void 0&&(_=""+h.key),h.ref!==void 0&&(E=h.ref);for(g in h)r.call(h,g)&&!o.hasOwnProperty(g)&&(y[g]=h[g]);if(c&&c.defaultProps)for(g in h=c.defaultProps,h)y[g]===void 0&&(y[g]=h[g]);return{$$typeof:e,type:c,key:_,ref:E,props:y,_owner:s.current}}return sc.Fragment=t,sc.jsx=l,sc.jsxs=l,sc}var Dv;function XT(){return Dv||(Dv=1,Bm.exports=QT()),Bm.exports}var m=XT(),N=ng();const JT=zw(N);var bh={},Wm={exports:{}},pn={},Hm={exports:{}},qm={};var jv;function ZT(){return jv||(jv=1,(function(n){function e(ee,ce){var z=ee.length;ee.push(ce);e:for(;0<z;){var te=z-1>>>1,pe=ee[te];if(0<s(pe,ce))ee[te]=ce,ee[z]=pe,z=te;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var ce=ee[0],z=ee.pop();if(z!==ce){ee[0]=z;e:for(var te=0,pe=ee.length,Ne=pe>>>1;te<Ne;){var Ee=2*(te+1)-1,Oe=ee[Ee],Pe=Ee+1,Ke=ee[Pe];if(0>s(Oe,z))Pe<pe&&0>s(Ke,Oe)?(ee[te]=Ke,ee[Pe]=z,te=Pe):(ee[te]=Oe,ee[Ee]=z,te=Ee);else if(Pe<pe&&0>s(Ke,z))ee[te]=Ke,ee[Pe]=z,te=Pe;else break e}}return ce}function s(ee,ce){var z=ee.sortIndex-ce.sortIndex;return z!==0?z:ee.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],g=1,y=null,_=3,E=!1,I=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ee){for(var ce=t(f);ce!==null;){if(ce.callback===null)r(f);else if(ce.startTime<=ee)r(f),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(f)}}function H(ee){if(T=!1,U(ee),!I)if(t(h)!==null)I=!0,J(O);else{var ce=t(f);ce!==null&&ae(H,ce.startTime-ee)}}function O(ee,ce){I=!1,T&&(T=!1,V(k),k=-1),E=!0;var z=_;try{for(U(ce),y=t(h);y!==null&&(!(y.expirationTime>ce)||ee&&!L());){var te=y.callback;if(typeof te=="function"){y.callback=null,_=y.priorityLevel;var pe=te(y.expirationTime<=ce);ce=n.unstable_now(),typeof pe=="function"?y.callback=pe:y===t(h)&&r(h),U(ce)}else r(h);y=t(h)}if(y!==null)var Ne=!0;else{var Ee=t(f);Ee!==null&&ae(H,Ee.startTime-ce),Ne=!1}return Ne}finally{y=null,_=z,E=!1}}var q=!1,A=null,k=-1,P=5,F=-1;function L(){return!(n.unstable_now()-F<P)}function B(){if(A!==null){var ee=n.unstable_now();F=ee;var ce=!0;try{ce=A(!0,ee)}finally{ce?j():(q=!1,A=null)}}else q=!1}var j;if(typeof D=="function")j=function(){D(B)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,oe=Ce.port2;Ce.port1.onmessage=B,j=function(){oe.postMessage(null)}}else j=function(){C(B,0)};function J(ee){A=ee,q||(q=!0,j())}function ae(ee,ce){k=C(function(){ee(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){I||E||(I=!0,J(O))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ee){switch(_){case 1:case 2:case 3:var ce=3;break;default:ce=_}var z=_;_=ce;try{return ee()}finally{_=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var z=_;_=ee;try{return ce()}finally{_=z}},n.unstable_scheduleCallback=function(ee,ce,z){var te=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?te+z:te):z=te,ee){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=z+pe,ee={id:g++,callback:ce,priorityLevel:ee,startTime:z,expirationTime:pe,sortIndex:-1},z>te?(ee.sortIndex=z,e(f,ee),t(h)===null&&ee===t(f)&&(T?(V(k),k=-1):T=!0,ae(H,z-te))):(ee.sortIndex=pe,e(h,ee),I||E||(I=!0,J(O))),ee},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ee){var ce=_;return function(){var z=_;_=ce;try{return ee.apply(this,arguments)}finally{_=z}}}})(qm)),qm}var Mv;function eI(){return Mv||(Mv=1,Hm.exports=ZT()),Hm.exports}var Ov;function tI(){if(Ov)return pn;Ov=1;var n=ng(),e=eI();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function _(i){return h.call(y,i)?!0:h.call(g,i)?!1:f.test(i)?y[i]=!0:(g[i]=!0,!1)}function E(i,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function I(i,a,u,p){if(a===null||typeof a>"u"||E(i,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function T(i,a,u,p,v,x,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=x,this.removeEmptyString=S}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new T(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];C[a]=new T(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new T(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new T(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new T(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new T(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new T(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new T(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new T(i,5,!1,i.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function D(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(V,D);C[a]=new T(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(V,D);C[a]=new T(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(V,D);C[a]=new T(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new T(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new T(i,1,!1,i.toLowerCase(),null,!0,!0)});function U(i,a,u,p){var v=C.hasOwnProperty(a)?C[a]:null;(v!==null?v.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,u,v,p)&&(u=null),p||v===null?_(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):v.mustUseProperty?i[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,p=v.attributeNamespace,u===null?i.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,p?i.setAttributeNS(p,a,u):i.setAttribute(a,u))))}var H=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),q=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ae=Symbol.for("react.offscreen"),ee=Symbol.iterator;function ce(i){return i===null||typeof i!="object"?null:(i=ee&&i[ee]||i["@@iterator"],typeof i=="function"?i:null)}var z=Object.assign,te;function pe(i){if(te===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);te=a&&a[1]||""}return`
`+te+i}var Ne=!1;function Ee(i,a){if(!i||Ne)return"";Ne=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var p=Q}Reflect.construct(i,[],a)}else{try{a.call()}catch(Q){p=Q}i.call(a.prototype)}else{try{throw Error()}catch(Q){p=Q}i()}}catch(Q){if(Q&&p&&typeof Q.stack=="string"){for(var v=Q.stack.split(`
`),x=p.stack.split(`
`),S=v.length-1,M=x.length-1;1<=S&&0<=M&&v[S]!==x[M];)M--;for(;1<=S&&0<=M;S--,M--)if(v[S]!==x[M]){if(S!==1||M!==1)do if(S--,M--,0>M||v[S]!==x[M]){var $=`
`+v[S].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=S&&0<=M);break}}}finally{Ne=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?pe(i):""}function Oe(i){switch(i.tag){case 5:return pe(i.type);case 16:return pe("Lazy");case 13:return pe("Suspense");case 19:return pe("SuspenseList");case 0:case 2:case 15:return i=Ee(i.type,!1),i;case 11:return i=Ee(i.type.render,!1),i;case 1:return i=Ee(i.type,!0),i;default:return""}}function Pe(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case q:return"Portal";case P:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case Ce:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L:return(i.displayName||"Context")+".Consumer";case F:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case oe:return a=i.displayName||null,a!==null?a:Pe(i.type)||"Memo";case J:a=i._payload,i=i._init;try{return Pe(i(a))}catch{}}return null}function Ke(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(a);case 8:return a===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function ze(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function zt(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function vf(i){var a=zt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,x=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(S){p=""+S,x.call(this,S)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Mo(i){i._valueTracker||(i._valueTracker=vf(i))}function ul(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return i&&(p=zt(i)?i.checked?"true":"false":i.value),i=p,i!==u?(a.setValue(i),!0):!1}function Ps(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Oo(i,a){var u=a.checked;return z({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function au(i,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=ze(a.value!=null?a.value:u),i._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Lo(i,a){a=a.checked,a!=null&&U(i,"checked",a,!1)}function Vi(i,a){Lo(i,a);var u=ze(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Et(i,a.type,u):a.hasOwnProperty("defaultValue")&&Et(i,a.type,ze(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function hl(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Et(i,a,u){(a!=="number"||Ps(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var yt=Array.isArray;function Qn(i,a,u,p){if(i=i.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=a.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&p&&(i[u].defaultSelected=!0)}else{for(u=""+ze(u),a=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,p&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function dl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return z({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function fl(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(yt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:ze(u)}}function lu(i,a){var u=ze(a.value),p=ze(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),p!=null&&(i.defaultValue=""+p)}function Ds(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function ml(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vo(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?ml(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var js,cu=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,v){MSApp.execUnsafeLocalFunction(function(){return i(a,u,p,v)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(js=js||document.createElement("div"),js.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=js.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Fi(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uu=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(i){uu.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Ms[a]=Ms[i]})});function Os(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ms.hasOwnProperty(i)&&Ms[i]?(""+a).trim():a+"px"}function Fo(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,v=Os(u,a[u],p);u==="float"&&(u="cssFloat"),p?i.setProperty(u,v):i[u]=v}}var pl=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xn(i,a){if(a){if(pl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Uo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ls=null;function zo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gr=null,Yr=null,pt=null;function gl(i){if(i=$l(i)){if(typeof Gr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Lu(a),Gr(i.stateNode,i.type,a))}}function Vs(i){Yr?pt?pt.push(i):pt=[i]:Yr=i}function Fs(){if(Yr){var i=Yr,a=pt;if(pt=Yr=null,gl(i),a)for(i=0;i<a.length;i++)gl(a[i])}}function hu(i,a){return i(a)}function du(){}var mr=!1;function fu(i,a,u){if(mr)return i(a,u);mr=!0;try{return hu(i,a,u)}finally{mr=!1,(Yr!==null||pt!==null)&&(du(),Fs())}}function Ui(i,a){var u=i.stateNode;if(u===null)return null;var p=Lu(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Us=!1;if(c)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){Us=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{Us=!1}function mu(i,a,u,p,v,x,S,M,$){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(u,Q)}catch(se){this.onError(se)}}var Qr=!1,pr=null,Bo=!1,On=null,pu={onError:function(i){Qr=!0,pr=i}};function gu(i,a,u,p,v,x,S,M,$){Qr=!1,pr=null,mu.apply(pu,arguments)}function yl(i,a,u,p,v,x,S,M,$){if(gu.apply(this,arguments),Qr){if(Qr){var Q=pr;Qr=!1,pr=null}else throw Error(t(198));Bo||(Bo=!0,On=Q)}}function Jn(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function vl(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function yu(i){if(Jn(i)!==i)throw Error(t(188))}function vu(i){var a=i.alternate;if(!a){if(a=Jn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,p=a;;){var v=u.return;if(v===null)break;var x=v.alternate;if(x===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===x.child){for(x=v.child;x;){if(x===u)return yu(v),i;if(x===p)return yu(v),a;x=x.sibling}throw Error(t(188))}if(u.return!==p.return)u=v,p=x;else{for(var S=!1,M=v.child;M;){if(M===u){S=!0,u=v,p=x;break}if(M===p){S=!0,p=v,u=x;break}M=M.sibling}if(!S){for(M=x.child;M;){if(M===u){S=!0,u=x,p=v;break}if(M===p){S=!0,p=x,u=v;break}M=M.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function _u(i){return i=vu(i),i!==null?zi(i):null}function zi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=zi(i);if(a!==null)return a;i=i.sibling}return null}var _l=e.unstable_scheduleCallback,$o=e.unstable_cancelCallback,Bi=e.unstable_shouldYield,Xr=e.unstable_requestPaint,nt=e.unstable_now,_f=e.unstable_getCurrentPriorityLevel,Wo=e.unstable_ImmediatePriority,xl=e.unstable_UserBlockingPriority,$i=e.unstable_NormalPriority,wl=e.unstable_LowPriority,Ho=e.unstable_IdlePriority,Wi=null,bn=null;function xu(i){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Wi,i,void 0,(i.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Hi,gr=Math.log,Ln=Math.LN2;function Hi(i){return i>>>=0,i===0?32:31-(gr(i)/Ln|0)|0}var yr=64,Bs=4194304;function Ge(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Jr(i,a){var u=i.pendingLanes;if(u===0)return 0;var p=0,v=i.suspendedLanes,x=i.pingedLanes,S=u&268435455;if(S!==0){var M=S&~v;M!==0?p=Ge(M):(x&=S,x!==0&&(p=Ge(x)))}else S=u&~v,S!==0?p=Ge(S):x!==0&&(p=Ge(x));if(p===0)return 0;if(a!==0&&a!==p&&(a&v)===0&&(v=p&-p,x=a&-a,v>=x||v===16&&(x&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)u=31-En(a),v=1<<u,p|=i[u],a&=~v;return p}function qi(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ki(i,a){for(var u=i.suspendedLanes,p=i.pingedLanes,v=i.expirationTimes,x=i.pendingLanes;0<x;){var S=31-En(x),M=1<<S,$=v[S];$===-1?((M&u)===0||(M&p)!==0)&&(v[S]=qi(M,a)):$<=a&&(i.expiredLanes|=M),x&=~M}}function bl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function El(){var i=yr;return yr<<=1,(yr&4194240)===0&&(yr=64),i}function Sl(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function Gi(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-En(a),i[a]=u}function xf(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<u;){var v=31-En(u),x=1<<v;a[v]=0,p[v]=-1,i[v]=-1,u&=~x}}function Tl(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var p=31-En(u),v=1<<p;v&a|i[p]&a&&(i[p]|=a),u&=~v}}var Ue=0;function vr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Il,qo,Cl,kl,Al,_r=!1,Ko=[],xr=null,wr=null,Bt=null,Yi=new Map,Zr=new Map,Sn=[],wu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $s(i,a){switch(i){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Yi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zr.delete(a.pointerId)}}function Zn(i,a,u,p,v,x){return i===null||i.nativeEvent!==x?(i={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:x,targetContainers:[v]},a!==null&&(a=$l(a),a!==null&&qo(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function bu(i,a,u,p,v){switch(a){case"focusin":return xr=Zn(xr,i,a,u,p,v),!0;case"dragenter":return wr=Zn(wr,i,a,u,p,v),!0;case"mouseover":return Bt=Zn(Bt,i,a,u,p,v),!0;case"pointerover":var x=v.pointerId;return Yi.set(x,Zn(Yi.get(x)||null,i,a,u,p,v)),!0;case"gotpointercapture":return x=v.pointerId,Zr.set(x,Zn(Zr.get(x)||null,i,a,u,p,v)),!0}return!1}function Go(i){var a=Zi(i.target);if(a!==null){var u=Jn(a);if(u!==null){if(a=u.tag,a===13){if(a=vl(u),a!==null){i.blockedOn=a,Al(i.priority,function(){Cl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Je(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Yo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);Ls=p,u.target.dispatchEvent(p),Ls=null}else return a=$l(u),a!==null&&qo(a),i.blockedOn=u,!1;a.shift()}return!0}function Eu(i,a,u){Je(i)&&u.delete(a)}function wf(){_r=!1,xr!==null&&Je(xr)&&(xr=null),wr!==null&&Je(wr)&&(wr=null),Bt!==null&&Je(Bt)&&(Bt=null),Yi.forEach(Eu),Zr.forEach(Eu)}function Ws(i,a){i.blockedOn===a&&(i.blockedOn=null,_r||(_r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,wf)))}function Hs(i){function a(v){return Ws(v,i)}if(0<Ko.length){Ws(Ko[0],i);for(var u=1;u<Ko.length;u++){var p=Ko[u];p.blockedOn===i&&(p.blockedOn=null)}}for(xr!==null&&Ws(xr,i),wr!==null&&Ws(wr,i),Bt!==null&&Ws(Bt,i),Yi.forEach(a),Zr.forEach(a),u=0;u<Sn.length;u++)p=Sn[u],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sn.length&&(u=Sn[0],u.blockedOn===null);)Go(u),u.blockedOn===null&&Sn.shift()}var es=H.ReactCurrentBatchConfig,ts=!0;function br(i,a,u,p){var v=Ue,x=es.transition;es.transition=null;try{Ue=1,Rl(i,a,u,p)}finally{Ue=v,es.transition=x}}function Su(i,a,u,p){var v=Ue,x=es.transition;es.transition=null;try{Ue=4,Rl(i,a,u,p)}finally{Ue=v,es.transition=x}}function Rl(i,a,u,p){if(ts){var v=Yo(i,a,u,p);if(v===null)Pf(i,a,p,Er,u),$s(i,p);else if(bu(v,i,a,u,p))p.stopPropagation();else if($s(i,p),a&4&&-1<wu.indexOf(i)){for(;v!==null;){var x=$l(v);if(x!==null&&Il(x),x=Yo(i,a,u,p),x===null&&Pf(i,a,p,Er,u),x===v)break;v=x}v!==null&&p.stopPropagation()}else Pf(i,a,p,null,u)}}var Er=null;function Yo(i,a,u,p){if(Er=null,i=zo(p),i=Zi(i),i!==null)if(a=Jn(i),a===null)i=null;else if(u=a.tag,u===13){if(i=vl(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Er=i,null}function Qo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_f()){case Wo:return 1;case xl:return 4;case $i:case wl:return 16;case Ho:return 536870912;default:return 16}default:return 16}}var Tn=null,Xo=null,ns=null;function Tu(){if(ns)return ns;var i,a=Xo,u=a.length,p,v="value"in Tn?Tn.value:Tn.textContent,x=v.length;for(i=0;i<u&&a[i]===v[i];i++);var S=u-i;for(p=1;p<=S&&a[u-p]===v[x-p];p++);return ns=v.slice(i,1<p?1-p:void 0)}function Qi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Sr(){return!0}function Nl(){return!1}function Yt(i){function a(u,p,v,x,S){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=x,this.target=S,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(u=i[M],this[M]=u?u(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Sr:Nl,this.isPropagationStopped=Nl,this}return z(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),a}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=Yt(Tr),qs=z({},Tr,{view:0,detail:0}),Jo=Yt(qs),Zo,ea,In,Ji=z({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==In&&(In&&i.type==="mousemove"?(Zo=i.screenX-In.screenX,ea=i.screenY-In.screenY):ea=Zo=0,In=i),Zo)},movementY:function(i){return"movementY"in i?i.movementY:ea}}),Pl=Yt(Ji),Iu=z({},Ji,{dataTransfer:0}),Cu=Yt(Iu),ta=z({},qs,{relatedTarget:0}),$t=Yt(ta),ku=z({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Au=Yt(ku),Ks=z({},Tr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),d=Yt(Ks),w=z({},Tr,{data:0}),b=Yt(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ue(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=X[i])?!!a[i]:!1}function Ae(){return ue}var vt=z({},qs,{key:function(i){if(i.key){var a=R[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Qi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?G[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(i){return i.type==="keypress"?Qi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Qe=Yt(vt),St=z({},Ji,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=Yt(St),rs=z({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),Ir=Yt(rs),Cr=z({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),na=Yt(Cr),Dl=z({},Ji,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),$1=Yt(Dl),W1=[9,13,27,32],bf=c&&"CompositionEvent"in window,jl=null;c&&"documentMode"in document&&(jl=document.documentMode);var H1=c&&"TextEvent"in window&&!jl,wy=c&&(!bf||jl&&8<jl&&11>=jl),by=" ",Ey=!1;function Sy(i,a){switch(i){case"keyup":return W1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ty(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ra=!1;function q1(i,a){switch(i){case"compositionend":return Ty(a);case"keypress":return a.which!==32?null:(Ey=!0,by);case"textInput":return i=a.data,i===by&&Ey?null:i;default:return null}}function K1(i,a){if(ra)return i==="compositionend"||!bf&&Sy(i,a)?(i=Tu(),ns=Xo=Tn=null,ra=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return wy&&a.locale!=="ko"?null:a.data;default:return null}}var G1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!G1[i.type]:a==="textarea"}function Cy(i,a,u,p){Vs(p),a=ju(a,"onChange"),0<a.length&&(u=new Xi("onChange","change",null,u,p),i.push({event:u,listeners:a}))}var Ml=null,Ol=null;function Y1(i){Hy(i,0)}function Ru(i){var a=la(i);if(ul(a))return i}function Q1(i,a){if(i==="change")return a}var ky=!1;if(c){var Ef;if(c){var Sf="oninput"in document;if(!Sf){var Ay=document.createElement("div");Ay.setAttribute("oninput","return;"),Sf=typeof Ay.oninput=="function"}Ef=Sf}else Ef=!1;ky=Ef&&(!document.documentMode||9<document.documentMode)}function Ry(){Ml&&(Ml.detachEvent("onpropertychange",Ny),Ol=Ml=null)}function Ny(i){if(i.propertyName==="value"&&Ru(Ol)){var a=[];Cy(a,Ol,i,zo(i)),fu(Y1,a)}}function X1(i,a,u){i==="focusin"?(Ry(),Ml=a,Ol=u,Ml.attachEvent("onpropertychange",Ny)):i==="focusout"&&Ry()}function J1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ru(Ol)}function Z1(i,a){if(i==="click")return Ru(a)}function eT(i,a){if(i==="input"||i==="change")return Ru(a)}function tT(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var er=typeof Object.is=="function"?Object.is:tT;function Ll(i,a){if(er(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!h.call(a,v)||!er(i[v],a[v]))return!1}return!0}function Py(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Dy(i,a){var u=Py(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=a&&p>=a)return{node:u,offset:a-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Py(u)}}function jy(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?jy(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function My(){for(var i=window,a=Ps();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=Ps(i.document)}return a}function Tf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function nT(i){var a=My(),u=i.focusedElem,p=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&jy(u.ownerDocument.documentElement,u)){if(p!==null&&Tf(u)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var v=u.textContent.length,x=Math.min(p.start,v);p=p.end===void 0?x:Math.min(p.end,v),!i.extend&&x>p&&(v=p,p=x,x=v),v=Dy(u,x);var S=Dy(u,p);v&&S&&(i.rangeCount!==1||i.anchorNode!==v.node||i.anchorOffset!==v.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),i.removeAllRanges(),x>p?(i.addRange(a),i.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var rT=c&&"documentMode"in document&&11>=document.documentMode,sa=null,If=null,Vl=null,Cf=!1;function Oy(i,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Cf||sa==null||sa!==Ps(p)||(p=sa,"selectionStart"in p&&Tf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Vl&&Ll(Vl,p)||(Vl=p,p=ju(If,"onSelect"),0<p.length&&(a=new Xi("onSelect","select",null,a,u),i.push({event:a,listeners:p}),a.target=sa)))}function Nu(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var ia={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},kf={},Ly={};c&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete ia.animationend.animation,delete ia.animationiteration.animation,delete ia.animationstart.animation),"TransitionEvent"in window||delete ia.transitionend.transition);function Pu(i){if(kf[i])return kf[i];if(!ia[i])return i;var a=ia[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Ly)return kf[i]=a[u];return i}var Vy=Pu("animationend"),Fy=Pu("animationiteration"),Uy=Pu("animationstart"),zy=Pu("transitionend"),By=new Map,$y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(i,a){By.set(i,a),o(a,[i])}for(var Af=0;Af<$y.length;Af++){var Rf=$y[Af],sT=Rf.toLowerCase(),iT=Rf[0].toUpperCase()+Rf.slice(1);Gs(sT,"on"+iT)}Gs(Vy,"onAnimationEnd"),Gs(Fy,"onAnimationIteration"),Gs(Uy,"onAnimationStart"),Gs("dblclick","onDoubleClick"),Gs("focusin","onFocus"),Gs("focusout","onBlur"),Gs(zy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fl));function Wy(i,a,u){var p=i.type||"unknown-event";i.currentTarget=u,yl(p,a,void 0,i),i.currentTarget=null}function Hy(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],v=p.event;p=p.listeners;e:{var x=void 0;if(a)for(var S=p.length-1;0<=S;S--){var M=p[S],$=M.instance,Q=M.currentTarget;if(M=M.listener,$!==x&&v.isPropagationStopped())break e;Wy(v,M,Q),x=$}else for(S=0;S<p.length;S++){if(M=p[S],$=M.instance,Q=M.currentTarget,M=M.listener,$!==x&&v.isPropagationStopped())break e;Wy(v,M,Q),x=$}}}if(Bo)throw i=On,Bo=!1,On=null,i}function rt(i,a){var u=a[Vf];u===void 0&&(u=a[Vf]=new Set);var p=i+"__bubble";u.has(p)||(qy(a,i,2,!1),u.add(p))}function Nf(i,a,u){var p=0;a&&(p|=4),qy(u,i,p,a)}var Du="_reactListening"+Math.random().toString(36).slice(2);function Ul(i){if(!i[Du]){i[Du]=!0,r.forEach(function(u){u!=="selectionchange"&&(oT.has(u)||Nf(u,!1,i),Nf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Du]||(a[Du]=!0,Nf("selectionchange",!1,a))}}function qy(i,a,u,p){switch(Qo(a)){case 1:var v=br;break;case 4:v=Su;break;default:v=Rl}u=v.bind(null,a,u,i),v=void 0,!Us||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),p?v!==void 0?i.addEventListener(a,u,{capture:!0,passive:v}):i.addEventListener(a,u,!0):v!==void 0?i.addEventListener(a,u,{passive:v}):i.addEventListener(a,u,!1)}function Pf(i,a,u,p,v){var x=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var M=p.stateNode.containerInfo;if(M===v||M.nodeType===8&&M.parentNode===v)break;if(S===4)for(S=p.return;S!==null;){var $=S.tag;if(($===3||$===4)&&($=S.stateNode.containerInfo,$===v||$.nodeType===8&&$.parentNode===v))return;S=S.return}for(;M!==null;){if(S=Zi(M),S===null)return;if($=S.tag,$===5||$===6){p=x=S;continue e}M=M.parentNode}}p=p.return}fu(function(){var Q=x,se=zo(u),ie=[];e:{var re=By.get(i);if(re!==void 0){var de=Xi,ge=i;switch(i){case"keypress":if(Qi(u)===0)break e;case"keydown":case"keyup":de=Qe;break;case"focusin":ge="focus",de=$t;break;case"focusout":ge="blur",de=$t;break;case"beforeblur":case"afterblur":de=$t;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Pl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=Cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Ir;break;case Vy:case Fy:case Uy:de=Au;break;case zy:de=na;break;case"scroll":de=Jo;break;case"wheel":de=$1;break;case"copy":case"cut":case"paste":de=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=Cn}var ye=(a&4)!==0,_t=!ye&&i==="scroll",K=ye?re!==null?re+"Capture":null:re;ye=[];for(var W=Q,Y;W!==null;){Y=W;var le=Y.stateNode;if(Y.tag===5&&le!==null&&(Y=le,K!==null&&(le=Ui(W,K),le!=null&&ye.push(zl(W,le,Y)))),_t)break;W=W.return}0<ye.length&&(re=new de(re,ge,null,u,se),ie.push({event:re,listeners:ye}))}}if((a&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",re&&u!==Ls&&(ge=u.relatedTarget||u.fromElement)&&(Zi(ge)||ge[ss]))break e;if((de||re)&&(re=se.window===se?se:(re=se.ownerDocument)?re.defaultView||re.parentWindow:window,de?(ge=u.relatedTarget||u.toElement,de=Q,ge=ge?Zi(ge):null,ge!==null&&(_t=Jn(ge),ge!==_t||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(de=null,ge=Q),de!==ge)){if(ye=Pl,le="onMouseLeave",K="onMouseEnter",W="mouse",(i==="pointerout"||i==="pointerover")&&(ye=Cn,le="onPointerLeave",K="onPointerEnter",W="pointer"),_t=de==null?re:la(de),Y=ge==null?re:la(ge),re=new ye(le,W+"leave",de,u,se),re.target=_t,re.relatedTarget=Y,le=null,Zi(se)===Q&&(ye=new ye(K,W+"enter",ge,u,se),ye.target=Y,ye.relatedTarget=_t,le=ye),_t=le,de&&ge)t:{for(ye=de,K=ge,W=0,Y=ye;Y;Y=oa(Y))W++;for(Y=0,le=K;le;le=oa(le))Y++;for(;0<W-Y;)ye=oa(ye),W--;for(;0<Y-W;)K=oa(K),Y--;for(;W--;){if(ye===K||K!==null&&ye===K.alternate)break t;ye=oa(ye),K=oa(K)}ye=null}else ye=null;de!==null&&Ky(ie,re,de,ye,!1),ge!==null&&_t!==null&&Ky(ie,_t,ge,ye,!0)}}e:{if(re=Q?la(Q):window,de=re.nodeName&&re.nodeName.toLowerCase(),de==="select"||de==="input"&&re.type==="file")var _e=Q1;else if(Iy(re))if(ky)_e=eT;else{_e=J1;var we=X1}else(de=re.nodeName)&&de.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(_e=Z1);if(_e&&(_e=_e(i,Q))){Cy(ie,_e,u,se);break e}we&&we(i,re,Q),i==="focusout"&&(we=re._wrapperState)&&we.controlled&&re.type==="number"&&Et(re,"number",re.value)}switch(we=Q?la(Q):window,i){case"focusin":(Iy(we)||we.contentEditable==="true")&&(sa=we,If=Q,Vl=null);break;case"focusout":Vl=If=sa=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Oy(ie,u,se);break;case"selectionchange":if(rT)break;case"keydown":case"keyup":Oy(ie,u,se)}var be;if(bf)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ra?Sy(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(wy&&u.locale!=="ko"&&(ra||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ra&&(be=Tu()):(Tn=se,Xo="value"in Tn?Tn.value:Tn.textContent,ra=!0)),we=ju(Q,Ie),0<we.length&&(Ie=new b(Ie,i,null,u,se),ie.push({event:Ie,listeners:we}),be?Ie.data=be:(be=Ty(u),be!==null&&(Ie.data=be)))),(be=H1?q1(i,u):K1(i,u))&&(Q=ju(Q,"onBeforeInput"),0<Q.length&&(se=new b("onBeforeInput","beforeinput",null,u,se),ie.push({event:se,listeners:Q}),se.data=be))}Hy(ie,a)})}function zl(i,a,u){return{instance:i,listener:a,currentTarget:u}}function ju(i,a){for(var u=a+"Capture",p=[];i!==null;){var v=i,x=v.stateNode;v.tag===5&&x!==null&&(v=x,x=Ui(i,u),x!=null&&p.unshift(zl(i,x,v)),x=Ui(i,a),x!=null&&p.push(zl(i,x,v))),i=i.return}return p}function oa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ky(i,a,u,p,v){for(var x=a._reactName,S=[];u!==null&&u!==p;){var M=u,$=M.alternate,Q=M.stateNode;if($!==null&&$===p)break;M.tag===5&&Q!==null&&(M=Q,v?($=Ui(u,x),$!=null&&S.unshift(zl(u,$,M))):v||($=Ui(u,x),$!=null&&S.push(zl(u,$,M)))),u=u.return}S.length!==0&&i.push({event:a,listeners:S})}var aT=/\r\n?/g,lT=/\u0000|\uFFFD/g;function Gy(i){return(typeof i=="string"?i:""+i).replace(aT,`
`).replace(lT,"")}function Mu(i,a,u){if(a=Gy(a),Gy(i)!==a&&u)throw Error(t(425))}function Ou(){}var Df=null,jf=null;function Mf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,uT=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(i){return Yy.resolve(null).then(i).catch(hT)}:Of;function hT(i){setTimeout(function(){throw i})}function Lf(i,a){var u=a,p=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(p===0){i.removeChild(v),Hs(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=v}while(u);Hs(a)}function Ys(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Qy(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var aa=Math.random().toString(36).slice(2),kr="__reactFiber$"+aa,Bl="__reactProps$"+aa,ss="__reactContainer$"+aa,Vf="__reactEvents$"+aa,dT="__reactListeners$"+aa,fT="__reactHandles$"+aa;function Zi(i){var a=i[kr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[ss]||u[kr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=Qy(i);i!==null;){if(u=i[kr])return u;i=Qy(i)}return a}i=u,u=i.parentNode}return null}function $l(i){return i=i[kr]||i[ss],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function la(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Lu(i){return i[Bl]||null}var Ff=[],ca=-1;function Qs(i){return{current:i}}function st(i){0>ca||(i.current=Ff[ca],Ff[ca]=null,ca--)}function et(i,a){ca++,Ff[ca]=i.current,i.current=a}var Xs={},Qt=Qs(Xs),un=Qs(!1),eo=Xs;function ua(i,a){var u=i.type.contextTypes;if(!u)return Xs;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var v={},x;for(x in u)v[x]=a[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=v),v}function hn(i){return i=i.childContextTypes,i!=null}function Vu(){st(un),st(Qt)}function Xy(i,a,u){if(Qt.current!==Xs)throw Error(t(168));et(Qt,a),et(un,u)}function Jy(i,a,u){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var v in p)if(!(v in a))throw Error(t(108,Ke(i)||"Unknown",v));return z({},u,p)}function Fu(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Xs,eo=Qt.current,et(Qt,i),et(un,un.current),!0}function Zy(i,a,u){var p=i.stateNode;if(!p)throw Error(t(169));u?(i=Jy(i,a,eo),p.__reactInternalMemoizedMergedChildContext=i,st(un),st(Qt),et(Qt,i)):st(un),et(un,u)}var is=null,Uu=!1,Uf=!1;function e0(i){is===null?is=[i]:is.push(i)}function mT(i){Uu=!0,e0(i)}function Js(){if(!Uf&&is!==null){Uf=!0;var i=0,a=Ue;try{var u=is;for(Ue=1;i<u.length;i++){var p=u[i];do p=p(!0);while(p!==null)}is=null,Uu=!1}catch(v){throw is!==null&&(is=is.slice(i+1)),_l(Wo,Js),v}finally{Ue=a,Uf=!1}}return null}var ha=[],da=0,zu=null,Bu=0,Vn=[],Fn=0,to=null,os=1,as="";function no(i,a){ha[da++]=Bu,ha[da++]=zu,zu=i,Bu=a}function t0(i,a,u){Vn[Fn++]=os,Vn[Fn++]=as,Vn[Fn++]=to,to=i;var p=os;i=as;var v=32-En(p)-1;p&=~(1<<v),u+=1;var x=32-En(a)+v;if(30<x){var S=v-v%5;x=(p&(1<<S)-1).toString(32),p>>=S,v-=S,os=1<<32-En(a)+v|u<<v|p,as=x+i}else os=1<<x|u<<v|p,as=i}function zf(i){i.return!==null&&(no(i,1),t0(i,1,0))}function Bf(i){for(;i===zu;)zu=ha[--da],ha[da]=null,Bu=ha[--da],ha[da]=null;for(;i===to;)to=Vn[--Fn],Vn[Fn]=null,as=Vn[--Fn],Vn[Fn]=null,os=Vn[--Fn],Vn[Fn]=null}var kn=null,An=null,lt=!1,tr=null;function n0(i,a){var u=$n(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function r0(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,kn=i,An=Ys(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,kn=i,An=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=to!==null?{id:os,overflow:as}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=$n(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,kn=i,An=null,!0):!1;default:return!1}}function $f(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Wf(i){if(lt){var a=An;if(a){var u=a;if(!r0(i,a)){if($f(i))throw Error(t(418));a=Ys(u.nextSibling);var p=kn;a&&r0(i,a)?n0(p,u):(i.flags=i.flags&-4097|2,lt=!1,kn=i)}}else{if($f(i))throw Error(t(418));i.flags=i.flags&-4097|2,lt=!1,kn=i}}}function s0(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;kn=i}function $u(i){if(i!==kn)return!1;if(!lt)return s0(i),lt=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Mf(i.type,i.memoizedProps)),a&&(a=An)){if($f(i))throw i0(),Error(t(418));for(;a;)n0(i,a),a=Ys(a.nextSibling)}if(s0(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){An=Ys(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}An=null}}else An=kn?Ys(i.stateNode.nextSibling):null;return!0}function i0(){for(var i=An;i;)i=Ys(i.nextSibling)}function fa(){An=kn=null,lt=!1}function Hf(i){tr===null?tr=[i]:tr.push(i)}var pT=H.ReactCurrentBatchConfig;function nr(i,a){if(i&&i.defaultProps){a=z({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}var Wu=Qs(null),Hu=null,ma=null,qf=null;function Kf(){qf=ma=Hu=null}function Gf(i){var a=Wu.current;st(Wu),i._currentValue=a}function Yf(i,a,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===u)break;i=i.return}}function pa(i,a){Hu=i,qf=ma=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(dn=!0),i.firstContext=null)}function Un(i){var a=i._currentValue;if(qf!==i)if(i={context:i,memoizedValue:a,next:null},ma===null){if(Hu===null)throw Error(t(308));ma=i,Hu.dependencies={lanes:0,firstContext:i}}else ma=ma.next=i;return a}var ro=null;function Qf(i){ro===null?ro=[i]:ro.push(i)}function o0(i,a,u,p){var v=a.interleaved;return v===null?(u.next=u,Qf(a)):(u.next=v.next,v.next=u),a.interleaved=u,ls(i,p)}function ls(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Zs=!1;function Xf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function a0(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function cs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ei(i,a,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var v=p.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),p.pending=a,ls(i,u)}return v=p.interleaved,v===null?(a.next=a,Qf(p)):(a.next=v.next,v.next=a),p.interleaved=a,ls(i,u)}function qu(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Tl(i,u)}}function l0(i,a){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?v=x=S:x=x.next=S,u=u.next}while(u!==null);x===null?v=x=a:x=x.next=a}else v=x=a;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function Ku(i,a,u,p){var v=i.updateQueue;Zs=!1;var x=v.firstBaseUpdate,S=v.lastBaseUpdate,M=v.shared.pending;if(M!==null){v.shared.pending=null;var $=M,Q=$.next;$.next=null,S===null?x=Q:S.next=Q,S=$;var se=i.alternate;se!==null&&(se=se.updateQueue,M=se.lastBaseUpdate,M!==S&&(M===null?se.firstBaseUpdate=Q:M.next=Q,se.lastBaseUpdate=$))}if(x!==null){var ie=v.baseState;S=0,se=Q=$=null,M=x;do{var re=M.lane,de=M.eventTime;if((p&re)===re){se!==null&&(se=se.next={eventTime:de,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ge=i,ye=M;switch(re=a,de=u,ye.tag){case 1:if(ge=ye.payload,typeof ge=="function"){ie=ge.call(de,ie,re);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ye.payload,re=typeof ge=="function"?ge.call(de,ie,re):ge,re==null)break e;ie=z({},ie,re);break e;case 2:Zs=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,re=v.effects,re===null?v.effects=[M]:re.push(M))}else de={eventTime:de,lane:re,tag:M.tag,payload:M.payload,callback:M.callback,next:null},se===null?(Q=se=de,$=ie):se=se.next=de,S|=re;if(M=M.next,M===null){if(M=v.shared.pending,M===null)break;re=M,M=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);if(se===null&&($=ie),v.baseState=$,v.firstBaseUpdate=Q,v.lastBaseUpdate=se,a=v.shared.interleaved,a!==null){v=a;do S|=v.lane,v=v.next;while(v!==a)}else x===null&&(v.shared.lanes=0);oo|=S,i.lanes=S,i.memoizedState=ie}}function c0(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],v=p.callback;if(v!==null){if(p.callback=null,p=u,typeof v!="function")throw Error(t(191,v));v.call(p)}}}var u0=new n.Component().refs;function Jf(i,a,u,p){a=i.memoizedState,u=u(p,a),u=u==null?a:z({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Gu={isMounted:function(i){return(i=i._reactInternals)?Jn(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var p=an(),v=si(i),x=cs(p,v);x.payload=a,u!=null&&(x.callback=u),a=ei(i,x,v),a!==null&&(ir(a,i,v,p),qu(a,i,v))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var p=an(),v=si(i),x=cs(p,v);x.tag=1,x.payload=a,u!=null&&(x.callback=u),a=ei(i,x,v),a!==null&&(ir(a,i,v,p),qu(a,i,v))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=an(),p=si(i),v=cs(u,p);v.tag=2,a!=null&&(v.callback=a),a=ei(i,v,p),a!==null&&(ir(a,i,p,u),qu(a,i,p))}};function h0(i,a,u,p,v,x,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,S):a.prototype&&a.prototype.isPureReactComponent?!Ll(u,p)||!Ll(v,x):!0}function d0(i,a,u){var p=!1,v=Xs,x=a.contextType;return typeof x=="object"&&x!==null?x=Un(x):(v=hn(a)?eo:Qt.current,p=a.contextTypes,x=(p=p!=null)?ua(i,v):Xs),a=new a(u,x),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Gu,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=v,i.__reactInternalMemoizedMaskedChildContext=x),a}function f0(i,a,u,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==i&&Gu.enqueueReplaceState(a,a.state,null)}function Zf(i,a,u,p){var v=i.stateNode;v.props=u,v.state=i.memoizedState,v.refs=u0,Xf(i);var x=a.contextType;typeof x=="object"&&x!==null?v.context=Un(x):(x=hn(a)?eo:Qt.current,v.context=ua(i,x)),v.state=i.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Jf(i,a,x,u),v.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&Gu.enqueueReplaceState(v,v.state,null),Ku(i,u,v,p),v.state=i.memoizedState),typeof v.componentDidMount=="function"&&(i.flags|=4194308)}function Wl(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,i));var v=p,x=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(S){var M=v.refs;M===u0&&(M=v.refs={}),S===null?delete M[x]:M[x]=S},a._stringRef=x,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Yu(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function m0(i){var a=i._init;return a(i._payload)}function p0(i){function a(K,W){if(i){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function u(K,W){if(!i)return null;for(;W!==null;)a(K,W),W=W.sibling;return null}function p(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function v(K,W){return K=oi(K,W),K.index=0,K.sibling=null,K}function x(K,W,Y){return K.index=Y,i?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function S(K){return i&&K.alternate===null&&(K.flags|=2),K}function M(K,W,Y,le){return W===null||W.tag!==6?(W=Om(Y,K.mode,le),W.return=K,W):(W=v(W,Y),W.return=K,W)}function $(K,W,Y,le){var _e=Y.type;return _e===A?se(K,W,Y.props.children,le,Y.key):W!==null&&(W.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===J&&m0(_e)===W.type)?(le=v(W,Y.props),le.ref=Wl(K,W,Y),le.return=K,le):(le=mh(Y.type,Y.key,Y.props,null,K.mode,le),le.ref=Wl(K,W,Y),le.return=K,le)}function Q(K,W,Y,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=Lm(Y,K.mode,le),W.return=K,W):(W=v(W,Y.children||[]),W.return=K,W)}function se(K,W,Y,le,_e){return W===null||W.tag!==7?(W=uo(Y,K.mode,le,_e),W.return=K,W):(W=v(W,Y),W.return=K,W)}function ie(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=Om(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case O:return Y=mh(W.type,W.key,W.props,null,K.mode,Y),Y.ref=Wl(K,null,W),Y.return=K,Y;case q:return W=Lm(W,K.mode,Y),W.return=K,W;case J:var le=W._init;return ie(K,le(W._payload),Y)}if(yt(W)||ce(W))return W=uo(W,K.mode,Y,null),W.return=K,W;Yu(K,W)}return null}function re(K,W,Y,le){var _e=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return _e!==null?null:M(K,W,""+Y,le);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case O:return Y.key===_e?$(K,W,Y,le):null;case q:return Y.key===_e?Q(K,W,Y,le):null;case J:return _e=Y._init,re(K,W,_e(Y._payload),le)}if(yt(Y)||ce(Y))return _e!==null?null:se(K,W,Y,le,null);Yu(K,Y)}return null}function de(K,W,Y,le,_e){if(typeof le=="string"&&le!==""||typeof le=="number")return K=K.get(Y)||null,M(W,K,""+le,_e);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case O:return K=K.get(le.key===null?Y:le.key)||null,$(W,K,le,_e);case q:return K=K.get(le.key===null?Y:le.key)||null,Q(W,K,le,_e);case J:var we=le._init;return de(K,W,Y,we(le._payload),_e)}if(yt(le)||ce(le))return K=K.get(Y)||null,se(W,K,le,_e,null);Yu(W,le)}return null}function ge(K,W,Y,le){for(var _e=null,we=null,be=W,Ie=W=0,Vt=null;be!==null&&Ie<Y.length;Ie++){be.index>Ie?(Vt=be,be=null):Vt=be.sibling;var qe=re(K,be,Y[Ie],le);if(qe===null){be===null&&(be=Vt);break}i&&be&&qe.alternate===null&&a(K,be),W=x(qe,W,Ie),we===null?_e=qe:we.sibling=qe,we=qe,be=Vt}if(Ie===Y.length)return u(K,be),lt&&no(K,Ie),_e;if(be===null){for(;Ie<Y.length;Ie++)be=ie(K,Y[Ie],le),be!==null&&(W=x(be,W,Ie),we===null?_e=be:we.sibling=be,we=be);return lt&&no(K,Ie),_e}for(be=p(K,be);Ie<Y.length;Ie++)Vt=de(be,K,Ie,Y[Ie],le),Vt!==null&&(i&&Vt.alternate!==null&&be.delete(Vt.key===null?Ie:Vt.key),W=x(Vt,W,Ie),we===null?_e=Vt:we.sibling=Vt,we=Vt);return i&&be.forEach(function(ai){return a(K,ai)}),lt&&no(K,Ie),_e}function ye(K,W,Y,le){var _e=ce(Y);if(typeof _e!="function")throw Error(t(150));if(Y=_e.call(Y),Y==null)throw Error(t(151));for(var we=_e=null,be=W,Ie=W=0,Vt=null,qe=Y.next();be!==null&&!qe.done;Ie++,qe=Y.next()){be.index>Ie?(Vt=be,be=null):Vt=be.sibling;var ai=re(K,be,qe.value,le);if(ai===null){be===null&&(be=Vt);break}i&&be&&ai.alternate===null&&a(K,be),W=x(ai,W,Ie),we===null?_e=ai:we.sibling=ai,we=ai,be=Vt}if(qe.done)return u(K,be),lt&&no(K,Ie),_e;if(be===null){for(;!qe.done;Ie++,qe=Y.next())qe=ie(K,qe.value,le),qe!==null&&(W=x(qe,W,Ie),we===null?_e=qe:we.sibling=qe,we=qe);return lt&&no(K,Ie),_e}for(be=p(K,be);!qe.done;Ie++,qe=Y.next())qe=de(be,K,Ie,qe.value,le),qe!==null&&(i&&qe.alternate!==null&&be.delete(qe.key===null?Ie:qe.key),W=x(qe,W,Ie),we===null?_e=qe:we.sibling=qe,we=qe);return i&&be.forEach(function(GT){return a(K,GT)}),lt&&no(K,Ie),_e}function _t(K,W,Y,le){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case O:e:{for(var _e=Y.key,we=W;we!==null;){if(we.key===_e){if(_e=Y.type,_e===A){if(we.tag===7){u(K,we.sibling),W=v(we,Y.props.children),W.return=K,K=W;break e}}else if(we.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===J&&m0(_e)===we.type){u(K,we.sibling),W=v(we,Y.props),W.ref=Wl(K,we,Y),W.return=K,K=W;break e}u(K,we);break}else a(K,we);we=we.sibling}Y.type===A?(W=uo(Y.props.children,K.mode,le,Y.key),W.return=K,K=W):(le=mh(Y.type,Y.key,Y.props,null,K.mode,le),le.ref=Wl(K,W,Y),le.return=K,K=le)}return S(K);case q:e:{for(we=Y.key;W!==null;){if(W.key===we)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){u(K,W.sibling),W=v(W,Y.children||[]),W.return=K,K=W;break e}else{u(K,W);break}else a(K,W);W=W.sibling}W=Lm(Y,K.mode,le),W.return=K,K=W}return S(K);case J:return we=Y._init,_t(K,W,we(Y._payload),le)}if(yt(Y))return ge(K,W,Y,le);if(ce(Y))return ye(K,W,Y,le);Yu(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(u(K,W.sibling),W=v(W,Y),W.return=K,K=W):(u(K,W),W=Om(Y,K.mode,le),W.return=K,K=W),S(K)):u(K,W)}return _t}var ga=p0(!0),g0=p0(!1),Hl={},Ar=Qs(Hl),ql=Qs(Hl),Kl=Qs(Hl);function so(i){if(i===Hl)throw Error(t(174));return i}function em(i,a){switch(et(Kl,a),et(ql,i),et(Ar,Hl),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Vo(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Vo(a,i)}st(Ar),et(Ar,a)}function ya(){st(Ar),st(ql),st(Kl)}function y0(i){so(Kl.current);var a=so(Ar.current),u=Vo(a,i.type);a!==u&&(et(ql,i),et(Ar,u))}function tm(i){ql.current===i&&(st(Ar),st(ql))}var ht=Qs(0);function Qu(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nm=[];function rm(){for(var i=0;i<nm.length;i++)nm[i]._workInProgressVersionPrimary=null;nm.length=0}var Xu=H.ReactCurrentDispatcher,sm=H.ReactCurrentBatchConfig,io=0,dt=null,Rt=null,Ot=null,Ju=!1,Gl=!1,Yl=0,gT=0;function Xt(){throw Error(t(321))}function im(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!er(i[u],a[u]))return!1;return!0}function om(i,a,u,p,v,x){if(io=x,dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Xu.current=i===null||i.memoizedState===null?xT:wT,i=u(p,v),Gl){x=0;do{if(Gl=!1,Yl=0,25<=x)throw Error(t(301));x+=1,Ot=Rt=null,a.updateQueue=null,Xu.current=bT,i=u(p,v)}while(Gl)}if(Xu.current=th,a=Rt!==null&&Rt.next!==null,io=0,Ot=Rt=dt=null,Ju=!1,a)throw Error(t(300));return i}function am(){var i=Yl!==0;return Yl=0,i}function Rr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?dt.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function zn(){if(Rt===null){var i=dt.alternate;i=i!==null?i.memoizedState:null}else i=Rt.next;var a=Ot===null?dt.memoizedState:Ot.next;if(a!==null)Ot=a,Rt=i;else{if(i===null)throw Error(t(310));Rt=i,i={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ot===null?dt.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function Ql(i,a){return typeof a=="function"?a(i):a}function lm(i){var a=zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=Rt,v=p.baseQueue,x=u.pending;if(x!==null){if(v!==null){var S=v.next;v.next=x.next,x.next=S}p.baseQueue=v=x,u.pending=null}if(v!==null){x=v.next,p=p.baseState;var M=S=null,$=null,Q=x;do{var se=Q.lane;if((io&se)===se)$!==null&&($=$.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),p=Q.hasEagerState?Q.eagerState:i(p,Q.action);else{var ie={lane:se,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};$===null?(M=$=ie,S=p):$=$.next=ie,dt.lanes|=se,oo|=se}Q=Q.next}while(Q!==null&&Q!==x);$===null?S=p:$.next=M,er(p,a.memoizedState)||(dn=!0),a.memoizedState=p,a.baseState=S,a.baseQueue=$,u.lastRenderedState=p}if(i=u.interleaved,i!==null){v=i;do x=v.lane,dt.lanes|=x,oo|=x,v=v.next;while(v!==i)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function cm(i){var a=zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var p=u.dispatch,v=u.pending,x=a.memoizedState;if(v!==null){u.pending=null;var S=v=v.next;do x=i(x,S.action),S=S.next;while(S!==v);er(x,a.memoizedState)||(dn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),u.lastRenderedState=x}return[x,p]}function v0(){}function _0(i,a){var u=dt,p=zn(),v=a(),x=!er(p.memoizedState,v);if(x&&(p.memoizedState=v,dn=!0),p=p.queue,um(b0.bind(null,u,p,i),[i]),p.getSnapshot!==a||x||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,Xl(9,w0.bind(null,u,p,v,a),void 0,null),Lt===null)throw Error(t(349));(io&30)!==0||x0(u,a,v)}return v}function x0(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=dt.updateQueue,a===null?(a={lastEffect:null,stores:null},dt.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function w0(i,a,u,p){a.value=u,a.getSnapshot=p,E0(a)&&S0(i)}function b0(i,a,u){return u(function(){E0(a)&&S0(i)})}function E0(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!er(i,u)}catch{return!0}}function S0(i){var a=ls(i,1);a!==null&&ir(a,i,1,-1)}function T0(i){var a=Rr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:i},a.queue=i,i=i.dispatch=_T.bind(null,dt,i),[a.memoizedState,i]}function Xl(i,a,u,p){return i={tag:i,create:a,destroy:u,deps:p,next:null},a=dt.updateQueue,a===null?(a={lastEffect:null,stores:null},dt.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,a.lastEffect=i)),i}function I0(){return zn().memoizedState}function Zu(i,a,u,p){var v=Rr();dt.flags|=i,v.memoizedState=Xl(1|a,u,void 0,p===void 0?null:p)}function eh(i,a,u,p){var v=zn();p=p===void 0?null:p;var x=void 0;if(Rt!==null){var S=Rt.memoizedState;if(x=S.destroy,p!==null&&im(p,S.deps)){v.memoizedState=Xl(a,u,x,p);return}}dt.flags|=i,v.memoizedState=Xl(1|a,u,x,p)}function C0(i,a){return Zu(8390656,8,i,a)}function um(i,a){return eh(2048,8,i,a)}function k0(i,a){return eh(4,2,i,a)}function A0(i,a){return eh(4,4,i,a)}function R0(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function N0(i,a,u){return u=u!=null?u.concat([i]):null,eh(4,4,R0.bind(null,a,i),u)}function hm(){}function P0(i,a){var u=zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&im(a,p[1])?p[0]:(u.memoizedState=[i,a],i)}function D0(i,a){var u=zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&im(a,p[1])?p[0]:(i=i(),u.memoizedState=[i,a],i)}function j0(i,a,u){return(io&21)===0?(i.baseState&&(i.baseState=!1,dn=!0),i.memoizedState=u):(er(u,a)||(u=El(),dt.lanes|=u,oo|=u,i.baseState=!0),a)}function yT(i,a){var u=Ue;Ue=u!==0&&4>u?u:4,i(!0);var p=sm.transition;sm.transition={};try{i(!1),a()}finally{Ue=u,sm.transition=p}}function M0(){return zn().memoizedState}function vT(i,a,u){var p=si(i);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},O0(i))L0(a,u);else if(u=o0(i,a,u,p),u!==null){var v=an();ir(u,i,p,v),V0(u,a,p)}}function _T(i,a,u){var p=si(i),v={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(O0(i))L0(a,v);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var S=a.lastRenderedState,M=x(S,u);if(v.hasEagerState=!0,v.eagerState=M,er(M,S)){var $=a.interleaved;$===null?(v.next=v,Qf(a)):(v.next=$.next,$.next=v),a.interleaved=v;return}}catch{}u=o0(i,a,v,p),u!==null&&(v=an(),ir(u,i,p,v),V0(u,a,p))}}function O0(i){var a=i.alternate;return i===dt||a!==null&&a===dt}function L0(i,a){Gl=Ju=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function V0(i,a,u){if((u&4194240)!==0){var p=a.lanes;p&=i.pendingLanes,u|=p,a.lanes=u,Tl(i,u)}}var th={readContext:Un,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},xT={readContext:Un,useCallback:function(i,a){return Rr().memoizedState=[i,a===void 0?null:a],i},useContext:Un,useEffect:C0,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,Zu(4194308,4,R0.bind(null,a,i),u)},useLayoutEffect:function(i,a){return Zu(4194308,4,i,a)},useInsertionEffect:function(i,a){return Zu(4,2,i,a)},useMemo:function(i,a){var u=Rr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var p=Rr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=vT.bind(null,dt,i),[p.memoizedState,i]},useRef:function(i){var a=Rr();return i={current:i},a.memoizedState=i},useState:T0,useDebugValue:hm,useDeferredValue:function(i){return Rr().memoizedState=i},useTransition:function(){var i=T0(!1),a=i[0];return i=yT.bind(null,i[1]),Rr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var p=dt,v=Rr();if(lt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Lt===null)throw Error(t(349));(io&30)!==0||x0(p,a,u)}v.memoizedState=u;var x={value:u,getSnapshot:a};return v.queue=x,C0(b0.bind(null,p,x,i),[i]),p.flags|=2048,Xl(9,w0.bind(null,p,x,u,a),void 0,null),u},useId:function(){var i=Rr(),a=Lt.identifierPrefix;if(lt){var u=as,p=os;u=(p&~(1<<32-En(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=Yl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=gT++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},wT={readContext:Un,useCallback:P0,useContext:Un,useEffect:um,useImperativeHandle:N0,useInsertionEffect:k0,useLayoutEffect:A0,useMemo:D0,useReducer:lm,useRef:I0,useState:function(){return lm(Ql)},useDebugValue:hm,useDeferredValue:function(i){var a=zn();return j0(a,Rt.memoizedState,i)},useTransition:function(){var i=lm(Ql)[0],a=zn().memoizedState;return[i,a]},useMutableSource:v0,useSyncExternalStore:_0,useId:M0,unstable_isNewReconciler:!1},bT={readContext:Un,useCallback:P0,useContext:Un,useEffect:um,useImperativeHandle:N0,useInsertionEffect:k0,useLayoutEffect:A0,useMemo:D0,useReducer:cm,useRef:I0,useState:function(){return cm(Ql)},useDebugValue:hm,useDeferredValue:function(i){var a=zn();return Rt===null?a.memoizedState=i:j0(a,Rt.memoizedState,i)},useTransition:function(){var i=cm(Ql)[0],a=zn().memoizedState;return[i,a]},useMutableSource:v0,useSyncExternalStore:_0,useId:M0,unstable_isNewReconciler:!1};function va(i,a){try{var u="",p=a;do u+=Oe(p),p=p.return;while(p);var v=u}catch(x){v=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:a,stack:v,digest:null}}function dm(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function fm(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var ET=typeof WeakMap=="function"?WeakMap:Map;function F0(i,a,u){u=cs(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){lh||(lh=!0,km=p),fm(i,a)},u}function U0(i,a,u){u=cs(-1,u),u.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var v=a.value;u.payload=function(){return p(v)},u.callback=function(){fm(i,a)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){fm(i,a),typeof p!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function z0(i,a,u){var p=i.pingCache;if(p===null){p=i.pingCache=new ET;var v=new Set;p.set(a,v)}else v=p.get(a),v===void 0&&(v=new Set,p.set(a,v));v.has(u)||(v.add(u),i=LT.bind(null,i,a,u),a.then(i,i))}function B0(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function $0(i,a,u,p,v){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=cs(-1,1),a.tag=2,ei(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=v,i)}var ST=H.ReactCurrentOwner,dn=!1;function on(i,a,u,p){a.child=i===null?g0(a,null,u,p):ga(a,i.child,u,p)}function W0(i,a,u,p,v){u=u.render;var x=a.ref;return pa(a,v),p=om(i,a,u,p,x,v),u=am(),i!==null&&!dn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,us(i,a,v)):(lt&&u&&zf(a),a.flags|=1,on(i,a,p,v),a.child)}function H0(i,a,u,p,v){if(i===null){var x=u.type;return typeof x=="function"&&!Mm(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=x,q0(i,a,x,p,v)):(i=mh(u.type,null,p,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(x=i.child,(i.lanes&v)===0){var S=x.memoizedProps;if(u=u.compare,u=u!==null?u:Ll,u(S,p)&&i.ref===a.ref)return us(i,a,v)}return a.flags|=1,i=oi(x,p),i.ref=a.ref,i.return=a,a.child=i}function q0(i,a,u,p,v){if(i!==null){var x=i.memoizedProps;if(Ll(x,p)&&i.ref===a.ref)if(dn=!1,a.pendingProps=p=x,(i.lanes&v)!==0)(i.flags&131072)!==0&&(dn=!0);else return a.lanes=i.lanes,us(i,a,v)}return mm(i,a,u,p,v)}function K0(i,a,u){var p=a.pendingProps,v=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(xa,Rn),Rn|=u;else{if((u&1073741824)===0)return i=x!==null?x.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,et(xa,Rn),Rn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:u,et(xa,Rn),Rn|=p}else x!==null?(p=x.baseLanes|u,a.memoizedState=null):p=u,et(xa,Rn),Rn|=p;return on(i,a,v,u),a.child}function G0(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function mm(i,a,u,p,v){var x=hn(u)?eo:Qt.current;return x=ua(a,x),pa(a,v),u=om(i,a,u,p,x,v),p=am(),i!==null&&!dn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~v,us(i,a,v)):(lt&&p&&zf(a),a.flags|=1,on(i,a,u,v),a.child)}function Y0(i,a,u,p,v){if(hn(u)){var x=!0;Fu(a)}else x=!1;if(pa(a,v),a.stateNode===null)rh(i,a),d0(a,u,p),Zf(a,u,p,v),p=!0;else if(i===null){var S=a.stateNode,M=a.memoizedProps;S.props=M;var $=S.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=Un(Q):(Q=hn(u)?eo:Qt.current,Q=ua(a,Q));var se=u.getDerivedStateFromProps,ie=typeof se=="function"||typeof S.getSnapshotBeforeUpdate=="function";ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==p||$!==Q)&&f0(a,S,p,Q),Zs=!1;var re=a.memoizedState;S.state=re,Ku(a,p,S,v),$=a.memoizedState,M!==p||re!==$||un.current||Zs?(typeof se=="function"&&(Jf(a,u,se,p),$=a.memoizedState),(M=Zs||h0(a,u,M,p,re,$,Q))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=$),S.props=p,S.state=$,S.context=Q,p=M):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,a0(i,a),M=a.memoizedProps,Q=a.type===a.elementType?M:nr(a.type,M),S.props=Q,ie=a.pendingProps,re=S.context,$=u.contextType,typeof $=="object"&&$!==null?$=Un($):($=hn(u)?eo:Qt.current,$=ua(a,$));var de=u.getDerivedStateFromProps;(se=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ie||re!==$)&&f0(a,S,p,$),Zs=!1,re=a.memoizedState,S.state=re,Ku(a,p,S,v);var ge=a.memoizedState;M!==ie||re!==ge||un.current||Zs?(typeof de=="function"&&(Jf(a,u,de,p),ge=a.memoizedState),(Q=Zs||h0(a,u,Q,p,re,ge,$)||!1)?(se||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,ge,$),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,ge,$)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ge),S.props=p,S.state=ge,S.context=$,p=Q):(typeof S.componentDidUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&re===i.memoizedState||(a.flags|=1024),p=!1)}return pm(i,a,u,p,x,v)}function pm(i,a,u,p,v,x){G0(i,a);var S=(a.flags&128)!==0;if(!p&&!S)return v&&Zy(a,u,!1),us(i,a,x);p=a.stateNode,ST.current=a;var M=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&S?(a.child=ga(a,i.child,null,x),a.child=ga(a,null,M,x)):on(i,a,M,x),a.memoizedState=p.state,v&&Zy(a,u,!0),a.child}function Q0(i){var a=i.stateNode;a.pendingContext?Xy(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Xy(i,a.context,!1),em(i,a.containerInfo)}function X0(i,a,u,p,v){return fa(),Hf(v),a.flags|=256,on(i,a,u,p),a.child}var gm={dehydrated:null,treeContext:null,retryLane:0};function ym(i){return{baseLanes:i,cachePool:null,transitions:null}}function J0(i,a,u){var p=a.pendingProps,v=ht.current,x=!1,S=(a.flags&128)!==0,M;if((M=S)||(M=i!==null&&i.memoizedState===null?!1:(v&2)!==0),M?(x=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(v|=1),et(ht,v&1),i===null)return Wf(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=p.children,i=p.fallback,x?(p=a.mode,x=a.child,S={mode:"hidden",children:S},(p&1)===0&&x!==null?(x.childLanes=0,x.pendingProps=S):x=ph(S,p,0,null),i=uo(i,p,u,null),x.return=a,i.return=a,x.sibling=i,a.child=x,a.child.memoizedState=ym(u),a.memoizedState=gm,i):vm(a,S));if(v=i.memoizedState,v!==null&&(M=v.dehydrated,M!==null))return TT(i,a,S,p,M,v,u);if(x){x=p.fallback,S=a.mode,v=i.child,M=v.sibling;var $={mode:"hidden",children:p.children};return(S&1)===0&&a.child!==v?(p=a.child,p.childLanes=0,p.pendingProps=$,a.deletions=null):(p=oi(v,$),p.subtreeFlags=v.subtreeFlags&14680064),M!==null?x=oi(M,x):(x=uo(x,S,u,null),x.flags|=2),x.return=a,p.return=a,p.sibling=x,a.child=p,p=x,x=a.child,S=i.child.memoizedState,S=S===null?ym(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},x.memoizedState=S,x.childLanes=i.childLanes&~u,a.memoizedState=gm,p}return x=i.child,i=x.sibling,p=oi(x,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=p,a.memoizedState=null,p}function vm(i,a){return a=ph({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function nh(i,a,u,p){return p!==null&&Hf(p),ga(a,i.child,null,u),i=vm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function TT(i,a,u,p,v,x,S){if(u)return a.flags&256?(a.flags&=-257,p=dm(Error(t(422))),nh(i,a,S,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(x=p.fallback,v=a.mode,p=ph({mode:"visible",children:p.children},v,0,null),x=uo(x,v,S,null),x.flags|=2,p.return=a,x.return=a,p.sibling=x,a.child=p,(a.mode&1)!==0&&ga(a,i.child,null,S),a.child.memoizedState=ym(S),a.memoizedState=gm,x);if((a.mode&1)===0)return nh(i,a,S,null);if(v.data==="$!"){if(p=v.nextSibling&&v.nextSibling.dataset,p)var M=p.dgst;return p=M,x=Error(t(419)),p=dm(x,p,void 0),nh(i,a,S,p)}if(M=(S&i.childLanes)!==0,dn||M){if(p=Lt,p!==null){switch(S&-S){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(p.suspendedLanes|S))!==0?0:v,v!==0&&v!==x.retryLane&&(x.retryLane=v,ls(i,v),ir(p,i,v,-1))}return jm(),p=dm(Error(t(421))),nh(i,a,S,p)}return v.data==="$?"?(a.flags|=128,a.child=i.child,a=VT.bind(null,i),v._reactRetry=a,null):(i=x.treeContext,An=Ys(v.nextSibling),kn=a,lt=!0,tr=null,i!==null&&(Vn[Fn++]=os,Vn[Fn++]=as,Vn[Fn++]=to,os=i.id,as=i.overflow,to=a),a=vm(a,p.children),a.flags|=4096,a)}function Z0(i,a,u){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),Yf(i.return,a,u)}function _m(i,a,u,p,v){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=u,x.tailMode=v)}function ev(i,a,u){var p=a.pendingProps,v=p.revealOrder,x=p.tail;if(on(i,a,p.children,u),p=ht.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Z0(i,u,a);else if(i.tag===19)Z0(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(et(ht,p),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)i=u.alternate,i!==null&&Qu(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),_m(a,!1,v,u,x);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&Qu(i)===null){a.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}_m(a,!0,u,null,x);break;case"together":_m(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function rh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function us(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),oo|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=oi(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=oi(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function IT(i,a,u){switch(a.tag){case 3:Q0(a),fa();break;case 5:y0(a);break;case 1:hn(a.type)&&Fu(a);break;case 4:em(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,v=a.memoizedProps.value;et(Wu,p._currentValue),p._currentValue=v;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(et(ht,ht.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?J0(i,a,u):(et(ht,ht.current&1),i=us(i,a,u),i!==null?i.sibling:null);et(ht,ht.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(i.flags&128)!==0){if(p)return ev(i,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),et(ht,ht.current),p)break;return null;case 22:case 23:return a.lanes=0,K0(i,a,u)}return us(i,a,u)}var tv,xm,nv,rv;tv=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},xm=function(){},nv=function(i,a,u,p){var v=i.memoizedProps;if(v!==p){i=a.stateNode,so(Ar.current);var x=null;switch(u){case"input":v=Oo(i,v),p=Oo(i,p),x=[];break;case"select":v=z({},v,{value:void 0}),p=z({},p,{value:void 0}),x=[];break;case"textarea":v=dl(i,v),p=dl(i,p),x=[];break;default:typeof v.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Ou)}Xn(u,p);var S;u=null;for(Q in v)if(!p.hasOwnProperty(Q)&&v.hasOwnProperty(Q)&&v[Q]!=null)if(Q==="style"){var M=v[Q];for(S in M)M.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?x||(x=[]):(x=x||[]).push(Q,null));for(Q in p){var $=p[Q];if(M=v?.[Q],p.hasOwnProperty(Q)&&$!==M&&($!=null||M!=null))if(Q==="style")if(M){for(S in M)!M.hasOwnProperty(S)||$&&$.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in $)$.hasOwnProperty(S)&&M[S]!==$[S]&&(u||(u={}),u[S]=$[S])}else u||(x||(x=[]),x.push(Q,u)),u=$;else Q==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,M=M?M.__html:void 0,$!=null&&M!==$&&(x=x||[]).push(Q,$)):Q==="children"?typeof $!="string"&&typeof $!="number"||(x=x||[]).push(Q,""+$):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?($!=null&&Q==="onScroll"&&rt("scroll",i),x||M===$||(x=[])):(x=x||[]).push(Q,$))}u&&(x=x||[]).push("style",u);var Q=x;(a.updateQueue=Q)&&(a.flags|=4)}},rv=function(i,a,u,p){u!==p&&(a.flags|=4)};function Jl(i,a){if(!lt)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function Jt(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(a)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&14680064,p|=v.flags&14680064,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=p,i.childLanes=u,a}function CT(i,a,u){var p=a.pendingProps;switch(Bf(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(a),null;case 1:return hn(a.type)&&Vu(),Jt(a),null;case 3:return p=a.stateNode,ya(),st(un),st(Qt),rm(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&($u(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,tr!==null&&(Nm(tr),tr=null))),xm(i,a),Jt(a),null;case 5:tm(a);var v=so(Kl.current);if(u=a.type,i!==null&&a.stateNode!=null)nv(i,a,u,p,v),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return Jt(a),null}if(i=so(Ar.current),$u(a)){p=a.stateNode,u=a.type;var x=a.memoizedProps;switch(p[kr]=a,p[Bl]=x,i=(a.mode&1)!==0,u){case"dialog":rt("cancel",p),rt("close",p);break;case"iframe":case"object":case"embed":rt("load",p);break;case"video":case"audio":for(v=0;v<Fl.length;v++)rt(Fl[v],p);break;case"source":rt("error",p);break;case"img":case"image":case"link":rt("error",p),rt("load",p);break;case"details":rt("toggle",p);break;case"input":au(p,x),rt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},rt("invalid",p);break;case"textarea":fl(p,x),rt("invalid",p)}Xn(u,x),v=null;for(var S in x)if(x.hasOwnProperty(S)){var M=x[S];S==="children"?typeof M=="string"?p.textContent!==M&&(x.suppressHydrationWarning!==!0&&Mu(p.textContent,M,i),v=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(x.suppressHydrationWarning!==!0&&Mu(p.textContent,M,i),v=["children",""+M]):s.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&rt("scroll",p)}switch(u){case"input":Mo(p),hl(p,x,!0);break;case"textarea":Mo(p),Ds(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=Ou)}p=v,a.updateQueue=p,p!==null&&(a.flags|=4)}else{S=v.nodeType===9?v:v.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ml(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=S.createElement(u,{is:p.is}):(i=S.createElement(u),u==="select"&&(S=i,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):i=S.createElementNS(i,u),i[kr]=a,i[Bl]=p,tv(i,a,!1,!1),a.stateNode=i;e:{switch(S=Uo(u,p),u){case"dialog":rt("cancel",i),rt("close",i),v=p;break;case"iframe":case"object":case"embed":rt("load",i),v=p;break;case"video":case"audio":for(v=0;v<Fl.length;v++)rt(Fl[v],i);v=p;break;case"source":rt("error",i),v=p;break;case"img":case"image":case"link":rt("error",i),rt("load",i),v=p;break;case"details":rt("toggle",i),v=p;break;case"input":au(i,p),v=Oo(i,p),rt("invalid",i);break;case"option":v=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},v=z({},p,{value:void 0}),rt("invalid",i);break;case"textarea":fl(i,p),v=dl(i,p),rt("invalid",i);break;default:v=p}Xn(u,v),M=v;for(x in M)if(M.hasOwnProperty(x)){var $=M[x];x==="style"?Fo(i,$):x==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&cu(i,$)):x==="children"?typeof $=="string"?(u!=="textarea"||$!=="")&&Fi(i,$):typeof $=="number"&&Fi(i,""+$):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?$!=null&&x==="onScroll"&&rt("scroll",i):$!=null&&U(i,x,$,S))}switch(u){case"input":Mo(i),hl(i,p,!1);break;case"textarea":Mo(i),Ds(i);break;case"option":p.value!=null&&i.setAttribute("value",""+ze(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?Qn(i,!!p.multiple,x,!1):p.defaultValue!=null&&Qn(i,!!p.multiple,p.defaultValue,!0);break;default:typeof v.onClick=="function"&&(i.onclick=Ou)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Jt(a),null;case 6:if(i&&a.stateNode!=null)rv(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=so(Kl.current),so(Ar.current),$u(a)){if(p=a.stateNode,u=a.memoizedProps,p[kr]=a,(x=p.nodeValue!==u)&&(i=kn,i!==null))switch(i.tag){case 3:Mu(p.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Mu(p.nodeValue,u,(i.mode&1)!==0)}x&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[kr]=a,a.stateNode=p}return Jt(a),null;case 13:if(st(ht),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(lt&&An!==null&&(a.mode&1)!==0&&(a.flags&128)===0)i0(),fa(),a.flags|=98560,x=!1;else if(x=$u(a),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[kr]=a}else fa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Jt(a),x=!1}else tr!==null&&(Nm(tr),tr=null),x=!0;if(!x)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ht.current&1)!==0?Nt===0&&(Nt=3):jm())),a.updateQueue!==null&&(a.flags|=4),Jt(a),null);case 4:return ya(),xm(i,a),i===null&&Ul(a.stateNode.containerInfo),Jt(a),null;case 10:return Gf(a.type._context),Jt(a),null;case 17:return hn(a.type)&&Vu(),Jt(a),null;case 19:if(st(ht),x=a.memoizedState,x===null)return Jt(a),null;if(p=(a.flags&128)!==0,S=x.rendering,S===null)if(p)Jl(x,!1);else{if(Nt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=Qu(i),S!==null){for(a.flags|=128,Jl(x,!1),p=S.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)x=u,i=p,x.flags&=14680066,S=x.alternate,S===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=S.childLanes,x.lanes=S.lanes,x.child=S.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=S.memoizedProps,x.memoizedState=S.memoizedState,x.updateQueue=S.updateQueue,x.type=S.type,i=S.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return et(ht,ht.current&1|2),a.child}i=i.sibling}x.tail!==null&&nt()>wa&&(a.flags|=128,p=!0,Jl(x,!1),a.lanes=4194304)}else{if(!p)if(i=Qu(S),i!==null){if(a.flags|=128,p=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Jl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!S.alternate&&!lt)return Jt(a),null}else 2*nt()-x.renderingStartTime>wa&&u!==1073741824&&(a.flags|=128,p=!0,Jl(x,!1),a.lanes=4194304);x.isBackwards?(S.sibling=a.child,a.child=S):(u=x.last,u!==null?u.sibling=S:a.child=S,x.last=S)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=nt(),a.sibling=null,u=ht.current,et(ht,p?u&1|2:u&1),a):(Jt(a),null);case 22:case 23:return Dm(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Rn&1073741824)!==0&&(Jt(a),a.subtreeFlags&6&&(a.flags|=8192)):Jt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function kT(i,a){switch(Bf(a),a.tag){case 1:return hn(a.type)&&Vu(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ya(),st(un),st(Qt),rm(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return tm(a),null;case 13:if(st(ht),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));fa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return st(ht),null;case 4:return ya(),null;case 10:return Gf(a.type._context),null;case 22:case 23:return Dm(),null;case 24:return null;default:return null}}var sh=!1,Zt=!1,AT=typeof WeakSet=="function"?WeakSet:Set,me=null;function _a(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){gt(i,a,p)}else u.current=null}function wm(i,a,u){try{u()}catch(p){gt(i,a,p)}}var sv=!1;function RT(i,a){if(Df=ts,i=My(),Tf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var S=0,M=-1,$=-1,Q=0,se=0,ie=i,re=null;t:for(;;){for(var de;ie!==u||v!==0&&ie.nodeType!==3||(M=S+v),ie!==x||p!==0&&ie.nodeType!==3||($=S+p),ie.nodeType===3&&(S+=ie.nodeValue.length),(de=ie.firstChild)!==null;)re=ie,ie=de;for(;;){if(ie===i)break t;if(re===u&&++Q===v&&(M=S),re===x&&++se===p&&($=S),(de=ie.nextSibling)!==null)break;ie=re,re=ie.parentNode}ie=de}u=M===-1||$===-1?null:{start:M,end:$}}else u=null}u=u||{start:0,end:0}}else u=null;for(jf={focusedElem:i,selectionRange:u},ts=!1,me=a;me!==null;)if(a=me,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,me=i;else for(;me!==null;){a=me;try{var ge=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ye=ge.memoizedProps,_t=ge.memoizedState,K=a.stateNode,W=K.getSnapshotBeforeUpdate(a.elementType===a.type?ye:nr(a.type,ye),_t);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){gt(a,a.return,le)}if(i=a.sibling,i!==null){i.return=a.return,me=i;break}me=a.return}return ge=sv,sv=!1,ge}function Zl(i,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var v=p=p.next;do{if((v.tag&i)===i){var x=v.destroy;v.destroy=void 0,x!==void 0&&wm(a,u,x)}v=v.next}while(v!==p)}}function ih(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function bm(i){var a=i.ref;if(a!==null){var u=i.stateNode;i.tag,i=u,typeof a=="function"?a(i):a.current=i}}function iv(i){var a=i.alternate;a!==null&&(i.alternate=null,iv(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[kr],delete a[Bl],delete a[Vf],delete a[dT],delete a[fT])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function ov(i){return i.tag===5||i.tag===3||i.tag===4}function av(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ov(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Em(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Ou));else if(p!==4&&(i=i.child,i!==null))for(Em(i,a,u),i=i.sibling;i!==null;)Em(i,a,u),i=i.sibling}function Sm(i,a,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(Sm(i,a,u),i=i.sibling;i!==null;)Sm(i,a,u),i=i.sibling}var Wt=null,rr=!1;function ti(i,a,u){for(u=u.child;u!==null;)lv(i,a,u),u=u.sibling}function lv(i,a,u){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Wi,u)}catch{}switch(u.tag){case 5:Zt||_a(u,a);case 6:var p=Wt,v=rr;Wt=null,ti(i,a,u),Wt=p,rr=v,Wt!==null&&(rr?(i=Wt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Wt.removeChild(u.stateNode));break;case 18:Wt!==null&&(rr?(i=Wt,u=u.stateNode,i.nodeType===8?Lf(i.parentNode,u):i.nodeType===1&&Lf(i,u),Hs(i)):Lf(Wt,u.stateNode));break;case 4:p=Wt,v=rr,Wt=u.stateNode.containerInfo,rr=!0,ti(i,a,u),Wt=p,rr=v;break;case 0:case 11:case 14:case 15:if(!Zt&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){v=p=p.next;do{var x=v,S=x.destroy;x=x.tag,S!==void 0&&((x&2)!==0||(x&4)!==0)&&wm(u,a,S),v=v.next}while(v!==p)}ti(i,a,u);break;case 1:if(!Zt&&(_a(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(M){gt(u,a,M)}ti(i,a,u);break;case 21:ti(i,a,u);break;case 22:u.mode&1?(Zt=(p=Zt)||u.memoizedState!==null,ti(i,a,u),Zt=p):ti(i,a,u);break;default:ti(i,a,u)}}function cv(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new AT),a.forEach(function(p){var v=FT.bind(null,i,p);u.has(p)||(u.add(p),p.then(v,v))})}}function sr(i,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];try{var x=i,S=a,M=S;e:for(;M!==null;){switch(M.tag){case 5:Wt=M.stateNode,rr=!1;break e;case 3:Wt=M.stateNode.containerInfo,rr=!0;break e;case 4:Wt=M.stateNode.containerInfo,rr=!0;break e}M=M.return}if(Wt===null)throw Error(t(160));lv(x,S,v),Wt=null,rr=!1;var $=v.alternate;$!==null&&($.return=null),v.return=null}catch(Q){gt(v,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)uv(a,i),a=a.sibling}function uv(i,a){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(sr(a,i),Nr(i),p&4){try{Zl(3,i,i.return),ih(3,i)}catch(ye){gt(i,i.return,ye)}try{Zl(5,i,i.return)}catch(ye){gt(i,i.return,ye)}}break;case 1:sr(a,i),Nr(i),p&512&&u!==null&&_a(u,u.return);break;case 5:if(sr(a,i),Nr(i),p&512&&u!==null&&_a(u,u.return),i.flags&32){var v=i.stateNode;try{Fi(v,"")}catch(ye){gt(i,i.return,ye)}}if(p&4&&(v=i.stateNode,v!=null)){var x=i.memoizedProps,S=u!==null?u.memoizedProps:x,M=i.type,$=i.updateQueue;if(i.updateQueue=null,$!==null)try{M==="input"&&x.type==="radio"&&x.name!=null&&Lo(v,x),Uo(M,S);var Q=Uo(M,x);for(S=0;S<$.length;S+=2){var se=$[S],ie=$[S+1];se==="style"?Fo(v,ie):se==="dangerouslySetInnerHTML"?cu(v,ie):se==="children"?Fi(v,ie):U(v,se,ie,Q)}switch(M){case"input":Vi(v,x);break;case"textarea":lu(v,x);break;case"select":var re=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!x.multiple;var de=x.value;de!=null?Qn(v,!!x.multiple,de,!1):re!==!!x.multiple&&(x.defaultValue!=null?Qn(v,!!x.multiple,x.defaultValue,!0):Qn(v,!!x.multiple,x.multiple?[]:"",!1))}v[Bl]=x}catch(ye){gt(i,i.return,ye)}}break;case 6:if(sr(a,i),Nr(i),p&4){if(i.stateNode===null)throw Error(t(162));v=i.stateNode,x=i.memoizedProps;try{v.nodeValue=x}catch(ye){gt(i,i.return,ye)}}break;case 3:if(sr(a,i),Nr(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{Hs(a.containerInfo)}catch(ye){gt(i,i.return,ye)}break;case 4:sr(a,i),Nr(i);break;case 13:sr(a,i),Nr(i),v=i.child,v.flags&8192&&(x=v.memoizedState!==null,v.stateNode.isHidden=x,!x||v.alternate!==null&&v.alternate.memoizedState!==null||(Cm=nt())),p&4&&cv(i);break;case 22:if(se=u!==null&&u.memoizedState!==null,i.mode&1?(Zt=(Q=Zt)||se,sr(a,i),Zt=Q):sr(a,i),Nr(i),p&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!se&&(i.mode&1)!==0)for(me=i,se=i.child;se!==null;){for(ie=me=se;me!==null;){switch(re=me,de=re.child,re.tag){case 0:case 11:case 14:case 15:Zl(4,re,re.return);break;case 1:_a(re,re.return);var ge=re.stateNode;if(typeof ge.componentWillUnmount=="function"){p=re,u=re.return;try{a=p,ge.props=a.memoizedProps,ge.state=a.memoizedState,ge.componentWillUnmount()}catch(ye){gt(p,u,ye)}}break;case 5:_a(re,re.return);break;case 22:if(re.memoizedState!==null){fv(ie);continue}}de!==null?(de.return=re,me=de):fv(ie)}se=se.sibling}e:for(se=null,ie=i;;){if(ie.tag===5){if(se===null){se=ie;try{v=ie.stateNode,Q?(x=v.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(M=ie.stateNode,$=ie.memoizedProps.style,S=$!=null&&$.hasOwnProperty("display")?$.display:null,M.style.display=Os("display",S))}catch(ye){gt(i,i.return,ye)}}}else if(ie.tag===6){if(se===null)try{ie.stateNode.nodeValue=Q?"":ie.memoizedProps}catch(ye){gt(i,i.return,ye)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===i)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===i)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===i)break e;se===ie&&(se=null),ie=ie.return}se===ie&&(se=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:sr(a,i),Nr(i),p&4&&cv(i);break;case 21:break;default:sr(a,i),Nr(i)}}function Nr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(ov(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var v=p.stateNode;p.flags&32&&(Fi(v,""),p.flags&=-33);var x=av(i);Sm(i,x,v);break;case 3:case 4:var S=p.stateNode.containerInfo,M=av(i);Em(i,M,S);break;default:throw Error(t(161))}}catch($){gt(i,i.return,$)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function NT(i,a,u){me=i,hv(i)}function hv(i,a,u){for(var p=(i.mode&1)!==0;me!==null;){var v=me,x=v.child;if(v.tag===22&&p){var S=v.memoizedState!==null||sh;if(!S){var M=v.alternate,$=M!==null&&M.memoizedState!==null||Zt;M=sh;var Q=Zt;if(sh=S,(Zt=$)&&!Q)for(me=v;me!==null;)S=me,$=S.child,S.tag===22&&S.memoizedState!==null?mv(v):$!==null?($.return=S,me=$):mv(v);for(;x!==null;)me=x,hv(x),x=x.sibling;me=v,sh=M,Zt=Q}dv(i)}else(v.subtreeFlags&8772)!==0&&x!==null?(x.return=v,me=x):dv(i)}}function dv(i){for(;me!==null;){var a=me;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Zt||ih(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!Zt)if(u===null)p.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:nr(a.type,u.memoizedProps);p.componentDidUpdate(v,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&c0(a,x,p);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}c0(a,S,u)}break;case 5:var M=a.stateNode;if(u===null&&a.flags&4){u=M;var $=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&u.focus();break;case"img":$.src&&(u.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var se=Q.memoizedState;if(se!==null){var ie=se.dehydrated;ie!==null&&Hs(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||a.flags&512&&bm(a)}catch(re){gt(a,a.return,re)}}if(a===i){me=null;break}if(u=a.sibling,u!==null){u.return=a.return,me=u;break}me=a.return}}function fv(i){for(;me!==null;){var a=me;if(a===i){me=null;break}var u=a.sibling;if(u!==null){u.return=a.return,me=u;break}me=a.return}}function mv(i){for(;me!==null;){var a=me;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{ih(4,a)}catch($){gt(a,u,$)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var v=a.return;try{p.componentDidMount()}catch($){gt(a,v,$)}}var x=a.return;try{bm(a)}catch($){gt(a,x,$)}break;case 5:var S=a.return;try{bm(a)}catch($){gt(a,S,$)}}}catch($){gt(a,a.return,$)}if(a===i){me=null;break}var M=a.sibling;if(M!==null){M.return=a.return,me=M;break}me=a.return}}var PT=Math.ceil,oh=H.ReactCurrentDispatcher,Tm=H.ReactCurrentOwner,Bn=H.ReactCurrentBatchConfig,$e=0,Lt=null,Tt=null,Ht=0,Rn=0,xa=Qs(0),Nt=0,ec=null,oo=0,ah=0,Im=0,tc=null,fn=null,Cm=0,wa=1/0,hs=null,lh=!1,km=null,ni=null,ch=!1,ri=null,uh=0,nc=0,Am=null,hh=-1,dh=0;function an(){return($e&6)!==0?nt():hh!==-1?hh:hh=nt()}function si(i){return(i.mode&1)===0?1:($e&2)!==0&&Ht!==0?Ht&-Ht:pT.transition!==null?(dh===0&&(dh=El()),dh):(i=Ue,i!==0||(i=window.event,i=i===void 0?16:Qo(i.type)),i)}function ir(i,a,u,p){if(50<nc)throw nc=0,Am=null,Error(t(185));Gi(i,u,p),(($e&2)===0||i!==Lt)&&(i===Lt&&(($e&2)===0&&(ah|=u),Nt===4&&ii(i,Ht)),mn(i,p),u===1&&$e===0&&(a.mode&1)===0&&(wa=nt()+500,Uu&&Js()))}function mn(i,a){var u=i.callbackNode;Ki(i,a);var p=Jr(i,i===Lt?Ht:0);if(p===0)u!==null&&$o(u),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(u!=null&&$o(u),a===1)i.tag===0?mT(gv.bind(null,i)):e0(gv.bind(null,i)),uT(function(){($e&6)===0&&Js()}),u=null;else{switch(vr(p)){case 1:u=Wo;break;case 4:u=xl;break;case 16:u=$i;break;case 536870912:u=Ho;break;default:u=$i}u=Sv(u,pv.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function pv(i,a){if(hh=-1,dh=0,($e&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ba()&&i.callbackNode!==u)return null;var p=Jr(i,i===Lt?Ht:0);if(p===0)return null;if((p&30)!==0||(p&i.expiredLanes)!==0||a)a=fh(i,p);else{a=p;var v=$e;$e|=2;var x=vv();(Lt!==i||Ht!==a)&&(hs=null,wa=nt()+500,lo(i,a));do try{MT();break}catch(M){yv(i,M)}while(!0);Kf(),oh.current=x,$e=v,Tt!==null?a=0:(Lt=null,Ht=0,a=Nt)}if(a!==0){if(a===2&&(v=bl(i),v!==0&&(p=v,a=Rm(i,v))),a===1)throw u=ec,lo(i,0),ii(i,p),mn(i,nt()),u;if(a===6)ii(i,p);else{if(v=i.current.alternate,(p&30)===0&&!DT(v)&&(a=fh(i,p),a===2&&(x=bl(i),x!==0&&(p=x,a=Rm(i,x))),a===1))throw u=ec,lo(i,0),ii(i,p),mn(i,nt()),u;switch(i.finishedWork=v,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:co(i,fn,hs);break;case 3:if(ii(i,p),(p&130023424)===p&&(a=Cm+500-nt(),10<a)){if(Jr(i,0)!==0)break;if(v=i.suspendedLanes,(v&p)!==p){an(),i.pingedLanes|=i.suspendedLanes&v;break}i.timeoutHandle=Of(co.bind(null,i,fn,hs),a);break}co(i,fn,hs);break;case 4:if(ii(i,p),(p&4194240)===p)break;for(a=i.eventTimes,v=-1;0<p;){var S=31-En(p);x=1<<S,S=a[S],S>v&&(v=S),p&=~x}if(p=v,p=nt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*PT(p/1960))-p,10<p){i.timeoutHandle=Of(co.bind(null,i,fn,hs),p);break}co(i,fn,hs);break;case 5:co(i,fn,hs);break;default:throw Error(t(329))}}}return mn(i,nt()),i.callbackNode===u?pv.bind(null,i):null}function Rm(i,a){var u=tc;return i.current.memoizedState.isDehydrated&&(lo(i,a).flags|=256),i=fh(i,a),i!==2&&(a=fn,fn=u,a!==null&&Nm(a)),i}function Nm(i){fn===null?fn=i:fn.push.apply(fn,i)}function DT(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var v=u[p],x=v.getSnapshot;v=v.value;try{if(!er(x(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ii(i,a){for(a&=~Im,a&=~ah,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-En(a),p=1<<u;i[u]=-1,a&=~p}}function gv(i){if(($e&6)!==0)throw Error(t(327));ba();var a=Jr(i,0);if((a&1)===0)return mn(i,nt()),null;var u=fh(i,a);if(i.tag!==0&&u===2){var p=bl(i);p!==0&&(a=p,u=Rm(i,p))}if(u===1)throw u=ec,lo(i,0),ii(i,a),mn(i,nt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,co(i,fn,hs),mn(i,nt()),null}function Pm(i,a){var u=$e;$e|=1;try{return i(a)}finally{$e=u,$e===0&&(wa=nt()+500,Uu&&Js())}}function ao(i){ri!==null&&ri.tag===0&&($e&6)===0&&ba();var a=$e;$e|=1;var u=Bn.transition,p=Ue;try{if(Bn.transition=null,Ue=1,i)return i()}finally{Ue=p,Bn.transition=u,$e=a,($e&6)===0&&Js()}}function Dm(){Rn=xa.current,st(xa)}function lo(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,cT(u)),Tt!==null)for(u=Tt.return;u!==null;){var p=u;switch(Bf(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Vu();break;case 3:ya(),st(un),st(Qt),rm();break;case 5:tm(p);break;case 4:ya();break;case 13:st(ht);break;case 19:st(ht);break;case 10:Gf(p.type._context);break;case 22:case 23:Dm()}u=u.return}if(Lt=i,Tt=i=oi(i.current,null),Ht=Rn=a,Nt=0,ec=null,Im=ah=oo=0,fn=tc=null,ro!==null){for(a=0;a<ro.length;a++)if(u=ro[a],p=u.interleaved,p!==null){u.interleaved=null;var v=p.next,x=u.pending;if(x!==null){var S=x.next;x.next=v,p.next=S}u.pending=p}ro=null}return i}function yv(i,a){do{var u=Tt;try{if(Kf(),Xu.current=th,Ju){for(var p=dt.memoizedState;p!==null;){var v=p.queue;v!==null&&(v.pending=null),p=p.next}Ju=!1}if(io=0,Ot=Rt=dt=null,Gl=!1,Yl=0,Tm.current=null,u===null||u.return===null){Nt=1,ec=a,Tt=null;break}e:{var x=i,S=u.return,M=u,$=a;if(a=Ht,M.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var Q=$,se=M,ie=se.tag;if((se.mode&1)===0&&(ie===0||ie===11||ie===15)){var re=se.alternate;re?(se.updateQueue=re.updateQueue,se.memoizedState=re.memoizedState,se.lanes=re.lanes):(se.updateQueue=null,se.memoizedState=null)}var de=B0(S);if(de!==null){de.flags&=-257,$0(de,S,M,x,a),de.mode&1&&z0(x,Q,a),a=de,$=Q;var ge=a.updateQueue;if(ge===null){var ye=new Set;ye.add($),a.updateQueue=ye}else ge.add($);break e}else{if((a&1)===0){z0(x,Q,a),jm();break e}$=Error(t(426))}}else if(lt&&M.mode&1){var _t=B0(S);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),$0(_t,S,M,x,a),Hf(va($,M));break e}}x=$=va($,M),Nt!==4&&(Nt=2),tc===null?tc=[x]:tc.push(x),x=S;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var K=F0(x,$,a);l0(x,K);break e;case 1:M=$;var W=x.type,Y=x.stateNode;if((x.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ni===null||!ni.has(Y)))){x.flags|=65536,a&=-a,x.lanes|=a;var le=U0(x,M,a);l0(x,le);break e}}x=x.return}while(x!==null)}xv(u)}catch(_e){a=_e,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function vv(){var i=oh.current;return oh.current=th,i===null?th:i}function jm(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Lt===null||(oo&268435455)===0&&(ah&268435455)===0||ii(Lt,Ht)}function fh(i,a){var u=$e;$e|=2;var p=vv();(Lt!==i||Ht!==a)&&(hs=null,lo(i,a));do try{jT();break}catch(v){yv(i,v)}while(!0);if(Kf(),$e=u,oh.current=p,Tt!==null)throw Error(t(261));return Lt=null,Ht=0,Nt}function jT(){for(;Tt!==null;)_v(Tt)}function MT(){for(;Tt!==null&&!Bi();)_v(Tt)}function _v(i){var a=Ev(i.alternate,i,Rn);i.memoizedProps=i.pendingProps,a===null?xv(i):Tt=a,Tm.current=null}function xv(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=CT(u,a,Rn),u!==null){Tt=u;return}}else{if(u=kT(u,a),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Nt=6,Tt=null;return}}if(a=a.sibling,a!==null){Tt=a;return}Tt=a=i}while(a!==null);Nt===0&&(Nt=5)}function co(i,a,u){var p=Ue,v=Bn.transition;try{Bn.transition=null,Ue=1,OT(i,a,u,p)}finally{Bn.transition=v,Ue=p}return null}function OT(i,a,u,p){do ba();while(ri!==null);if(($e&6)!==0)throw Error(t(327));u=i.finishedWork;var v=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=u.lanes|u.childLanes;if(xf(i,x),i===Lt&&(Tt=Lt=null,Ht=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ch||(ch=!0,Sv($i,function(){return ba(),null})),x=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||x){x=Bn.transition,Bn.transition=null;var S=Ue;Ue=1;var M=$e;$e|=4,Tm.current=null,RT(i,u),uv(u,i),nT(jf),ts=!!Df,jf=Df=null,i.current=u,NT(u),Xr(),$e=M,Ue=S,Bn.transition=x}else i.current=u;if(ch&&(ch=!1,ri=i,uh=v),x=i.pendingLanes,x===0&&(ni=null),xu(u.stateNode),mn(i,nt()),a!==null)for(p=i.onRecoverableError,u=0;u<a.length;u++)v=a[u],p(v.value,{componentStack:v.stack,digest:v.digest});if(lh)throw lh=!1,i=km,km=null,i;return(uh&1)!==0&&i.tag!==0&&ba(),x=i.pendingLanes,(x&1)!==0?i===Am?nc++:(nc=0,Am=i):nc=0,Js(),null}function ba(){if(ri!==null){var i=vr(uh),a=Bn.transition,u=Ue;try{if(Bn.transition=null,Ue=16>i?16:i,ri===null)var p=!1;else{if(i=ri,ri=null,uh=0,($e&6)!==0)throw Error(t(331));var v=$e;for($e|=4,me=i.current;me!==null;){var x=me,S=x.child;if((me.flags&16)!==0){var M=x.deletions;if(M!==null){for(var $=0;$<M.length;$++){var Q=M[$];for(me=Q;me!==null;){var se=me;switch(se.tag){case 0:case 11:case 15:Zl(8,se,x)}var ie=se.child;if(ie!==null)ie.return=se,me=ie;else for(;me!==null;){se=me;var re=se.sibling,de=se.return;if(iv(se),se===Q){me=null;break}if(re!==null){re.return=de,me=re;break}me=de}}}var ge=x.alternate;if(ge!==null){var ye=ge.child;if(ye!==null){ge.child=null;do{var _t=ye.sibling;ye.sibling=null,ye=_t}while(ye!==null)}}me=x}}if((x.subtreeFlags&2064)!==0&&S!==null)S.return=x,me=S;else e:for(;me!==null;){if(x=me,(x.flags&2048)!==0)switch(x.tag){case 0:case 11:case 15:Zl(9,x,x.return)}var K=x.sibling;if(K!==null){K.return=x.return,me=K;break e}me=x.return}}var W=i.current;for(me=W;me!==null;){S=me;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,me=Y;else e:for(S=W;me!==null;){if(M=me,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:ih(9,M)}}catch(_e){gt(M,M.return,_e)}if(M===S){me=null;break e}var le=M.sibling;if(le!==null){le.return=M.return,me=le;break e}me=M.return}}if($e=v,Js(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Wi,i)}catch{}p=!0}return p}finally{Ue=u,Bn.transition=a}}return!1}function wv(i,a,u){a=va(u,a),a=F0(i,a,1),i=ei(i,a,1),a=an(),i!==null&&(Gi(i,1,a),mn(i,a))}function gt(i,a,u){if(i.tag===3)wv(i,i,u);else for(;a!==null;){if(a.tag===3){wv(a,i,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ni===null||!ni.has(p))){i=va(u,i),i=U0(a,i,1),a=ei(a,i,1),i=an(),a!==null&&(Gi(a,1,i),mn(a,i));break}}a=a.return}}function LT(i,a,u){var p=i.pingCache;p!==null&&p.delete(a),a=an(),i.pingedLanes|=i.suspendedLanes&u,Lt===i&&(Ht&u)===u&&(Nt===4||Nt===3&&(Ht&130023424)===Ht&&500>nt()-Cm?lo(i,0):Im|=u),mn(i,a)}function bv(i,a){a===0&&((i.mode&1)===0?a=1:(a=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var u=an();i=ls(i,a),i!==null&&(Gi(i,a,u),mn(i,u))}function VT(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),bv(i,u)}function FT(i,a){var u=0;switch(i.tag){case 13:var p=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),bv(i,u)}var Ev;Ev=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||un.current)dn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return dn=!1,IT(i,a,u);dn=(i.flags&131072)!==0}else dn=!1,lt&&(a.flags&1048576)!==0&&t0(a,Bu,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;rh(i,a),i=a.pendingProps;var v=ua(a,Qt.current);pa(a,u),v=om(null,a,p,i,v,u);var x=am();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,hn(p)?(x=!0,Fu(a)):x=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Xf(a),v.updater=Gu,a.stateNode=v,v._reactInternals=a,Zf(a,p,i,u),a=pm(null,a,p,!0,x,u)):(a.tag=0,lt&&x&&zf(a),on(null,a,v,u),a=a.child),a;case 16:p=a.elementType;e:{switch(rh(i,a),i=a.pendingProps,v=p._init,p=v(p._payload),a.type=p,v=a.tag=zT(p),i=nr(p,i),v){case 0:a=mm(null,a,p,i,u);break e;case 1:a=Y0(null,a,p,i,u);break e;case 11:a=W0(null,a,p,i,u);break e;case 14:a=H0(null,a,p,nr(p.type,i),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:nr(p,v),mm(i,a,p,v,u);case 1:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:nr(p,v),Y0(i,a,p,v,u);case 3:e:{if(Q0(a),i===null)throw Error(t(387));p=a.pendingProps,x=a.memoizedState,v=x.element,a0(i,a),Ku(a,p,null,u);var S=a.memoizedState;if(p=S.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){v=va(Error(t(423)),a),a=X0(i,a,p,u,v);break e}else if(p!==v){v=va(Error(t(424)),a),a=X0(i,a,p,u,v);break e}else for(An=Ys(a.stateNode.containerInfo.firstChild),kn=a,lt=!0,tr=null,u=g0(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(fa(),p===v){a=us(i,a,u);break e}on(i,a,p,u)}a=a.child}return a;case 5:return y0(a),i===null&&Wf(a),p=a.type,v=a.pendingProps,x=i!==null?i.memoizedProps:null,S=v.children,Mf(p,v)?S=null:x!==null&&Mf(p,x)&&(a.flags|=32),G0(i,a),on(i,a,S,u),a.child;case 6:return i===null&&Wf(a),null;case 13:return J0(i,a,u);case 4:return em(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=ga(a,null,p,u):on(i,a,p,u),a.child;case 11:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:nr(p,v),W0(i,a,p,v,u);case 7:return on(i,a,a.pendingProps,u),a.child;case 8:return on(i,a,a.pendingProps.children,u),a.child;case 12:return on(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,v=a.pendingProps,x=a.memoizedProps,S=v.value,et(Wu,p._currentValue),p._currentValue=S,x!==null)if(er(x.value,S)){if(x.children===v.children&&!un.current){a=us(i,a,u);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var M=x.dependencies;if(M!==null){S=x.child;for(var $=M.firstContext;$!==null;){if($.context===p){if(x.tag===1){$=cs(-1,u&-u),$.tag=2;var Q=x.updateQueue;if(Q!==null){Q=Q.shared;var se=Q.pending;se===null?$.next=$:($.next=se.next,se.next=$),Q.pending=$}}x.lanes|=u,$=x.alternate,$!==null&&($.lanes|=u),Yf(x.return,u,a),M.lanes|=u;break}$=$.next}}else if(x.tag===10)S=x.type===a.type?null:x.child;else if(x.tag===18){if(S=x.return,S===null)throw Error(t(341));S.lanes|=u,M=S.alternate,M!==null&&(M.lanes|=u),Yf(S,u,a),S=x.sibling}else S=x.child;if(S!==null)S.return=x;else for(S=x;S!==null;){if(S===a){S=null;break}if(x=S.sibling,x!==null){x.return=S.return,S=x;break}S=S.return}x=S}on(i,a,v.children,u),a=a.child}return a;case 9:return v=a.type,p=a.pendingProps.children,pa(a,u),v=Un(v),p=p(v),a.flags|=1,on(i,a,p,u),a.child;case 14:return p=a.type,v=nr(p,a.pendingProps),v=nr(p.type,v),H0(i,a,p,v,u);case 15:return q0(i,a,a.type,a.pendingProps,u);case 17:return p=a.type,v=a.pendingProps,v=a.elementType===p?v:nr(p,v),rh(i,a),a.tag=1,hn(p)?(i=!0,Fu(a)):i=!1,pa(a,u),d0(a,p,v),Zf(a,p,v,u),pm(null,a,p,!0,i,u);case 19:return ev(i,a,u);case 22:return K0(i,a,u)}throw Error(t(156,a.tag))};function Sv(i,a){return _l(i,a)}function UT(i,a,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(i,a,u,p){return new UT(i,a,u,p)}function Mm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zT(i){if(typeof i=="function")return Mm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===oe)return 14}return 2}function oi(i,a){var u=i.alternate;return u===null?(u=$n(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function mh(i,a,u,p,v,x){var S=2;if(p=i,typeof i=="function")Mm(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case A:return uo(u.children,v,x,a);case k:S=8,v|=8;break;case P:return i=$n(12,u,a,v|2),i.elementType=P,i.lanes=x,i;case j:return i=$n(13,u,a,v),i.elementType=j,i.lanes=x,i;case Ce:return i=$n(19,u,a,v),i.elementType=Ce,i.lanes=x,i;case ae:return ph(u,v,x,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case F:S=10;break e;case L:S=9;break e;case B:S=11;break e;case oe:S=14;break e;case J:S=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=$n(S,u,a,v),a.elementType=i,a.type=p,a.lanes=x,a}function uo(i,a,u,p){return i=$n(7,i,p,a),i.lanes=u,i}function ph(i,a,u,p){return i=$n(22,i,p,a),i.elementType=ae,i.lanes=u,i.stateNode={isHidden:!1},i}function Om(i,a,u){return i=$n(6,i,null,a),i.lanes=u,i}function Lm(i,a,u){return a=$n(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function BT(i,a,u,p,v){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=p,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Vm(i,a,u,p,v,x,S,M,$){return i=new BT(i,a,u,M,$),a===1?(a=1,x===!0&&(a|=8)):a=0,x=$n(3,null,null,a),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xf(x),i}function $T(i,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:p==null?null:""+p,children:i,containerInfo:a,implementation:u}}function Tv(i){if(!i)return Xs;i=i._reactInternals;e:{if(Jn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(hn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(hn(u))return Jy(i,u,a)}return a}function Iv(i,a,u,p,v,x,S,M,$){return i=Vm(u,p,!0,i,v,x,S,M,$),i.context=Tv(null),u=i.current,p=an(),v=si(u),x=cs(p,v),x.callback=a??null,ei(u,x,v),i.current.lanes=v,Gi(i,v,p),mn(i,p),i}function gh(i,a,u,p){var v=a.current,x=an(),S=si(v);return u=Tv(u),a.context===null?a.context=u:a.pendingContext=u,a=cs(x,S),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=ei(v,a,S),i!==null&&(ir(i,v,S,x),qu(i,v,S)),S}function yh(i){return i=i.current,i.child?(i.child.tag===5,i.child.stateNode):null}function Cv(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Fm(i,a){Cv(i,a),(i=i.alternate)&&Cv(i,a)}function WT(){return null}var kv=typeof reportError=="function"?reportError:function(i){console.error(i)};function Um(i){this._internalRoot=i}vh.prototype.render=Um.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));gh(i,a,null,null)},vh.prototype.unmount=Um.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ao(function(){gh(null,i,null,null)}),a[ss]=null}};function vh(i){this._internalRoot=i}vh.prototype.unstable_scheduleHydration=function(i){if(i){var a=kl();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Sn.length&&a!==0&&a<Sn[u].priority;u++);Sn.splice(u,0,i),u===0&&Go(i)}};function zm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function _h(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Av(){}function HT(i,a,u,p,v){if(v){if(typeof p=="function"){var x=p;p=function(){var Q=yh(S);x.call(Q)}}var S=Iv(a,p,i,0,null,!1,!1,"",Av);return i._reactRootContainer=S,i[ss]=S.current,Ul(i.nodeType===8?i.parentNode:i),ao(),S}for(;v=i.lastChild;)i.removeChild(v);if(typeof p=="function"){var M=p;p=function(){var Q=yh($);M.call(Q)}}var $=Vm(i,0,!1,null,null,!1,!1,"",Av);return i._reactRootContainer=$,i[ss]=$.current,Ul(i.nodeType===8?i.parentNode:i),ao(function(){gh(a,$,u,p)}),$}function xh(i,a,u,p,v){var x=u._reactRootContainer;if(x){var S=x;if(typeof v=="function"){var M=v;v=function(){var $=yh(S);M.call($)}}gh(a,S,i,v)}else S=HT(u,a,i,v,p);return yh(S)}Il=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=Ge(a.pendingLanes);u!==0&&(Tl(a,u|1),mn(a,nt()),($e&6)===0&&(wa=nt()+500,Js()))}break;case 13:ao(function(){var p=ls(i,1);if(p!==null){var v=an();ir(p,i,1,v)}}),Fm(i,1)}},qo=function(i){if(i.tag===13){var a=ls(i,134217728);if(a!==null){var u=an();ir(a,i,134217728,u)}Fm(i,134217728)}},Cl=function(i){if(i.tag===13){var a=si(i),u=ls(i,a);if(u!==null){var p=an();ir(u,i,a,p)}Fm(i,a)}},kl=function(){return Ue},Al=function(i,a){var u=Ue;try{return Ue=i,a()}finally{Ue=u}},Gr=function(i,a,u){switch(a){case"input":if(Vi(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==i&&p.form===i.form){var v=Lu(p);if(!v)throw Error(t(90));ul(p),Vi(p,v)}}}break;case"textarea":lu(i,u);break;case"select":a=u.value,a!=null&&Qn(i,!!u.multiple,a,!1)}},hu=Pm,du=ao;var qT={usingClientEntryPoint:!1,Events:[$l,la,Lu,Vs,Fs,Pm]},rc={findFiberByHostInstance:Zi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},KT={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=_u(i),i===null?null:i.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{Wi=wh.inject(KT),bn=wh}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qT,pn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zm(a))throw Error(t(200));return $T(i,a,null,u)},pn.createRoot=function(i,a){if(!zm(i))throw Error(t(299));var u=!1,p="",v=kv;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Vm(i,1,!1,null,null,u,!1,p,v),i[ss]=a.current,Ul(i.nodeType===8?i.parentNode:i),new Um(a)},pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=_u(a),i=i===null?null:i.stateNode,i},pn.flushSync=function(i){return ao(i)},pn.hydrate=function(i,a,u){if(!_h(a))throw Error(t(200));return xh(null,i,a,!0,u)},pn.hydrateRoot=function(i,a,u){if(!zm(i))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,v=!1,x="",S=kv;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=Iv(a,null,i,1,u??null,v,!1,x,S),i[ss]=a.current,Ul(i),p)for(i=0;i<p.length;i++)u=p[i],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new vh(a)},pn.render=function(i,a,u){if(!_h(a))throw Error(t(200));return xh(null,i,a,!1,u)},pn.unmountComponentAtNode=function(i){if(!_h(i))throw Error(t(40));return i._reactRootContainer?(ao(function(){xh(null,null,i,!1,function(){i._reactRootContainer=null,i[ss]=null})}),!0):!1},pn.unstable_batchedUpdates=Pm,pn.unstable_renderSubtreeIntoContainer=function(i,a,u,p){if(!_h(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return xh(i,a,u,!1,p)},pn.version="18.2.0-next-9e3b772b8-20220608",pn}var Lv;function nI(){if(Lv)return Wm.exports;Lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wm.exports=tI(),Wm.exports}var Vv;function rI(){if(Vv)return bh;Vv=1;var n=nI();return bh.createRoot=n.createRoot,bh.hydrateRoot=n.hydrateRoot,bh}var sI=rI();const iI=zw(sI);var Fv="popstate";function oI(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return wp("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Rc(s)}return lI(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function lr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aI(){return Math.random().toString(36).substring(2,10)}function Uv(n,e){return{usr:n.state,key:n.key,idx:e}}function wp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ya(e):e,state:t,key:e&&e.key||r||aI()}}function Rc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ya(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function lI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function y(){c="POP";let C=g(),V=C==null?null:C-f;f=C,h&&h({action:c,location:T.location,delta:V})}function _(C,V){c="PUSH";let D=wp(T.location,C,V);f=g()+1;let U=Uv(D,f),H=T.createHref(D);try{l.pushState(U,"",H)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(H)}o&&h&&h({action:c,location:T.location,delta:1})}function E(C,V){c="REPLACE";let D=wp(T.location,C,V);f=g();let U=Uv(D,f),H=T.createHref(D);l.replaceState(U,"",H),o&&h&&h({action:c,location:T.location,delta:0})}function I(C){return cI(C)}let T={get action(){return c},get location(){return n(s,l)},listen(C){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Fv,y),h=C,()=>{s.removeEventListener(Fv,y),h=null}},createHref(C){return e(s,C)},createURL:I,encodeLocation(C){let V=I(C);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:_,replace:E,go(C){return l.go(C)}};return T}function cI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Rc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Bw(n,e,t="/"){return uI(n,e,t,!1)}function uI(n,e,t,r){let s=typeof e=="string"?Ya(e):e,o=Es(s.pathname||"/",t);if(o==null)return null;let l=$w(n);hI(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=bI(o);c=xI(l[h],f,r)}return c}function $w(n,e=[],t=[],r="",s=!1){let o=(l,c,h=s,f)=>{let g={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(r)&&h)return;ut(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length)}let y=xs([r,g.relativePath]),_=t.concat(g);l.children&&l.children.length>0&&(ut(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),$w(l.children,e,_,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:vI(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let h of Ww(l.path))o(l,c,!0,h)}),e}function Ww(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Ww(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function hI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:_I(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var dI=/^:[\w-]+$/,fI=3,mI=2,pI=1,gI=10,yI=-2,zv=n=>n==="*";function vI(n,e){let t=n.split("/"),r=t.length;return t.some(zv)&&(r+=yI),e&&(r+=mI),t.filter(s=>!zv(s)).reduce((s,o)=>s+(dI.test(o)?fI:o===""?pI:gI),r)}function _I(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function xI(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=od({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),_=h.route;if(!y&&f&&t&&!r[r.length-1].route.index&&(y=od({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:xs([o,y.pathname]),pathnameBase:II(xs([o,y.pathnameBase])),route:_}),y.pathnameBase!=="/"&&(o=xs([o,y.pathnameBase]))}return l}function od(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=wI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:y},_)=>{if(g==="*"){let I=c[_]||"";l=o.slice(0,o.length-I.length).replace(/(.)\/+$/,"$1")}const E=c[_];return y&&!E?f[g]=void 0:f[g]=(E||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function wI(n,e=!1,t=!0){lr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function bI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Es(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var EI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function SI(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ya(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=Bv(t.substring(1),"/"):o=Bv(t,e)):o=e,{pathname:o,search:CI(r),hash:kI(s)}}function Bv(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Km(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rg(n){let e=TI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function sg(n,e,t,r=!1){let s;typeof n=="string"?s=Ya(n):(s={...n},ut(!s.pathname||!s.pathname.includes("?"),Km("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Km("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Km("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),y-=1;s.pathname=_.join("/")}c=y>=0?e[y]:"/"}let h=SI(s,c),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var xs=n=>n.join("/").replace(/\/\/+/g,"/"),II=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),CI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,AI=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function RI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function NI(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function qw(n,e){let t=n;if(typeof t!="string"||!EI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(Hw)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),c=Es(l.pathname,e);l.origin===o.origin&&c!=null?t=c+l.search+l.hash:s=!0}catch{lr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Kw=["POST","PUT","PATCH","DELETE"];new Set(Kw);var PI=["GET",...Kw];new Set(PI);var Qa=N.createContext(null);Qa.displayName="DataRouter";var Ud=N.createContext(null);Ud.displayName="DataRouterState";var DI=N.createContext(!1),Gw=N.createContext({isTransitioning:!1});Gw.displayName="ViewTransition";var jI=N.createContext(new Map);jI.displayName="Fetchers";var MI=N.createContext(null);MI.displayName="Await";var Mn=N.createContext(null);Mn.displayName="Navigation";var Bc=N.createContext(null);Bc.displayName="Location";var Yn=N.createContext({outlet:null,matches:[],isDataRoute:!1});Yn.displayName="Route";var ig=N.createContext(null);ig.displayName="RouteError";var Yw="REACT_ROUTER_ERROR",OI="REDIRECT",LI="ROUTE_ERROR_RESPONSE";function VI(n){if(n.startsWith(`${Yw}:${OI}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function FI(n){if(n.startsWith(`${Yw}:${LI}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new AI(e.status,e.statusText,e.data)}catch{}}function UI(n,{relative:e}={}){ut(Xa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Mn),{hash:s,pathname:o,search:l}=$c(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:xs([t,o])),r.createHref({pathname:c,search:l,hash:s})}function Xa(){return N.useContext(Bc)!=null}function qr(){return ut(Xa(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Bc).location}var Qw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xw(n){N.useContext(Mn).static||N.useLayoutEffect(n)}function ln(){let{isDataRoute:n}=N.useContext(Yn);return n?nC():zI()}function zI(){ut(Xa(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(Qa),{basename:e,navigator:t}=N.useContext(Mn),{matches:r}=N.useContext(Yn),{pathname:s}=qr(),o=JSON.stringify(rg(r)),l=N.useRef(!1);return Xw(()=>{l.current=!0}),N.useCallback((h,f={})=>{if(lr(l.current,Qw),!l.current)return;if(typeof h=="number"){t.go(h);return}let g=sg(h,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:xs([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}var BI=N.createContext(null);function $I(n){let e=N.useContext(Yn).outlet;return N.useMemo(()=>e&&N.createElement(BI.Provider,{value:n},e),[e,n])}function WI(){let{matches:n}=N.useContext(Yn),e=n[n.length-1];return e?e.params:{}}function $c(n,{relative:e}={}){let{matches:t}=N.useContext(Yn),{pathname:r}=qr(),s=JSON.stringify(rg(t));return N.useMemo(()=>sg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function HI(n,e){return Jw(n,e)}function Jw(n,e,t,r,s){ut(Xa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=N.useContext(Mn),{matches:l}=N.useContext(Yn),c=l[l.length-1],h=c?c.params:{},f=c?c.pathname:"/",g=c?c.pathnameBase:"/",y=c&&c.route;{let D=y&&y.path||"";eb(f,!y||D.endsWith("*")||D.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${D}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${D}"> to <Route path="${D==="/"?"*":`${D}/*`}">.`)}let _=qr(),E;if(e){let D=typeof e=="string"?Ya(e):e;ut(g==="/"||D.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${D.pathname}" was given in the \`location\` prop.`),E=D}else E=_;let I=E.pathname||"/",T=I;if(g!=="/"){let D=g.replace(/^\//,"").split("/");T="/"+I.replace(/^\//,"").split("/").slice(D.length).join("/")}let C=Bw(n,{pathname:T});lr(y||C!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),lr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=QI(C&&C.map(D=>Object.assign({},D,{params:Object.assign({},h,D.params),pathname:xs([g,o.encodeLocation?o.encodeLocation(D.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?g:xs([g,o.encodeLocation?o.encodeLocation(D.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:D.pathnameBase])})),l,t,r,s);return e&&V?N.createElement(Bc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},V):V}function qI(){let n=tC(),e=RI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:s},t):null,l)}var KI=N.createElement(qI,null),Zw=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=FI(n.digest);t&&(n=t)}let e=n!==void 0?N.createElement(Yn.Provider,{value:this.props.routeContext},N.createElement(ig.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?N.createElement(GI,{error:n},e):e}};Zw.contextType=DI;var Gm=new WeakMap;function GI({children:n,error:e}){let{basename:t}=N.useContext(Mn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=VI(e.digest);if(r){let s=Gm.get(e);if(s)throw s;let o=qw(r.location,t);if(Hw&&!Gm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Gm.set(e,l),l}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function YI({routeContext:n,match:e,children:t}){let r=N.useContext(Qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(Yn.Provider,{value:n},t)}function QI(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let g=o.findIndex(y=>y.route.id&&l?.[y.route.id]!==void 0);ut(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let c=!1,h=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=g),y.route.id){let{loaderData:_,errors:E}=t,I=y.route.loader&&!_.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||I){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=t&&r?(g,y)=>{r(g,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:NI(t.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,_)=>{let E,I=!1,T=null,C=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,T=y.route.errorElement||KI,c&&(h<0&&_===0?(eb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,C=null):h===_&&(I=!0,C=y.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,_+1)),D=()=>{let U;return E?U=T:I?U=C:y.route.Component?U=N.createElement(y.route.Component,null):y.route.element?U=y.route.element:U=g,N.createElement(YI,{match:y,routeContext:{outlet:g,matches:V,isDataRoute:t!=null},children:U})};return t&&(y.route.ErrorBoundary||y.route.errorElement||_===0)?N.createElement(Zw,{location:t.location,revalidation:t.revalidation,component:T,error:E,children:D(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:f}):D()},null)}function og(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XI(n){let e=N.useContext(Qa);return ut(e,og(n)),e}function JI(n){let e=N.useContext(Ud);return ut(e,og(n)),e}function ZI(n){let e=N.useContext(Yn);return ut(e,og(n)),e}function ag(n){let e=ZI(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eC(){return ag("useRouteId")}function tC(){let n=N.useContext(ig),e=JI("useRouteError"),t=ag("useRouteError");return n!==void 0?n:e.errors?.[t]}function nC(){let{router:n}=XI("useNavigate"),e=ag("useNavigate"),t=N.useRef(!1);return Xw(()=>{t.current=!0}),N.useCallback(async(s,o={})=>{lr(t.current,Qw),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var $v={};function eb(n,e,t){!e&&!$v[n]&&($v[n]=!0,lr(!1,t))}N.memo(rC);function rC({routes:n,future:e,state:t,onError:r}){return Jw(n,void 0,t,r,e)}function Wv({to:n,replace:e,state:t,relative:r}){ut(Xa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Mn);lr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=N.useContext(Yn),{pathname:l}=qr(),c=ln(),h=sg(n,rg(o),l,r==="path"),f=JSON.stringify(h);return N.useEffect(()=>{c(JSON.parse(f),{replace:e,state:t,relative:r})},[c,f,r,e,t]),null}function sC(n){return $I(n.context)}function ft(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){ut(!Xa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=N.useMemo(()=>({basename:c,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[c,s,o,l]);typeof t=="string"&&(t=Ya(t));let{pathname:f="/",search:g="",hash:y="",state:_=null,key:E="default"}=t,I=N.useMemo(()=>{let T=Es(f,c);return T==null?null:{location:{pathname:T,search:g,hash:y,state:_,key:E},navigationType:r}},[c,f,g,y,_,E,r]);return lr(I!=null,`<Router basename="${c}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:N.createElement(Mn.Provider,{value:h},N.createElement(Bc.Provider,{children:e,value:I}))}function oC({children:n,location:e}){return HI(bp(n),e)}function bp(n,e=[]){let t=[];return N.Children.forEach(n,(r,s)=>{if(!N.isValidElement(r))return;let o=[...e,s];if(r.type===N.Fragment){t.push.apply(t,bp(r.props.children,o));return}ut(r.type===ft,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=bp(r.props.children,o)),t.push(l)}),t}var Wh="get",Hh="application/x-www-form-urlencoded";function zd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function aC(n){return zd(n)&&n.tagName.toLowerCase()==="button"}function lC(n){return zd(n)&&n.tagName.toLowerCase()==="form"}function cC(n){return zd(n)&&n.tagName.toLowerCase()==="input"}function uC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function hC(n,e){return n.button===0&&(!e||e==="_self")&&!uC(n)}var Eh=null;function dC(){if(Eh===null)try{new FormData(document.createElement("form"),0),Eh=!1}catch{Eh=!0}return Eh}var fC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ym(n){return n!=null&&!fC.has(n)?(lr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hh}"`),null):n}function mC(n,e){let t,r,s,o,l;if(lC(n)){let c=n.getAttribute("action");r=c?Es(c,e):null,t=n.getAttribute("method")||Wh,s=Ym(n.getAttribute("enctype"))||Hh,o=new FormData(n)}else if(aC(n)||cC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?Es(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Wh,s=Ym(n.getAttribute("formenctype"))||Ym(c.getAttribute("enctype"))||Hh,o=new FormData(c,n),!dC()){let{name:f,type:g,value:y}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,y)}}else{if(zd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,r=null,s=Hh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Es(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function gC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function vC(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await gC(o,t);return l.links?l.links():[]}return[]}));return bC(r.flat(1).filter(yC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Hv(n,e,t,r,s,o){let l=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,c=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>l(h,f)||c(h,f)):o==="data"?e.filter((h,f)=>{let g=r.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(l(h,f)||c(h,f))return!0;if(h.route.shouldRevalidate){let y=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function _C(n,e,{includeHydrateFallback:t}={}){return xC(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function xC(n){return[...new Set(n)]}function wC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function bC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(wC(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function tb(){let n=N.useContext(Qa);return lg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function EC(){let n=N.useContext(Ud);return lg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var cg=N.createContext(void 0);cg.displayName="FrameworkContext";function nb(){let n=N.useContext(cg);return lg(n,"You must render this element inside a <HydratedRouter> element"),n}function SC(n,e){let t=N.useContext(cg),[r,s]=N.useState(!1),[o,l]=N.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=e,_=N.useRef(null);N.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let T=V=>{V.forEach(D=>{l(D.isIntersecting)})},C=new IntersectionObserver(T,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[n]),N.useEffect(()=>{if(r){let T=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(T)}}},[r]);let E=()=>{s(!0)},I=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:ic(c,E),onBlur:ic(h,I),onMouseEnter:ic(f,E),onMouseLeave:ic(g,I),onTouchStart:ic(y,E)}]:[!1,_,{}]}function ic(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function TC({page:n,...e}){let{router:t}=tb(),r=N.useMemo(()=>Bw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?N.createElement(CC,{page:n,matches:r,...e}):null}function IC(n){let{manifest:e,routeModules:t}=nb(),[r,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return vC(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function CC({page:n,matches:e,...t}){let r=qr(),{future:s,manifest:o,routeModules:l}=nb(),{basename:c}=tb(),{loaderData:h,matches:f}=EC(),g=N.useMemo(()=>Hv(n,e,f,o,r,"data"),[n,e,f,o,r]),y=N.useMemo(()=>Hv(n,e,f,o,r,"assets"),[n,e,f,o,r]),_=N.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let T=new Set,C=!1;if(e.forEach(D=>{let U=o.routes[D.route.id];!U||!U.hasLoader||(!g.some(H=>H.route.id===D.route.id)&&D.route.id in h&&l[D.route.id]?.shouldRevalidate||U.hasClientLoader?C=!0:T.add(D.route.id))}),T.size===0)return[];let V=pC(n,c,s.unstable_trailingSlashAwareDataRequests,"data");return C&&T.size>0&&V.searchParams.set("_routes",e.filter(D=>T.has(D.route.id)).map(D=>D.route.id).join(",")),[V.pathname+V.search]},[c,s.unstable_trailingSlashAwareDataRequests,h,r,o,g,e,n,l]),E=N.useMemo(()=>_C(y,o),[y,o]),I=IC(y);return N.createElement(N.Fragment,null,_.map(T=>N.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),E.map(T=>N.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),I.map(({key:T,link:C})=>N.createElement("link",{key:T,nonce:t.nonce,...C,crossOrigin:C.crossOrigin??t.crossOrigin})))}function kC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var AC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AC&&(window.__reactRouterVersion="7.13.0")}catch{}function RC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=N.useRef();s.current==null&&(s.current=oI({window:r,v5Compat:!0}));let o=s.current,[l,c]=N.useState({action:o.action,location:o.location}),h=N.useCallback(f=>{t===!1?c(f):N.startTransition(()=>c(f))},[t]);return N.useLayoutEffect(()=>o.listen(h),[o,h]),N.createElement(iC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:_,...E},I){let{basename:T,unstable_useTransitions:C}=N.useContext(Mn),V=typeof f=="string"&&rb.test(f),D=qw(f,T);f=D.to;let U=UI(f,{relative:s}),[H,O,q]=SC(r,E),A=jC(f,{replace:l,state:c,target:h,preventScrollReset:g,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:_,unstable_useTransitions:C});function k(F){e&&e(F),F.defaultPrevented||A(F)}let P=N.createElement("a",{...E,...q,href:D.absoluteURL||U,onClick:D.isExternal||o?e:k,ref:kC(I,O),target:h,"data-discover":!V&&t==="render"?"true":void 0});return H&&!V?N.createElement(N.Fragment,null,P,N.createElement(TC,{page:U})):P});De.displayName="Link";var NC=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...f},g){let y=$c(l,{relative:f.relative}),_=qr(),E=N.useContext(Ud),{navigator:I,basename:T}=N.useContext(Mn),C=E!=null&&FC(y)&&c===!0,V=I.encodeLocation?I.encodeLocation(y).pathname:y.pathname,D=_.pathname,U=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(D=D.toLowerCase(),U=U?U.toLowerCase():null,V=V.toLowerCase()),U&&T&&(U=Es(U,T)||U);const H=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let O=D===V||!s&&D.startsWith(V)&&D.charAt(H)==="/",q=U!=null&&(U===V||!s&&U.startsWith(V)&&U.charAt(V.length)==="/"),A={isActive:O,isPending:q,isTransitioning:C},k=O?e:void 0,P;typeof r=="function"?P=r(A):P=[r,O?"active":null,q?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(A):o;return N.createElement(De,{...f,"aria-current":k,className:P,ref:g,style:F,to:l,viewTransition:c},typeof h=="function"?h(A):h)});NC.displayName="NavLink";var PC=N.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Wh,action:c,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:_,...E},I)=>{let{unstable_useTransitions:T}=N.useContext(Mn),C=LC(),V=VC(c,{relative:f}),D=l.toLowerCase()==="get"?"get":"post",U=typeof c=="string"&&rb.test(c),H=O=>{if(h&&h(O),O.defaultPrevented)return;O.preventDefault();let q=O.nativeEvent.submitter,A=q?.getAttribute("formmethod")||l,k=()=>C(q||O.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:_});T&&t!==!1?N.startTransition(()=>k()):k()};return N.createElement("form",{ref:I,method:D,action:V,onSubmit:r?h:H,...E,"data-discover":!U&&n==="render"?"true":void 0})});PC.displayName="Form";function DC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sb(n){let e=N.useContext(Qa);return ut(e,DC(n)),e}function jC(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let f=ln(),g=qr(),y=$c(n,{relative:o});return N.useCallback(_=>{if(hC(_,e)){_.preventDefault();let E=t!==void 0?t:Rc(g)===Rc(y),I=()=>f(n,{replace:E,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});h?N.startTransition(()=>I()):I()}},[g,f,y,t,r,e,n,s,o,l,c,h])}var MC=0,OC=()=>`__${String(++MC)}__`;function LC(){let{router:n}=sb("useSubmit"),{basename:e}=N.useContext(Mn),t=eC(),r=n.fetch,s=n.navigate;return N.useCallback(async(o,l={})=>{let{action:c,method:h,encType:f,formData:g,body:y}=mC(o,e);if(l.navigate===!1){let _=l.fetcherKey||OC();await r(_,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||f,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:g,body:y,formMethod:l.method||h,formEncType:l.encType||f,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function VC(n,{relative:e}={}){let{basename:t}=N.useContext(Mn),r=N.useContext(Yn);ut(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...$c(n||".",{relative:e})},l=qr();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(g=>g==="")){c.delete("index"),h.filter(y=>y).forEach(y=>c.append("index",y));let g=c.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:xs([t,o.pathname])),Rc(o)}function FC(n,{relative:e}={}){let t=N.useContext(Gw);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=sb("useViewTransitionState"),s=$c(n,{relative:e});if(!t.isTransitioning)return!1;let o=Es(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Es(t.nextLocation.pathname,r)||t.nextLocation.pathname;return od(s.pathname,l)!=null||od(s.pathname,o)!=null}const UC=()=>{};var qv={};const ib=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zC=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,f=h?n[s+2]:0,g=o>>2,y=(o&3)<<4|c>>4;let _=(c&15)<<2|f>>6,E=f&63;h||(E=64,l||(_=64)),r.push(t[g],t[y],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ib(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||f==null||y==null)throw new BC;const _=o<<2|c>>4;if(r.push(_),f!==64){const E=c<<4&240|f>>2;if(r.push(E),y!==64){const I=f<<6&192|y;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $C=function(n){const e=ib(n);return ob.encodeByteArray(e,!0)},ad=function(n){return $C(n).replace(/\./g,"")},ab=function(n){try{return ob.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const HC=()=>WC().__FIREBASE_DEFAULTS__,qC=()=>{if(typeof process>"u"||typeof qv>"u")return;const n=qv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ab(n[1]);return e&&JSON.parse(e)},Bd=()=>{try{return UC()||HC()||qC()||KC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lb=n=>Bd()?.emulatorHosts?.[n],GC=n=>{const e=lb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cb=()=>Bd()?.config,ub=n=>Bd()?.[`_${n}`];class YC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function Ja(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hb(n){return(await fetch(n,{credentials:"include"})).ok}function QC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ad(JSON.stringify(t)),ad(JSON.stringify(l)),""].join(".")}const wc={};function XC(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function JC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Kv=!1;function db(n,e){if(typeof window>"u"||typeof document>"u"||!Ja(window.location.host)||wc[n]===e||wc[n]||Kv)return;wc[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=XC().prod.length>0;function l(){const _=document.getElementById(r);_&&_.remove()}function c(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,E){_.setAttribute("width","24"),_.setAttribute("id",E),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{Kv=!0,l()},_}function g(_,E){_.setAttribute("id",E),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function y(){const _=JC(r),E=t("text"),I=document.getElementById(E)||document.createElement("span"),T=t("learnmore"),C=document.getElementById(T)||document.createElement("a"),V=t("preprendIcon"),D=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const U=_.element;c(U),g(C,T);const H=f();h(D,V),U.append(D,I,C,H),document.body.appendChild(U)}o?(I.innerText="Preview backend disconnected.",D.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(D.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function ek(){const n=Bd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sk(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function ik(){return!ek()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ok(){try{return typeof indexedDB=="object"}catch{return!1}}function ak(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const lk="FirebaseError";class Rs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lk,Object.setPrototypeOf(this,Rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?ck(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new Rs(s,c,r)}}function ck(n,e){return n.replace(uk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const uk=/\{\$([^}]+)}/g;function hk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ss(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(Gv(o)&&Gv(l)){if(!Ss(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Gv(n){return n!==null&&typeof n=="object"}function Hc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function fc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dk(n,e){const t=new fk(n,e);return t.subscribe.bind(t)}class fk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Qm),s.error===void 0&&(s.error=Qm),s.complete===void 0&&(s.complete=Qm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qm(){}function Mt(n){return n&&n._delegate?n._delegate:n}class wo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const po="[DEFAULT]";class pk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new YC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yk(e))try{this.getOrInitializeService({instanceIdentifier:po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=po){return this.instances.has(e)}getOptions(e=po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=po){return this.component?this.component.multipleInstances?e:po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gk(n){return n===po?void 0:n}function yk(n){return n.instantiationMode==="EAGER"}class vk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Le;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Le||(Le={}));const _k={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},xk=Le.INFO,wk={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},bk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=wk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=xk,this._logHandler=bk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const Ek=(n,e)=>e.some(t=>n instanceof t);let Yv,Qv;function Sk(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Tk(){return Qv||(Qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fb=new WeakMap,Ep=new WeakMap,mb=new WeakMap,Xm=new WeakMap,hg=new WeakMap;function Ik(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_i(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&fb.set(t,n)}).catch(()=>{}),hg.set(e,n),e}function Ck(n){if(Ep.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Ep.set(n,e)}let Sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ep.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function kk(n){Sp=n(Sp)}function Ak(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Jm(this),e,...t);return mb.set(r,e.sort?e.sort():[e]),_i(r)}:Tk().includes(n)?function(...e){return n.apply(Jm(this),e),_i(fb.get(this))}:function(...e){return _i(n.apply(Jm(this),e))}}function Rk(n){return typeof n=="function"?Ak(n):(n instanceof IDBTransaction&&Ck(n),Ek(n,Sk())?new Proxy(n,Sp):n)}function _i(n){if(n instanceof IDBRequest)return Ik(n);if(Xm.has(n))return Xm.get(n);const e=Rk(n);return e!==n&&(Xm.set(n,e),hg.set(e,n)),e}const Jm=n=>hg.get(n);function Nk(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=_i(l);return r&&l.addEventListener("upgradeneeded",h=>{r(_i(l.result),h.oldVersion,h.newVersion,_i(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const Pk=["get","getKey","getAll","getAllKeys","count"],Dk=["put","add","delete","clear"],Zm=new Map;function Xv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Dk.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Pk.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),s&&h.done]))[0]};return Zm.set(e,o),o}kk(n=>({...n,get:(e,t,r)=>Xv(e,t)||n.get(e,t,r),has:(e,t)=>!!Xv(e,t)||n.has(e,t)}));class jk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mk(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Mk(n){return n.getComponent()?.type==="VERSION"}const Tp="@firebase/app",Jv="0.14.8";const Ts=new ug("@firebase/app"),Ok="@firebase/app-compat",Lk="@firebase/analytics-compat",Vk="@firebase/analytics",Fk="@firebase/app-check-compat",Uk="@firebase/app-check",zk="@firebase/auth",Bk="@firebase/auth-compat",$k="@firebase/database",Wk="@firebase/data-connect",Hk="@firebase/database-compat",qk="@firebase/functions",Kk="@firebase/functions-compat",Gk="@firebase/installations",Yk="@firebase/installations-compat",Qk="@firebase/messaging",Xk="@firebase/messaging-compat",Jk="@firebase/performance",Zk="@firebase/performance-compat",eA="@firebase/remote-config",tA="@firebase/remote-config-compat",nA="@firebase/storage",rA="@firebase/storage-compat",sA="@firebase/firestore",iA="@firebase/ai",oA="@firebase/firestore-compat",aA="firebase",lA="12.9.0";const Ip="[DEFAULT]",cA={[Tp]:"fire-core",[Ok]:"fire-core-compat",[Vk]:"fire-analytics",[Lk]:"fire-analytics-compat",[Uk]:"fire-app-check",[Fk]:"fire-app-check-compat",[zk]:"fire-auth",[Bk]:"fire-auth-compat",[$k]:"fire-rtdb",[Wk]:"fire-data-connect",[Hk]:"fire-rtdb-compat",[qk]:"fire-fn",[Kk]:"fire-fn-compat",[Gk]:"fire-iid",[Yk]:"fire-iid-compat",[Qk]:"fire-fcm",[Xk]:"fire-fcm-compat",[Jk]:"fire-perf",[Zk]:"fire-perf-compat",[eA]:"fire-rc",[tA]:"fire-rc-compat",[nA]:"fire-gcs",[rA]:"fire-gcs-compat",[sA]:"fire-fst",[oA]:"fire-fst-compat",[iA]:"fire-vertex","fire-js":"fire-js",[aA]:"fire-js-all"};const ld=new Map,uA=new Map,Cp=new Map;function Zv(n,e){try{n.container.addComponent(e)}catch(t){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fa(n){const e=n.name;if(Cp.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;Cp.set(e,n);for(const t of ld.values())Zv(t,n);for(const t of uA.values())Zv(t,n);return!0}function dg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Hn(n){return n==null?!1:n.settings!==void 0}const hA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new Wc("app","Firebase",hA);class dA{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}const Za=lA;function pb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Ip,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xi.create("bad-app-name",{appName:String(s)});if(t||(t=cb()),!t)throw xi.create("no-options");const o=ld.get(s);if(o){if(Ss(t,o.options)&&Ss(r,o.config))return o;throw xi.create("duplicate-app",{appName:s})}const l=new vk(s);for(const h of Cp.values())l.addComponent(h);const c=new dA(t,r,l);return ld.set(s,c),c}function gb(n=Ip){const e=ld.get(n);if(!e&&n===Ip&&cb())return pb();if(!e)throw xi.create("no-app",{appName:n});return e}function wi(n,e,t){let r=cA[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(l.join(" "));return}Fa(new wo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const fA="firebase-heartbeat-database",mA=1,Nc="firebase-heartbeat-store";let ep=null;function yb(){return ep||(ep=Nk(fA,mA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nc)}catch(t){console.warn(t)}}}}).catch(n=>{throw xi.create("idb-open",{originalErrorMessage:n.message})})),ep}async function pA(n){try{const t=(await yb()).transaction(Nc),r=await t.objectStore(Nc).get(vb(n));return await t.done,r}catch(e){if(e instanceof Rs)Ts.warn(e.message);else{const t=xi.create("idb-get",{originalErrorMessage:e?.message});Ts.warn(t.message)}}}async function e_(n,e){try{const r=(await yb()).transaction(Nc,"readwrite");await r.objectStore(Nc).put(e,vb(n)),await r.done}catch(t){if(t instanceof Rs)Ts.warn(t.message);else{const r=xi.create("idb-set",{originalErrorMessage:t?.message});Ts.warn(r.message)}}}function vb(n){return`${n.name}!${n.options.appId}`}const gA=1024,yA=30;class vA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=t_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>yA){const s=wA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ts.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=t_(),{heartbeatsToSend:t,unsentEntries:r}=_A(this._heartbeatsCache.heartbeats),s=ad(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ts.warn(e),""}}}function t_(){return new Date().toISOString().substring(0,10)}function _A(n,e=gA){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),n_(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),n_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ok()?ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await pA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return e_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function n_(n){return ad(JSON.stringify({version:2,heartbeats:n})).length}function wA(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function bA(n){Fa(new wo("platform-logger",e=>new jk(e),"PRIVATE")),Fa(new wo("heartbeat",e=>new vA(e),"PRIVATE")),wi(Tp,Jv,n),wi(Tp,Jv,"esm2020"),wi("fire-js","")}bA("");function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EA=_b,xb=new Wc("auth","Firebase",_b());const cd=new ug("@firebase/auth");function SA(n,...e){cd.logLevel<=Le.WARN&&cd.warn(`Auth (${Za}): ${n}`,...e)}function qh(n,...e){cd.logLevel<=Le.ERROR&&cd.error(`Auth (${Za}): ${n}`,...e)}function cr(n,...e){throw fg(n,...e)}function Fr(n,...e){return fg(n,...e)}function wb(n,e,t){const r={...EA(),[e]:t};return new Wc("auth","Firebase",r).create(e,{appName:n.name})}function ws(n){return wb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xb.create(n,...e)}function Se(n,e,...t){if(!n)throw fg(e,...t)}function ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw qh(e),new Error(e)}function Is(n,e){n||ys(e)}function kp(){return typeof self<"u"&&self.location?.href||""}function TA(){return r_()==="http:"||r_()==="https:"}function r_(){return typeof self<"u"&&self.location?.protocol||null}function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TA()||nk()||"connection"in navigator)?navigator.onLine:!0}function CA(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class qc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=ZC()||rk()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mg(n,e){Is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class bb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const kA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const AA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RA=new qc(3e4,6e4);function Ns(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Kr(n,e,t,r,s={}){return Eb(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Hc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return tk()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(f.credentials="include"),bb.fetch()(await Sb(n,n.config.apiHost,t,c),f)})}async function Eb(n,e,t){n._canInitEmulator=!1;const r={...kA,...e};try{const s=new PA(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Sh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Sh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Sh(n,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw wb(n,g,f);cr(n,g)}}catch(s){if(s instanceof Rs)throw s;cr(n,"network-request-failed",{message:String(s)})}}async function Kc(n,e,t,r,s={}){const o=await Kr(n,e,t,r,s);return"mfaPendingCredential"in o&&cr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Sb(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?mg(n.config,s):`${n.config.apiScheme}://${s}`;return AA.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function NA(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),RA.get())})}}function Sh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Fr(n,e,r);return s.customData._tokenResponse=t,s}function s_(n){return n!==void 0&&n.enterprise!==void 0}class DA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jA(n,e){return Kr(n,"GET","/v2/recaptchaConfig",Ns(n,e))}async function MA(n,e){return Kr(n,"POST","/v1/accounts:delete",e)}async function ud(n,e){return Kr(n,"POST","/v1/accounts:lookup",e)}function bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OA(n,e=!1){const t=Mt(n),r=await t.getIdToken(e),s=pg(r);Se(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o?.sign_in_provider;return{claims:s,token:r,authTime:bc(tp(s.auth_time)),issuedAtTime:bc(tp(s.iat)),expirationTime:bc(tp(s.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function tp(n){return Number(n)*1e3}function pg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const s=ab(t);return s?JSON.parse(s):(qh("Failed to decode base64 JWT payload"),null)}catch(s){return qh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function i_(n){const e=pg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ua(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Rs&&LA(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LA({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class VA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ap{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hd(n){const e=n.auth,t=await n.getIdToken(),r=await Ua(n,ud(e,{idToken:t}));Se(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?Tb(s.providerUserInfo):[],l=UA(n.providerData,o),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!l?.length,f=c?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,g)}async function FA(n){const e=Mt(n);await hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UA(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Tb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function zA(n,e){const t=await Eb(n,{},async()=>{const r=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await Sb(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&Ja(n.emulatorConfig.host)&&(h.credentials="include"),bb.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BA(n,e){return Kr(n,"POST","/v2/accounts:revokeToken",Ns(n,e))}class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=i_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await zA(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Na;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Se(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Se(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return ys("not implemented")}}function li(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class or{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new VA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ap(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ua(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OA(this,e)}reload(){return FA(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new or({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(ws(this.auth));const e=await this.getIdToken();return await Ua(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:_,isAnonymous:E,providerData:I,stsTokenManager:T}=t;Se(y&&T,e,"internal-error");const C=Na.fromJSON(this.name,T);Se(typeof y=="string",e,"internal-error"),li(r,e.name),li(s,e.name),Se(typeof _=="boolean",e,"internal-error"),Se(typeof E=="boolean",e,"internal-error"),li(o,e.name),li(l,e.name),li(c,e.name),li(h,e.name),li(f,e.name),li(g,e.name);const V=new or({uid:y,auth:e,email:s,emailVerified:_,displayName:r,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:C,createdAt:f,lastLoginAt:g});return I&&Array.isArray(I)&&(V.providerData=I.map(D=>({...D}))),h&&(V._redirectEventId=h),V}static async _fromIdTokenResponse(e,t,r=!1){const s=new Na;s.updateFromServerResponse(t);const o=new or({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Se(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Tb(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!o?.length,c=new Na;c.updateFromIdToken(r);const h=new or({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ap(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const o_=new Map;function vs(n){Is(n instanceof Function,"Expected a class definition");let e=o_.get(n);return e?(Is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,o_.set(n,e),e)}class Ib{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ib.type="NONE";const a_=Ib;function Kh(n,e,t){return`firebase:${n}:${e}:${t}`}class Pa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Kh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Kh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ud(this.auth,{idToken:e}).catch(()=>{});return t?or._fromGetAccountInfoResponse(this.auth,t,e):null}return or._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Pa(vs(a_),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||vs(a_);const l=Kh(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const g=await f._get(l);if(g){let y;if(typeof g=="string"){const _=await ud(e,{idToken:g}).catch(()=>{});if(!_)break;y=await or._fromGetAccountInfoResponse(e,_,g)}else y=or._fromJSON(e,g);f!==o&&(c=y),o=f;break}}catch{}const h=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Pa(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new Pa(o,e,r))}}function l_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pb(e))return"Blackberry";if(Db(e))return"Webos";if(kb(e))return"Safari";if((e.includes("chrome/")||Ab(e))&&!e.includes("edge/"))return"Chrome";if(Nb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Cb(n=rn()){return/firefox\//i.test(n)}function kb(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ab(n=rn()){return/crios\//i.test(n)}function Rb(n=rn()){return/iemobile/i.test(n)}function Nb(n=rn()){return/android/i.test(n)}function Pb(n=rn()){return/blackberry/i.test(n)}function Db(n=rn()){return/webos/i.test(n)}function gg(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $A(n=rn()){return gg(n)&&!!window.navigator?.standalone}function WA(){return sk()&&document.documentMode===10}function jb(n=rn()){return gg(n)||Nb(n)||Db(n)||Pb(n)||/windows phone/i.test(n)||Rb(n)}function Mb(n,e=[]){let t;switch(n){case"Browser":t=l_(rn());break;case"Worker":t=`${l_(rn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Za}/${r}`}class HA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function qA(n,e={}){return Kr(n,"GET","/v2/passwordPolicy",Ns(n,e))}const KA=6;class GA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class YA{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c_(this),this.idTokenSubscription=new c_(this),this.beforeStateQueue=new HA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ud(this,{idToken:e}),r=await or._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await hd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(ws(this));const t=e?Mt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qA(this),t=new GA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await BA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vs(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Pa.create(this,[vs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Di(n){return Mt(n)}class c_{constructor(e){this.auth=e,this.observer=null,this.addObserver=dk(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $d={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QA(n){$d=n}function Ob(n){return $d.loadJS(n)}function XA(){return $d.recaptchaEnterpriseScript}function JA(){return $d.gapiScript}function ZA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class eR{constructor(){this.enterprise=new tR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nR="recaptcha-enterprise",Lb="NO_RECAPTCHA";class rR{constructor(e){this.type=nR,this.auth=Di(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{jA(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new DA(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;s_(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Lb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new eR().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&s_(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=XA();h.length!==0&&(h+=c),Ob(h).then(()=>{s(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function u_(n,e,t,r=!1,s=!1){const o=new rR(n);let l;if(s)l=Lb;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function dd(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await u_(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await u_(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}function sR(n,e){const t=dg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Ss(o,e??{}))return s;cr(s,"already-initialized")}return t.initialize({options:e})}function iR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oR(n,e,t){const r=Di(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Vb(e),{host:l,port:c}=aR(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(Ss(f,r.config.emulator)&&Ss(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Ja(l)?(hb(`${o}//${l}${h}`),db("Auth",!0)):lR()}function Vb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aR(n){const e=Vb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:h_(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:h_(l)}}}function h_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class yg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,t){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}async function cR(n,e){return Kr(n,"POST","/v1/accounts:signUp",e)}async function uR(n,e){return Kc(n,"POST","/v1/accounts:signInWithPassword",Ns(n,e))}async function hR(n,e){return Kr(n,"POST","/v1/accounts:sendOobCode",Ns(n,e))}async function dR(n,e){return hR(n,e)}async function fR(n,e){return Kc(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}async function mR(n,e){return Kc(n,"POST","/v1/accounts:signInWithEmailLink",Ns(n,e))}class Pc extends yg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dd(e,t,"signInWithPassword",uR);case"emailLink":return fR(e,{email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return dd(e,r,"signUpPassword",cR);case"emailLink":return mR(e,{idToken:t,email:this._email,oobCode:this._password});default:cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Da(n,e){return Kc(n,"POST","/v1/accounts:signInWithIdp",Ns(n,e))}const pR="http://localhost";class bo extends yg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new bo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Da(e,t)}buildRequest(){const e={requestUri:pR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hc(t)}return e}}function gR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yR(n){const e=dc(fc(n)).link,t=e?dc(fc(e)).deep_link_id:null,r=dc(fc(n)).deep_link_id;return(r?dc(fc(r)).link:null)||r||t||e||n}class vg{constructor(e){const t=dc(fc(e)),r=t.apiKey??null,s=t.oobCode??null,o=gR(t.mode??null);Se(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=yR(e);try{return new vg(t)}catch{return null}}}class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,t){return Pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=vg.parseLink(t);return Se(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Fb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Gc extends Fb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ci extends Gc{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";ci.PROVIDER_ID="facebook.com";class ui extends Gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bo._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ui.credential(t,r)}catch{return null}}}ui.GOOGLE_SIGN_IN_METHOD="google.com";ui.PROVIDER_ID="google.com";class hi extends Gc{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";class di extends Gc{constructor(){super("twitter.com")}static credential(e,t){return bo._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return di.credential(t,r)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";async function vR(n,e){return Kc(n,"POST","/v1/accounts:signUp",Ns(n,e))}class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await or._fromIdTokenResponse(e,r,s),l=d_(r);return new Eo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=d_(r);return new Eo({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function d_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class fd extends Rs{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new fd(e,t,r,s)}}function Ub(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?fd._fromErrorAndOperation(n,o,e,r):o})}async function _R(n,e,t=!1){const r=await Ua(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Eo._forOperation(n,"link",r)}async function xR(n,e,t=!1){const{auth:r}=n;if(Hn(r.app))return Promise.reject(ws(r));const s="reauthenticate";try{const o=await Ua(n,Ub(r,s,e,n),t);Se(o.idToken,r,"internal-error");const l=pg(o.idToken);Se(l,r,"internal-error");const{sub:c}=l;return Se(n.uid===c,r,"user-mismatch"),Eo._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&cr(r,"user-mismatch"),o}}async function zb(n,e,t=!1){if(Hn(n.app))return Promise.reject(ws(n));const r="signIn",s=await Ub(n,r,e),o=await Eo._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function wR(n,e){return zb(Di(n),e)}async function Bb(n){const e=Di(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function md(n,e,t){const r=Di(n);await dd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dR)}async function $b(n,e,t){if(Hn(n.app))return Promise.reject(ws(n));const r=Di(n),l=await dd(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vR).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Bb(n),h}),c=await Eo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function bR(n,e,t){return Hn(n.app)?Promise.reject(ws(n)):wR(Mt(n),el.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Bb(n),r})}async function ER(n,e){return Kr(n,"POST","/v1/accounts:update",e)}async function f_(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Mt(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Ua(r,ER(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}function SR(n,e,t,r){return Mt(n).onIdTokenChanged(e,t,r)}function TR(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function IR(n,e,t,r){return Mt(n).onAuthStateChanged(e,t,r)}function _g(n){return Mt(n).signOut()}const pd="__sak";class Wb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(pd,"1"),this.storage.removeItem(pd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const CR=1e3,kR=10;class Hb extends Wb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);WA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kR):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hb.type="LOCAL";const AR=Hb;class qb extends Wb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qb.type="SESSION";const Kb=qb;function RR(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Wd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await RR(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];function xg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class NR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=xg("",20);s.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const _=y;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(_.data.response);break;default:clearTimeout(g),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}function Ur(){return window}function PR(n){Ur().location.href=n}function Gb(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function DR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jR(){return navigator?.serviceWorker?.controller||null}function MR(){return Gb()?self:null}const Yb="firebaseLocalStorageDb",OR=1,gd="firebaseLocalStorage",Qb="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hd(n,e){return n.transaction([gd],e?"readwrite":"readonly").objectStore(gd)}function LR(){const n=indexedDB.deleteDatabase(Yb);return new Yc(n).toPromise()}function Rp(){const n=indexedDB.open(Yb,OR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(gd,{keyPath:Qb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(gd)?e(r):(r.close(),await LR(),e(await Rp()))})})}async function m_(n,e,t){const r=Hd(n,!0).put({[Qb]:e,value:t});return new Yc(r).toPromise()}async function VR(n,e){const t=Hd(n,!1).get(e),r=await new Yc(t).toPromise();return r===void 0?null:r.value}function p_(n,e){const t=Hd(n,!0).delete(e);return new Yc(t).toPromise()}const FR=800,UR=3;class Xb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(MR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DR(),!this.activeServiceWorker)return;this.sender=new NR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rp();return await m_(e,pd,"1"),await p_(e,pd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>m_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>p_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Hd(s,!1).getAll();return new Yc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xb.type="LOCAL";const zR=Xb;new qc(3e4,6e4);function BR(n,e){return e?vs(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class wg extends yg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $R(n){return zb(n.auth,new wg(n),n.bypassAuthState)}function WR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),xR(t,new wg(n),n.bypassAuthState)}async function HR(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),_R(t,new wg(n),n.bypassAuthState)}class Jb{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $R;case"linkViaPopup":case"linkViaRedirect":return HR;case"reauthViaPopup":case"reauthViaRedirect":return WR;default:cr(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qR=new qc(2e3,1e4);class Ra extends Jb{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ra.currentPopupAction&&Ra.currentPopupAction.cancel(),Ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qR.get())};e()}}Ra.currentPopupAction=null;const KR="pendingRedirect",Gh=new Map;class GR extends Jb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const r=await YR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YR(n,e){const t=JR(e),r=XR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function QR(n,e){Gh.set(n._key(),e)}function XR(n){return vs(n._redirectPersistence)}function JR(n){return Kh(KR,n.config.apiKey,n.name)}async function ZR(n,e,t=!1){if(Hn(n.app))return Promise.reject(ws(n));const r=Di(n),s=BR(r,e),l=await new GR(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}const eN=600*1e3;class tN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zb(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eN&&this.cachedEventUids.clear(),this.cachedEventUids.has(g_(e))}saveEventToCache(e){this.cachedEventUids.add(g_(e)),this.lastProcessedEventTime=Date.now()}}function g_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Zb({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zb(n);default:return!1}}async function rN(n,e={}){return Kr(n,"GET","/v1/projects",e)}const sN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iN=/^https?/;async function oN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rN(n);for(const t of e)try{if(aN(t))return}catch{}cr(n,"unauthorized-domain")}function aN(n){const e=kp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!iN.test(t))return!1;if(sN.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const lN=new qc(3e4,6e4);function y_(){const n=Ur().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cN(n){return new Promise((e,t)=>{function r(){y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y_(),t(Fr(n,"network-request-failed"))},timeout:lN.get()})}if(Ur().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ur().gapi?.load)r();else{const s=ZA("iframefcb");return Ur()[s]=()=>{gapi.load?r():t(Fr(n,"network-request-failed"))},Ob(`${JA()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function uN(n){return Yh=Yh||cN(n),Yh}const hN=new qc(5e3,15e3),dN="__/auth/iframe",fN="emulator/auth/iframe",mN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gN(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?mg(e,fN):`https://${n.config.authDomain}/${dN}`,r={apiKey:e.apiKey,appName:n.name,v:Za},s=pN.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Hc(r).slice(1)}`}async function yN(n){const e=await uN(n),t=Ur().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:gN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mN,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Fr(n,"network-request-failed"),c=Ur().setTimeout(()=>{o(l)},hN.get());function h(){Ur().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}const vN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,xN=600,wN="_blank",bN="http://localhost";class v_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(n,e,t,r=_N,s=xN){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...vN,width:r.toString(),height:s.toString(),top:o,left:l},f=rn().toLowerCase();t&&(c=Ab(f)?wN:t),Cb(f)&&(e=e||bN,h.scrollbars="yes");const g=Object.entries(h).reduce((_,[E,I])=>`${_}${E}=${I},`,"");if($A(f)&&c!=="_self")return SN(e||"",c),new v_(null);const y=window.open(e||"",c,g);Se(y,n,"popup-blocked");try{y.focus()}catch{}return new v_(y)}function SN(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const TN="__/auth/handler",IN="emulator/auth/handler",CN=encodeURIComponent("fac");async function __(n,e,t,r,s,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Za,eventId:s};if(e instanceof Fb){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",hk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof Gc){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const h=await n._getAppCheckToken(),f=h?`#${CN}=${encodeURIComponent(h)}`:"";return`${kN(n)}?${Hc(c).slice(1)}${f}`}function kN({config:n}){return n.emulator?mg(n,IN):`https://${n.authDomain}/${TN}`}const np="webStorageSupport";class AN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kb,this._completeRedirectFn=ZR,this._overrideRedirectResult=QR}async _openPopup(e,t,r,s){Is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await __(e,t,r,kp(),s);return EN(e,o,xg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await __(e,t,r,kp(),s);return PR(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Is(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await yN(e),r=new tN(e);return t.register("authEvent",s=>(Se(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},s=>{const o=s?.[0]?.[np];o!==void 0&&t(!!o),cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jb()||kb()||gg()}}const RN=AN;var x_="@firebase/auth",w_="1.12.0";class NN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function PN(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DN(n){Fa(new wo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mb(n)},f=new YA(r,s,o,h);return iR(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fa(new wo("auth-internal",e=>{const t=Di(e.getProvider("auth").getImmediate());return(r=>new NN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(x_,w_,PN(n)),wi(x_,w_,"esm2020")}const jN=300,MN=ub("authIdTokenMaxAge")||jN;let b_=null;const ON=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MN)return;const s=t?.token;b_!==s&&(b_=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eE(n=gb()){const e=dg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sR(n,{popupRedirectResolver:RN,persistence:[zR,AR,Kb]}),r=ub("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=ON(o.toString());TR(t,l,()=>l(t.currentUser)),SR(t,c=>l(c))}}const s=lb("auth");return s&&oR(t,`http://${s}`),t}function LN(){return document.getElementsByTagName("head")?.[0]??document}QA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Fr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",LN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DN("Browser");var VN="firebase",FN="12.9.0";wi(VN,FN,"app");var E_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bi,tE;(function(){var n;function e(A,k){function P(){}P.prototype=k.prototype,A.F=k.prototype,A.prototype=new P,A.prototype.constructor=A,A.D=function(F,L,B){for(var j=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)j[Ce-2]=arguments[Ce];return k.prototype[L].apply(F,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,k,P){P||(P=0);const F=Array(16);if(typeof k=="string")for(var L=0;L<16;++L)F[L]=k.charCodeAt(P++)|k.charCodeAt(P++)<<8|k.charCodeAt(P++)<<16|k.charCodeAt(P++)<<24;else for(L=0;L<16;++L)F[L]=k[P++]|k[P++]<<8|k[P++]<<16|k[P++]<<24;k=A.g[0],P=A.g[1],L=A.g[2];let B=A.g[3],j;j=k+(B^P&(L^B))+F[0]+3614090360&4294967295,k=P+(j<<7&4294967295|j>>>25),j=B+(L^k&(P^L))+F[1]+3905402710&4294967295,B=k+(j<<12&4294967295|j>>>20),j=L+(P^B&(k^P))+F[2]+606105819&4294967295,L=B+(j<<17&4294967295|j>>>15),j=P+(k^L&(B^k))+F[3]+3250441966&4294967295,P=L+(j<<22&4294967295|j>>>10),j=k+(B^P&(L^B))+F[4]+4118548399&4294967295,k=P+(j<<7&4294967295|j>>>25),j=B+(L^k&(P^L))+F[5]+1200080426&4294967295,B=k+(j<<12&4294967295|j>>>20),j=L+(P^B&(k^P))+F[6]+2821735955&4294967295,L=B+(j<<17&4294967295|j>>>15),j=P+(k^L&(B^k))+F[7]+4249261313&4294967295,P=L+(j<<22&4294967295|j>>>10),j=k+(B^P&(L^B))+F[8]+1770035416&4294967295,k=P+(j<<7&4294967295|j>>>25),j=B+(L^k&(P^L))+F[9]+2336552879&4294967295,B=k+(j<<12&4294967295|j>>>20),j=L+(P^B&(k^P))+F[10]+4294925233&4294967295,L=B+(j<<17&4294967295|j>>>15),j=P+(k^L&(B^k))+F[11]+2304563134&4294967295,P=L+(j<<22&4294967295|j>>>10),j=k+(B^P&(L^B))+F[12]+1804603682&4294967295,k=P+(j<<7&4294967295|j>>>25),j=B+(L^k&(P^L))+F[13]+4254626195&4294967295,B=k+(j<<12&4294967295|j>>>20),j=L+(P^B&(k^P))+F[14]+2792965006&4294967295,L=B+(j<<17&4294967295|j>>>15),j=P+(k^L&(B^k))+F[15]+1236535329&4294967295,P=L+(j<<22&4294967295|j>>>10),j=k+(L^B&(P^L))+F[1]+4129170786&4294967295,k=P+(j<<5&4294967295|j>>>27),j=B+(P^L&(k^P))+F[6]+3225465664&4294967295,B=k+(j<<9&4294967295|j>>>23),j=L+(k^P&(B^k))+F[11]+643717713&4294967295,L=B+(j<<14&4294967295|j>>>18),j=P+(B^k&(L^B))+F[0]+3921069994&4294967295,P=L+(j<<20&4294967295|j>>>12),j=k+(L^B&(P^L))+F[5]+3593408605&4294967295,k=P+(j<<5&4294967295|j>>>27),j=B+(P^L&(k^P))+F[10]+38016083&4294967295,B=k+(j<<9&4294967295|j>>>23),j=L+(k^P&(B^k))+F[15]+3634488961&4294967295,L=B+(j<<14&4294967295|j>>>18),j=P+(B^k&(L^B))+F[4]+3889429448&4294967295,P=L+(j<<20&4294967295|j>>>12),j=k+(L^B&(P^L))+F[9]+568446438&4294967295,k=P+(j<<5&4294967295|j>>>27),j=B+(P^L&(k^P))+F[14]+3275163606&4294967295,B=k+(j<<9&4294967295|j>>>23),j=L+(k^P&(B^k))+F[3]+4107603335&4294967295,L=B+(j<<14&4294967295|j>>>18),j=P+(B^k&(L^B))+F[8]+1163531501&4294967295,P=L+(j<<20&4294967295|j>>>12),j=k+(L^B&(P^L))+F[13]+2850285829&4294967295,k=P+(j<<5&4294967295|j>>>27),j=B+(P^L&(k^P))+F[2]+4243563512&4294967295,B=k+(j<<9&4294967295|j>>>23),j=L+(k^P&(B^k))+F[7]+1735328473&4294967295,L=B+(j<<14&4294967295|j>>>18),j=P+(B^k&(L^B))+F[12]+2368359562&4294967295,P=L+(j<<20&4294967295|j>>>12),j=k+(P^L^B)+F[5]+4294588738&4294967295,k=P+(j<<4&4294967295|j>>>28),j=B+(k^P^L)+F[8]+2272392833&4294967295,B=k+(j<<11&4294967295|j>>>21),j=L+(B^k^P)+F[11]+1839030562&4294967295,L=B+(j<<16&4294967295|j>>>16),j=P+(L^B^k)+F[14]+4259657740&4294967295,P=L+(j<<23&4294967295|j>>>9),j=k+(P^L^B)+F[1]+2763975236&4294967295,k=P+(j<<4&4294967295|j>>>28),j=B+(k^P^L)+F[4]+1272893353&4294967295,B=k+(j<<11&4294967295|j>>>21),j=L+(B^k^P)+F[7]+4139469664&4294967295,L=B+(j<<16&4294967295|j>>>16),j=P+(L^B^k)+F[10]+3200236656&4294967295,P=L+(j<<23&4294967295|j>>>9),j=k+(P^L^B)+F[13]+681279174&4294967295,k=P+(j<<4&4294967295|j>>>28),j=B+(k^P^L)+F[0]+3936430074&4294967295,B=k+(j<<11&4294967295|j>>>21),j=L+(B^k^P)+F[3]+3572445317&4294967295,L=B+(j<<16&4294967295|j>>>16),j=P+(L^B^k)+F[6]+76029189&4294967295,P=L+(j<<23&4294967295|j>>>9),j=k+(P^L^B)+F[9]+3654602809&4294967295,k=P+(j<<4&4294967295|j>>>28),j=B+(k^P^L)+F[12]+3873151461&4294967295,B=k+(j<<11&4294967295|j>>>21),j=L+(B^k^P)+F[15]+530742520&4294967295,L=B+(j<<16&4294967295|j>>>16),j=P+(L^B^k)+F[2]+3299628645&4294967295,P=L+(j<<23&4294967295|j>>>9),j=k+(L^(P|~B))+F[0]+4096336452&4294967295,k=P+(j<<6&4294967295|j>>>26),j=B+(P^(k|~L))+F[7]+1126891415&4294967295,B=k+(j<<10&4294967295|j>>>22),j=L+(k^(B|~P))+F[14]+2878612391&4294967295,L=B+(j<<15&4294967295|j>>>17),j=P+(B^(L|~k))+F[5]+4237533241&4294967295,P=L+(j<<21&4294967295|j>>>11),j=k+(L^(P|~B))+F[12]+1700485571&4294967295,k=P+(j<<6&4294967295|j>>>26),j=B+(P^(k|~L))+F[3]+2399980690&4294967295,B=k+(j<<10&4294967295|j>>>22),j=L+(k^(B|~P))+F[10]+4293915773&4294967295,L=B+(j<<15&4294967295|j>>>17),j=P+(B^(L|~k))+F[1]+2240044497&4294967295,P=L+(j<<21&4294967295|j>>>11),j=k+(L^(P|~B))+F[8]+1873313359&4294967295,k=P+(j<<6&4294967295|j>>>26),j=B+(P^(k|~L))+F[15]+4264355552&4294967295,B=k+(j<<10&4294967295|j>>>22),j=L+(k^(B|~P))+F[6]+2734768916&4294967295,L=B+(j<<15&4294967295|j>>>17),j=P+(B^(L|~k))+F[13]+1309151649&4294967295,P=L+(j<<21&4294967295|j>>>11),j=k+(L^(P|~B))+F[4]+4149444226&4294967295,k=P+(j<<6&4294967295|j>>>26),j=B+(P^(k|~L))+F[11]+3174756917&4294967295,B=k+(j<<10&4294967295|j>>>22),j=L+(k^(B|~P))+F[2]+718787259&4294967295,L=B+(j<<15&4294967295|j>>>17),j=P+(B^(L|~k))+F[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(L+(j<<21&4294967295|j>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+B&4294967295}r.prototype.v=function(A,k){k===void 0&&(k=A.length);const P=k-this.blockSize,F=this.C;let L=this.h,B=0;for(;B<k;){if(L==0)for(;B<=P;)s(this,A,B),B+=this.blockSize;if(typeof A=="string"){for(;B<k;)if(F[L++]=A.charCodeAt(B++),L==this.blockSize){s(this,F),L=0;break}}else for(;B<k;)if(F[L++]=A[B++],L==this.blockSize){s(this,F),L=0;break}}this.h=L,this.o+=k},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;k=this.o*8;for(var P=A.length-8;P<A.length;++P)A[P]=k&255,k/=256;for(this.v(A),A=Array(16),k=0,P=0;P<4;++P)for(let F=0;F<32;F+=8)A[k++]=this.g[P]>>>F&255;return A};function o(A,k){var P=c;return Object.prototype.hasOwnProperty.call(P,A)?P[A]:P[A]=k(A)}function l(A,k){this.h=k;const P=[];let F=!0;for(let L=A.length-1;L>=0;L--){const B=A[L]|0;F&&B==k||(P[L]=B,F=!1)}this.g=P}var c={};function h(A){return-128<=A&&A<128?o(A,function(k){return new l([k|0],k<0?-1:0)}):new l([A|0],A<0?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return y;if(A<0)return C(f(-A));const k=[];let P=1;for(let F=0;A>=P;F++)k[F]=A/P|0,P*=4294967296;return new l(k,0)}function g(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return C(g(A.substring(1),k));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=f(Math.pow(k,8));let F=y;for(let B=0;B<A.length;B+=8){var L=Math.min(8,A.length-B);const j=parseInt(A.substring(B,B+L),k);L<8?(L=f(Math.pow(k,L)),F=F.j(L).add(f(j))):(F=F.j(P),F=F.add(f(j)))}return F}var y=h(0),_=h(1),E=h(16777216);n=l.prototype,n.m=function(){if(T(this))return-C(this).m();let A=0,k=1;for(let P=0;P<this.g.length;P++){const F=this.i(P);A+=(F>=0?F:4294967296+F)*k,k*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I(this))return"0";if(T(this))return"-"+C(this).toString(A);const k=f(Math.pow(A,6));var P=this;let F="";for(;;){const L=H(P,k).g;P=V(P,L.j(k));let B=((P.g.length>0?P.g[0]:P.h)>>>0).toString(A);if(P=L,I(P))return B+F;for(;B.length<6;)B="0"+B;F=B+F}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function I(A){if(A.h!=0)return!1;for(let k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=V(this,A),T(A)?-1:I(A)?0:1};function C(A){const k=A.g.length,P=[];for(let F=0;F<k;F++)P[F]=~A.g[F];return new l(P,~A.h).add(_)}n.abs=function(){return T(this)?C(this):this},n.add=function(A){const k=Math.max(this.g.length,A.g.length),P=[];let F=0;for(let L=0;L<=k;L++){let B=F+(this.i(L)&65535)+(A.i(L)&65535),j=(B>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);F=j>>>16,B&=65535,j&=65535,P[L]=j<<16|B}return new l(P,P[P.length-1]&-2147483648?-1:0)};function V(A,k){return A.add(C(k))}n.j=function(A){if(I(this)||I(A))return y;if(T(this))return T(A)?C(this).j(C(A)):C(C(this).j(A));if(T(A))return C(this.j(C(A)));if(this.l(E)<0&&A.l(E)<0)return f(this.m()*A.m());const k=this.g.length+A.g.length,P=[];for(var F=0;F<2*k;F++)P[F]=0;for(F=0;F<this.g.length;F++)for(let L=0;L<A.g.length;L++){const B=this.i(F)>>>16,j=this.i(F)&65535,Ce=A.i(L)>>>16,oe=A.i(L)&65535;P[2*F+2*L]+=j*oe,D(P,2*F+2*L),P[2*F+2*L+1]+=B*oe,D(P,2*F+2*L+1),P[2*F+2*L+1]+=j*Ce,D(P,2*F+2*L+1),P[2*F+2*L+2]+=B*Ce,D(P,2*F+2*L+2)}for(A=0;A<k;A++)P[A]=P[2*A+1]<<16|P[2*A];for(A=k;A<2*k;A++)P[A]=0;return new l(P,0)};function D(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function U(A,k){this.g=A,this.h=k}function H(A,k){if(I(k))throw Error("division by zero");if(I(A))return new U(y,y);if(T(A))return k=H(C(A),k),new U(C(k.g),C(k.h));if(T(k))return k=H(A,C(k)),new U(C(k.g),k.h);if(A.g.length>30){if(T(A)||T(k))throw Error("slowDivide_ only works with positive integers.");for(var P=_,F=k;F.l(A)<=0;)P=O(P),F=O(F);var L=q(P,1),B=q(F,1);for(F=q(F,2),P=q(P,2);!I(F);){var j=B.add(F);j.l(A)<=0&&(L=L.add(P),B=j),F=q(F,1),P=q(P,1)}return k=V(A,L.j(k)),new U(L,k)}for(L=y;A.l(k)>=0;){for(P=Math.max(1,Math.floor(A.m()/k.m())),F=Math.ceil(Math.log(P)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),B=f(P),j=B.j(k);T(j)||j.l(A)>0;)P-=F,B=f(P),j=B.j(k);I(B)&&(B=_),L=L.add(B),A=V(A,j)}return new U(L,A)}n.B=function(A){return H(this,A).h},n.and=function(A){const k=Math.max(this.g.length,A.g.length),P=[];for(let F=0;F<k;F++)P[F]=this.i(F)&A.i(F);return new l(P,this.h&A.h)},n.or=function(A){const k=Math.max(this.g.length,A.g.length),P=[];for(let F=0;F<k;F++)P[F]=this.i(F)|A.i(F);return new l(P,this.h|A.h)},n.xor=function(A){const k=Math.max(this.g.length,A.g.length),P=[];for(let F=0;F<k;F++)P[F]=this.i(F)^A.i(F);return new l(P,this.h^A.h)};function O(A){const k=A.g.length+1,P=[];for(let F=0;F<k;F++)P[F]=A.i(F)<<1|A.i(F-1)>>>31;return new l(P,A.h)}function q(A,k){const P=k>>5;k%=32;const F=A.g.length-P,L=[];for(let B=0;B<F;B++)L[B]=k>0?A.i(B+P)>>>k|A.i(B+P+1)<<32-k:A.i(B+P);return new l(L,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,tE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,bi=l}).apply(typeof E_<"u"?E_:typeof self<"u"?self:typeof window<"u"?window:{});var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var nE,mc,rE,Qh,Np,sE,iE,oE;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var w=0;w<d.length;++w){var b=d[w];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=t(this);function s(d,w){if(w)e:{var b=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var G=d[R];if(!(G in b))break e;b=b[G]}d=d[d.length-1],R=b[d],w=w(R),w!=R&&w!=null&&e(b,d,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(w){var b=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&b.push([R,w[R]]);return b}});var o=o||{},l=this||self;function c(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function h(d,w,b){return d.call.apply(d.bind,arguments)}function f(d,w,b){return f=h,f.apply(null,arguments)}function g(d,w){var b=Array.prototype.slice.call(arguments,1);return function(){var R=b.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function y(d,w){function b(){}b.prototype=w.prototype,d.Z=w.prototype,d.prototype=new b,d.prototype.constructor=d,d.Ob=function(R,G,X){for(var ue=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ue[Ae-2]=arguments[Ae];return w.prototype[G].apply(R,ue)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function E(d){const w=d.length;if(w>0){const b=Array(w);for(let R=0;R<w;R++)b[R]=d[R];return b}return[]}function I(d,w){for(let R=1;R<arguments.length;R++){const G=arguments[R];var b=typeof G;if(b=b!="object"?b:G?Array.isArray(G)?"array":b:"null",b=="array"||b=="object"&&typeof G.length=="number"){b=d.length||0;const X=G.length||0;d.length=b+X;for(let ue=0;ue<X;ue++)d[b+ue]=G[ue]}else d.push(G)}}class T{constructor(w,b){this.i=w,this.j=b,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function C(d){l.setTimeout(()=>{throw d},0)}function V(){var d=A;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class D{constructor(){this.h=this.g=null}add(w,b){const R=U.get();R.set(w,b),this.h?this.h.next=R:this.g=R,this.h=R}}var U=new T(()=>new H,d=>d.reset());class H{constructor(){this.next=this.g=this.h=null}set(w,b){this.h=w,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let O,q=!1,A=new D,k=()=>{const d=Promise.resolve(void 0);O=()=>{d.then(P)}};function P(){for(var d;d=V();){try{d.h.call(d.g)}catch(b){C(b)}var w=U;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}q=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};l.addEventListener("test",b,w),l.removeEventListener("test",b,w)}catch{}return d})();function j(d){return/^[\s\xa0]*$/.test(d)}function Ce(d,w){L.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}y(Ce,L),Ce.prototype.init=function(d,w){const b=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget,w||(b=="mouseover"?w=d.fromElement:b=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ce.Z.h.call(this)},Ce.prototype.h=function(){Ce.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),J=0;function ae(d,w,b,R,G){this.listener=d,this.proxy=null,this.src=w,this.type=b,this.capture=!!R,this.ha=G,this.key=++J,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ce(d,w,b){for(const R in d)w.call(b,d[R],R,d)}function z(d,w){for(const b in d)w.call(void 0,d[b],b,d)}function te(d){const w={};for(const b in d)w[b]=d[b];return w}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(d,w){let b,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(b in R)d[b]=R[b];for(let X=0;X<pe.length;X++)b=pe[X],Object.prototype.hasOwnProperty.call(R,b)&&(d[b]=R[b])}}function Ee(d){this.src=d,this.g={},this.h=0}Ee.prototype.add=function(d,w,b,R,G){const X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);const ue=Pe(d,w,R,G);return ue>-1?(w=d[ue],b||(w.fa=!1)):(w=new ae(w,this.src,X,!!R,G),w.fa=b,d.push(w)),w};function Oe(d,w){const b=w.type;if(b in d.g){var R=d.g[b],G=Array.prototype.indexOf.call(R,w,void 0),X;(X=G>=0)&&Array.prototype.splice.call(R,G,1),X&&(ee(w),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Pe(d,w,b,R){for(let G=0;G<d.length;++G){const X=d[G];if(!X.da&&X.listener==w&&X.capture==!!b&&X.ha==R)return G}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),ze={};function zt(d,w,b,R,G){if(Array.isArray(w)){for(let X=0;X<w.length;X++)zt(d,w[X],b,R,G);return null}return b=hl(b),d&&d[oe]?d.J(w,b,c(R)?!!R.capture:!1,G):vf(d,w,b,!1,R,G)}function vf(d,w,b,R,G,X){if(!w)throw Error("Invalid event type");const ue=c(G)?!!G.capture:!!G;let Ae=Lo(d);if(Ae||(d[Ke]=Ae=new Ee(d)),b=Ae.add(w,b,R,ue,X),b.proxy)return b;if(R=Mo(),b.proxy=R,R.src=d,R.listener=b,d.addEventListener)B||(G=ue),G===void 0&&(G=!1),d.addEventListener(w.toString(),R,G);else if(d.attachEvent)d.attachEvent(Oo(w.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Mo(){function d(b){return w.call(d.src,d.listener,b)}const w=au;return d}function ul(d,w,b,R,G){if(Array.isArray(w))for(var X=0;X<w.length;X++)ul(d,w[X],b,R,G);else R=c(R)?!!R.capture:!!R,b=hl(b),d&&d[oe]?(d=d.i,X=String(w).toString(),X in d.g&&(w=d.g[X],b=Pe(w,b,R,G),b>-1&&(ee(w[b]),Array.prototype.splice.call(w,b,1),w.length==0&&(delete d.g[X],d.h--)))):d&&(d=Lo(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Pe(w,b,R,G)),(b=d>-1?w[d]:null)&&Ps(b))}function Ps(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[oe])Oe(w.i,d);else{var b=d.type,R=d.proxy;w.removeEventListener?w.removeEventListener(b,R,d.capture):w.detachEvent?w.detachEvent(Oo(b),R):w.addListener&&w.removeListener&&w.removeListener(R),(b=Lo(w))?(Oe(b,d),b.h==0&&(b.src=null,w[Ke]=null)):ee(d)}}}function Oo(d){return d in ze?ze[d]:ze[d]="on"+d}function au(d,w){if(d.da)d=!0;else{w=new Ce(w,this);const b=d.listener,R=d.ha||d.src;d.fa&&Ps(d),d=b.call(R,w)}return d}function Lo(d){return d=d[Ke],d instanceof Ee?d:null}var Vi="__closure_events_fn_"+(Math.random()*1e9>>>0);function hl(d){return typeof d=="function"?d:(d[Vi]||(d[Vi]=function(w){return d.handleEvent(w)}),d[Vi])}function Et(){F.call(this),this.i=new Ee(this),this.M=this,this.G=null}y(Et,F),Et.prototype[oe]=!0,Et.prototype.removeEventListener=function(d,w,b,R){ul(this,d,w,b,R)};function yt(d,w){var b,R=d.G;if(R)for(b=[];R;R=R.G)b.push(R);if(d=d.M,R=w.type||w,typeof w=="string")w=new L(w,d);else if(w instanceof L)w.target=w.target||d;else{var G=w;w=new L(R,d),Ne(w,G)}G=!0;let X,ue;if(b)for(ue=b.length-1;ue>=0;ue--)X=w.g=b[ue],G=Qn(X,R,!0,w)&&G;if(X=w.g=d,G=Qn(X,R,!0,w)&&G,G=Qn(X,R,!1,w)&&G,b)for(ue=0;ue<b.length;ue++)X=w.g=b[ue],G=Qn(X,R,!1,w)&&G}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const b=d.g[w];for(let R=0;R<b.length;R++)ee(b[R]);delete d.g[w],d.h--}}this.G=null},Et.prototype.J=function(d,w,b,R){return this.i.add(String(d),w,!1,b,R)},Et.prototype.K=function(d,w,b,R){return this.i.add(String(d),w,!0,b,R)};function Qn(d,w,b,R){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();let G=!0;for(let X=0;X<w.length;++X){const ue=w[X];if(ue&&!ue.da&&ue.capture==b){const Ae=ue.listener,vt=ue.ha||ue.src;ue.fa&&Oe(d.i,ue),G=Ae.call(vt,R)!==!1&&G}}return G&&!R.defaultPrevented}function dl(d,w){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(d,w||0)}function fl(d){d.g=dl(()=>{d.g=null,d.i&&(d.i=!1,fl(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class lu extends F{constructor(w,b){super(),this.m=w,this.l=b,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:fl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ds(d){F.call(this),this.h=d,this.g={}}y(Ds,F);var ml=[];function Vo(d){ce(d.g,function(w,b){this.g.hasOwnProperty(b)&&Ps(w)},d),d.g={}}Ds.prototype.N=function(){Ds.Z.N.call(this),Vo(this)},Ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var js=l.JSON.stringify,cu=l.JSON.parse,Fi=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ms(){}function uu(){}var Os={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Fo(){L.call(this,"d")}y(Fo,L);function pl(){L.call(this,"c")}y(pl,L);var Xn={},Uo=null;function Ls(){return Uo=Uo||new Et}Xn.Ia="serverreachability";function zo(d){L.call(this,Xn.Ia,d)}y(zo,L);function Gr(d){const w=Ls();yt(w,new zo(w))}Xn.STAT_EVENT="statevent";function Yr(d,w){L.call(this,Xn.STAT_EVENT,d),this.stat=w}y(Yr,L);function pt(d){const w=Ls();yt(w,new Yr(w,d))}Xn.Ja="timingevent";function gl(d,w){L.call(this,Xn.Ja,d),this.size=w}y(gl,L);function Vs(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},w)}function Fs(){this.g=!0}Fs.prototype.ua=function(){this.g=!1};function hu(d,w,b,R,G,X){d.info(function(){if(d.g)if(X){var ue="",Ae=X.split("&");for(let Qe=0;Qe<Ae.length;Qe++){var vt=Ae[Qe].split("=");if(vt.length>1){const St=vt[0];vt=vt[1];const Cn=St.split("_");ue=Cn.length>=2&&Cn[1]=="type"?ue+(St+"="+vt+"&"):ue+(St+"=redacted&")}}}else ue=null;else ue=X;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+w+`
`+b+`
`+ue})}function du(d,w,b,R,G,X,ue){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+w+`
`+b+`
`+X+" "+ue})}function mr(d,w,b,R){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ui(d,b)+(R?" "+R:"")})}function fu(d,w){d.info(function(){return"TIMEOUT: "+w})}Fs.prototype.info=function(){};function Ui(d,w){if(!d.g)return w;if(!w)return null;try{const X=JSON.parse(w);if(X){for(d=0;d<X.length;d++)if(Array.isArray(X[d])){var b=X[d];if(!(b.length<2)){var R=b[1];if(Array.isArray(R)&&!(R.length<1)){var G=R[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ue=1;ue<R.length;ue++)R[ue]=""}}}}return js(X)}catch{return w}}var Us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mu;function Qr(){}y(Qr,Ms),Qr.prototype.g=function(){return new XMLHttpRequest},mu=new Qr;function pr(d){return encodeURIComponent(String(d))}function Bo(d){var w=1;d=d.split(":");const b=[];for(;w>0&&d.length;)b.push(d.shift()),w--;return d.length&&b.push(d.join(":")),b}function On(d,w,b,R){this.j=d,this.i=w,this.l=b,this.S=R||1,this.V=new Ds(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pu}function pu(){this.i=null,this.g="",this.h=!1}var gu={},yl={};function Jn(d,w,b){d.M=1,d.A=Jr(Ln(w)),d.u=b,d.R=!0,vl(d,null)}function vl(d,w){d.F=Date.now(),zi(d),d.B=Ln(d.A);var b=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),kl(b.i,"t",R),d.C=0,b=d.j.L,d.h=new pu,d.g=Iu(d.j,b?w:null,!d.u),d.P>0&&(d.O=new lu(f(d.Y,d,d.g),d.P)),w=d.V,b=d.g,R=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(ml[0]=G.toString()),G=ml);for(let X=0;X<G.length;X++){const ue=zt(b,G[X],R||w.handleEvent,!1,w.h||w);if(!ue)break;w.g[ue.key]=ue}w=d.J?te(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),Gr(),hu(d.i,d.v,d.B,d.l,d.S,d.u)}On.prototype.ba=function(d){d=d.target;const w=this.O;w&&br(d)==3?w.j():this.Y(d)},On.prototype.Y=function(d){try{if(d==this.g)e:{const Ae=br(this.g),vt=this.g.ya(),Qe=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Su(this.g)))){this.K||Ae!=4||vt==7||(vt==8||Qe<=0?Gr(3):Gr(2)),$o(this);var w=this.g.ca();this.X=w;var b=yu(this);if(this.o=w==200,du(this.i,this.v,this.B,this.l,this.S,Ae,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(R)){var X=R;break t}}X=null}if(d=X)mr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,nt(this,d);else{this.o=!1,this.m=3,pt(12),Xr(this),Bi(this);break e}}if(this.R){d=!0;let St;for(;!this.K&&this.C<b.length;)if(St=_u(this,b),St==yl){Ae==4&&(this.m=4,pt(14),d=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(St==gu){this.m=4,pt(15),mr(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else mr(this.i,this.l,St,null),nt(this,St);if(vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||b.length!=0||this.h.h||(this.m=1,pt(16),d=!1),this.o=this.o&&d,!d)mr(this.i,this.l,b,"[Invalid Chunked Response]"),Xr(this),Bi(this);else if(b.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Xi(ue),ue.P=!0,pt(11))}}else mr(this.i,this.l,b,null),nt(this,b);Ae==4&&Xr(this),this.o&&!this.K&&(Ae==4?Zo(this.j,this):(this.o=!1,zi(this)))}else Rl(this.g),w==400&&b.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),Xr(this),Bi(this)}}}catch{}};function yu(d){if(!vu(d))return d.g.la();const w=Su(d.g);if(w==="")return"";let b="";const R=w.length,G=br(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Xr(d),Bi(d),"";d.h.i=new l.TextDecoder}for(let X=0;X<R;X++)d.h.h=!0,b+=d.h.i.decode(w[X],{stream:!(G&&X==R-1)});return w.length=0,d.h.g+=b,d.C=0,d.h.g}function vu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function _u(d,w){var b=d.C,R=w.indexOf(`
`,b);return R==-1?yl:(b=Number(w.substring(b,R)),isNaN(b)?gu:(R+=1,R+b>w.length?yl:(w=w.slice(R,R+b),d.C=R+b,w)))}On.prototype.cancel=function(){this.K=!0,Xr(this)};function zi(d){d.T=Date.now()+d.H,_l(d,d.H)}function _l(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Vs(f(d.aa,d),w)}function $o(d){d.D&&(l.clearTimeout(d.D),d.D=null)}On.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(fu(this.i,this.B),this.M!=2&&(Gr(),pt(17)),Xr(this),this.m=2,Bi(this)):_l(this,this.T-d)};function Bi(d){d.j.I==0||d.K||Zo(d.j,d)}function Xr(d){$o(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,Vo(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function nt(d,w){try{var b=d.j;if(b.I!=0&&(b.g==d||wl(b.h,d))){if(!d.L&&wl(b.h,d)&&b.I==3){try{var R=b.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<d.F)Jo(b),Tn(b);else break e;Tr(b),pt(18)}}else b.xa=G[1],0<b.xa-b.K&&G[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Vs(f(b.Va,b),6e3));$i(b.h)<=1&&b.ta&&(b.ta=void 0)}else In(b,11)}else if((d.L||b.g==d)&&Jo(b),!j(w))for(G=b.Ba.g.parse(w),w=0;w<G.length;w++){let Qe=G[w];const St=Qe[0];if(!(St<=b.K))if(b.K=St,Qe=Qe[1],b.I==2)if(Qe[0]=="c"){b.M=Qe[1],b.ba=Qe[2];const Cn=Qe[3];Cn!=null&&(b.ka=Cn,b.j.info("VER="+b.ka));const rs=Qe[4];rs!=null&&(b.za=rs,b.j.info("SVER="+b.za));const Ir=Qe[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(R=1.5*Ir,b.O=R,b.j.info("backChannelRequestTimeoutMs_="+R)),R=b;const Cr=d.g;if(Cr){const na=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var X=R.h;X.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ho(X,X.h),X.h=null))}if(R.G){const Dl=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(R.wa=Dl,Ge(R.J,R.G,Dl))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-d.F,b.j.info("Handshake RTT: "+b.T+"ms")),R=b;var ue=d;if(R.na=Pl(R,R.L?R.ba:null,R.W),ue.L){Wi(R.h,ue);var Ae=ue,vt=R.O;vt&&(Ae.H=vt),Ae.D&&($o(Ae),zi(Ae)),R.g=ue}else Yt(R);b.i.length>0&&ns(b)}else Qe[0]!="stop"&&Qe[0]!="close"||In(b,7);else b.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?In(b,7):Qo(b):Qe[0]!="noop"&&b.l&&b.l.qa(Qe),b.A=0)}}Gr(4)}catch{}}var _f=class{constructor(d,w){this.g=d,this.map=w}};function Wo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $i(d){return d.h?1:d.g?d.g.size:0}function wl(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function Ho(d,w){d.g?d.g.add(w):d.h=w}function Wi(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Wo.prototype.cancel=function(){if(this.i=bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function bn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const b of d.g.values())w=w.concat(b.G);return w}return E(d.i)}var xu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function En(d,w){if(d){d=d.split("&");for(let b=0;b<d.length;b++){const R=d[b].indexOf("=");let G,X=null;R>=0?(G=d[b].substring(0,R),X=d[b].substring(R+1)):G=d[b],w(G,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function gr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;d instanceof gr?(this.l=d.l,Hi(this,d.j),this.o=d.o,this.g=d.g,yr(this,d.u),this.h=d.h,Bs(this,Al(d.i)),this.m=d.m):d&&(w=String(d).match(xu))?(this.l=!1,Hi(this,w[1]||"",!0),this.o=qi(w[2]||""),this.g=qi(w[3]||"",!0),yr(this,w[4]),this.h=qi(w[5]||"",!0),Bs(this,w[6]||"",!0),this.m=qi(w[7]||"")):(this.l=!1,this.i=new Ue(null,this.l))}gr.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(Ki(w,El,!0),":");var b=this.g;return(b||w=="file")&&(d.push("//"),(w=this.o)&&d.push(Ki(w,El,!0),"@"),d.push(pr(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&d.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Ki(b,b.charAt(0)=="/"?Gi:Sl,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Ki(b,Tl)),d.join("")},gr.prototype.resolve=function(d){const w=Ln(this);let b=!!d.j;b?Hi(w,d.j):b=!!d.o,b?w.o=d.o:b=!!d.g,b?w.g=d.g:b=d.u!=null;var R=d.h;if(b)yr(w,d.u);else if(b=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var G=w.h.lastIndexOf("/");G!=-1&&(R=w.h.slice(0,G+1)+R)}if(G=R,G==".."||G==".")R="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){R=G.lastIndexOf("/",0)==0,G=G.split("/");const X=[];for(let ue=0;ue<G.length;){const Ae=G[ue++];Ae=="."?R&&ue==G.length&&X.push(""):Ae==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ue==G.length&&X.push("")):(X.push(Ae),R=!0)}R=X.join("/")}else R=G}return b?w.h=R:b=d.i.toString()!=="",b?Bs(w,Al(d.i)):b=!!d.m,b&&(w.m=d.m),w};function Ln(d){return new gr(d)}function Hi(d,w,b){d.j=b?qi(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function yr(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function Bs(d,w,b){w instanceof Ue?(d.i=w,Ko(d.i,d.l)):(b||(w=Ki(w,xf)),d.i=new Ue(w,d.l))}function Ge(d,w,b){d.i.set(w,b)}function Jr(d){return Ge(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function qi(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ki(d,w,b){return typeof d=="string"?(d=encodeURI(d).replace(w,bl),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var El=/[#\/\?@]/g,Sl=/[#\?:]/g,Gi=/[#\?]/g,xf=/[#\?@]/g,Tl=/#/g;function Ue(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function vr(d){d.g||(d.g=new Map,d.h=0,d.i&&En(d.i,function(w,b){d.add(decodeURIComponent(w.replace(/\+/g," ")),b)}))}n=Ue.prototype,n.add=function(d,w){vr(this),this.i=null,d=_r(this,d);let b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(w),this.h+=1,this};function Il(d,w){vr(d),w=_r(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function qo(d,w){return vr(d),w=_r(d,w),d.g.has(w)}n.forEach=function(d,w){vr(this),this.g.forEach(function(b,R){b.forEach(function(G){d.call(w,G,R,this)},this)},this)};function Cl(d,w){vr(d);let b=[];if(typeof w=="string")qo(d,w)&&(b=b.concat(d.g.get(_r(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)b=b.concat(d[w]);return b}n.set=function(d,w){return vr(this),this.i=null,d=_r(this,d),qo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},n.get=function(d,w){return d?(d=Cl(this,d),d.length>0?String(d[0]):w):w};function kl(d,w,b){Il(d,w),b.length>0&&(d.i=null,d.g.set(_r(d,w),E(b)),d.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var b=w[R];const G=pr(b);b=Cl(this,b);for(let X=0;X<b.length;X++){let ue=G;b[X]!==""&&(ue+="="+pr(b[X])),d.push(ue)}}return this.i=d.join("&")};function Al(d){const w=new Ue;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function _r(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function Ko(d,w){w&&!d.j&&(vr(d),d.i=null,d.g.forEach(function(b,R){const G=R.toLowerCase();R!=G&&(Il(this,R),kl(this,G,b))},d)),d.j=w}function xr(d,w){const b=new Fs;if(l.Image){const R=new Image;R.onload=g(Bt,b,"TestLoadImage: loaded",!0,w,R),R.onerror=g(Bt,b,"TestLoadImage: error",!1,w,R),R.onabort=g(Bt,b,"TestLoadImage: abort",!1,w,R),R.ontimeout=g(Bt,b,"TestLoadImage: timeout",!1,w,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else w(!1)}function wr(d,w){const b=new Fs,R=new AbortController,G=setTimeout(()=>{R.abort(),Bt(b,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:R.signal}).then(X=>{clearTimeout(G),X.ok?Bt(b,"TestPingServer: ok",!0,w):Bt(b,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),Bt(b,"TestPingServer: error",!1,w)})}function Bt(d,w,b,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(b)}catch{}}function Yi(){this.g=new Fi}function Zr(d){this.i=d.Sb||null,this.h=d.ab||!1}y(Zr,Ms),Zr.prototype.g=function(){return new Sn(this.i,this.h)};function Sn(d,w){Et.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Sn,Et),n=Sn.prototype,n.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,Zn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wu(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function wu(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?$s(this):Zn(this),this.readyState==3&&wu(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,$s(this))},n.Na=function(d){this.g&&(this.response=d,$s(this))},n.ga=function(){this.g&&$s(this)};function $s(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Zn(d)}n.setRequestHeader=function(d,w){this.A.append(d,w)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var b=w.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=w.next();return d.join(`\r
`)};function Zn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function bu(d){let w="";return ce(d,function(b,R){w+=R,w+=":",w+=b,w+=`\r
`}),w}function Go(d,w,b){e:{for(R in b){var R=!1;break e}R=!0}R||(b=bu(b),typeof d=="string"?b!=null&&pr(b):Ge(d,w,b))}function Je(d){Et.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Je,Et);var Eu=/^https?$/i,wf=["POST","PUT"];n=Je.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,w,b,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mu.g(),this.g.onreadystatechange=_(f(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(X){Ws(this,X);return}if(d=b||"",b=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)b.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())b.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),G=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(wf,w,void 0)>=0)||R||G||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ue]of b)this.g.setRequestHeader(X,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(X){Ws(this,X)}};function Ws(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,Hs(d),ts(d)}function Hs(d){d.A||(d.A=!0,yt(d,"complete"),yt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,yt(this,"complete"),yt(this,"abort"),ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ts(this,!0)),Je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?es(this):this.Xa())},n.Xa=function(){es(this)};function es(d){if(d.h&&typeof o<"u"){if(d.v&&br(d)==4)setTimeout(d.Ca.bind(d),0);else if(yt(d,"readystatechange"),br(d)==4){d.h=!1;try{const X=d.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var b;if(!(b=w)){var R;if(R=X===0){let ue=String(d.D).match(xu)[1]||null;!ue&&l.self&&l.self.location&&(ue=l.self.location.protocol.slice(0,-1)),R=!Eu.test(ue?ue.toLowerCase():"")}b=R}if(b)yt(d,"complete"),yt(d,"success");else{d.o=6;try{var G=br(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",Hs(d)}}finally{ts(d)}}}}function ts(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const b=d.g;d.g=null,w||yt(d,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function br(d){return d.g?d.g.readyState:0}n.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),cu(w)}};function Su(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Rl(d){const w={};d=(d.g&&br(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(j(d[R]))continue;var b=Bo(d[R]);const G=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=w[G]||[];w[G]=X,X.push(b)}z(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Er(d,w,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||w}function Yo(d){this.za=0,this.i=[],this.j=new Fs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Er("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Er("baseRetryDelayMs",5e3,d),this.Za=Er("retryDelaySeedMs",1e4,d),this.Ta=Er("forwardChannelMaxRetries",2,d),this.va=Er("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Wo(d&&d.concurrentRequestLimit),this.Ba=new Yi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Yo.prototype,n.ka=8,n.I=1,n.connect=function(d,w,b,R){pt(0),this.W=d,this.H=w||{},b&&R!==void 0&&(this.H.OSID=b,this.H.OAID=R),this.F=this.X,this.J=Pl(this,null,this.W),ns(this)};function Qo(d){if(Xo(d),d.I==3){var w=d.V++,b=Ln(d.J);if(Ge(b,"SID",d.M),Ge(b,"RID",w),Ge(b,"TYPE","terminate"),Sr(d,b),w=new On(d,d.j,w),w.M=2,w.A=Jr(Ln(b)),b=!1,l.navigator&&l.navigator.sendBeacon)try{b=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!b&&l.Image&&(new Image().src=w.A,b=!0),b||(w.g=Iu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),zi(w)}Ji(d)}function Tn(d){d.g&&(Xi(d),d.g.cancel(),d.g=null)}function Xo(d){Tn(d),d.v&&(l.clearTimeout(d.v),d.v=null),Jo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function ns(d){if(!xl(d.h)&&!d.m){d.m=!0;var w=d.Ea;O||k(),q||(O(),q=!0),A.add(w,d),d.D=0}}function Tu(d,w){return $i(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=w.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Vs(f(d.Ea,d,w),ea(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new On(this,this.j,d);let X=this.o;if(this.U&&(X?(X=te(X),Ne(X,this.U)):X=this.U),this.u!==null||this.R||(G.J=X,X=null),this.S)e:{for(var w=0,b=0;b<this.i.length;b++){t:{var R=this.i[b];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=b;break e}if(w===4096||b===this.i.length-1){w=b+1;break e}}w=1e3}else w=1e3;w=Nl(this,G,w),b=Ln(this.J),Ge(b,"RID",d),Ge(b,"CVER",22),this.G&&Ge(b,"X-HTTP-Session-Id",this.G),Sr(this,b),X&&(this.R?w="headers="+pr(bu(X))+"&"+w:this.u&&Go(b,this.u,X)),Ho(this.h,G),this.Ra&&Ge(b,"TYPE","init"),this.S?(Ge(b,"$req",w),Ge(b,"SID","null"),G.U=!0,Jn(G,b,null)):Jn(G,b,w),this.I=2}}else this.I==3&&(d?Qi(this,d):this.i.length==0||xl(this.h)||Qi(this))};function Qi(d,w){var b;w?b=w.l:b=d.V++;const R=Ln(d.J);Ge(R,"SID",d.M),Ge(R,"RID",b),Ge(R,"AID",d.K),Sr(d,R),d.u&&d.o&&Go(R,d.u,d.o),b=new On(d,d.j,b,d.D+1),d.u===null&&(b.J=d.o),w&&(d.i=w.G.concat(d.i)),w=Nl(d,b,1e3),b.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ho(d.h,b),Jn(b,R,w)}function Sr(d,w){d.H&&ce(d.H,function(b,R){Ge(w,R,b)}),d.l&&ce({},function(b,R){Ge(w,R,b)})}function Nl(d,w,b){b=Math.min(d.i.length,b);const R=d.l?f(d.l.Ka,d.l,d):null;e:{var G=d.i;let Ae=-1;for(;;){const vt=["count="+b];Ae==-1?b>0?(Ae=G[0].g,vt.push("ofs="+Ae)):Ae=0:vt.push("ofs="+Ae);let Qe=!0;for(let St=0;St<b;St++){var X=G[St].g;const Cn=G[St].map;if(X-=Ae,X<0)Ae=Math.max(0,G[St].g-100),Qe=!1;else try{X="req"+X+"_"||"";try{var ue=Cn instanceof Map?Cn:Object.entries(Cn);for(const[rs,Ir]of ue){let Cr=Ir;c(Ir)&&(Cr=js(Ir)),vt.push(X+rs+"="+encodeURIComponent(Cr))}}catch(rs){throw vt.push(X+"type="+encodeURIComponent("_badmap")),rs}}catch{R&&R(Cn)}}if(Qe){ue=vt.join("&");break e}}ue=void 0}return d=d.i.splice(0,b),w.G=d,ue}function Yt(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;O||k(),q||(O(),q=!0),A.add(w,d),d.A=0}}function Tr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Vs(f(d.Da,d),ea(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,qs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Vs(f(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Tn(this),qs(this))};function Xi(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function qs(d){d.g=new On(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=Ln(d.na);Ge(w,"RID","rpc"),Ge(w,"SID",d.M),Ge(w,"AID",d.K),Ge(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ge(w,"TO",d.ia),Ge(w,"TYPE","xmlhttp"),Sr(d,w),d.u&&d.o&&Go(w,d.u,d.o),d.O&&(d.g.H=d.O);var b=d.g;d=d.ba,b.M=1,b.A=Jr(Ln(w)),b.u=null,b.R=!0,vl(b,d)}n.Va=function(){this.C!=null&&(this.C=null,Tn(this),Tr(this),pt(19))};function Jo(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Zo(d,w){var b=null;if(d.g==w){Jo(d),Xi(d),d.g=null;var R=2}else if(wl(d.h,w))b=w.G,Wi(d.h,w),R=1;else return;if(d.I!=0){if(w.o)if(R==1){b=w.u?w.u.length:0,w=Date.now()-w.F;var G=d.D;R=Ls(),yt(R,new gl(R,b)),ns(d)}else Yt(d);else if(G=w.m,G==3||G==0&&w.X>0||!(R==1&&Tu(d,w)||R==2&&Tr(d)))switch(b&&b.length>0&&(w=d.h,w.i=w.i.concat(b)),G){case 1:In(d,5);break;case 4:In(d,10);break;case 3:In(d,6);break;default:In(d,2)}}}function ea(d,w){let b=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(b*=2),b*w}function In(d,w){if(d.j.info("Error code "+w),w==2){var b=f(d.bb,d),R=d.Ua;const G=!R;R=new gr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Hi(R,"https"),Jr(R),G?xr(R.toString(),b):wr(R.toString(),b)}else pt(2);d.I=0,d.l&&d.l.pa(w),Ji(d),Xo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Ji(d){if(d.I=0,d.ja=[],d.l){const w=bn(d.h);(w.length!=0||d.i.length!=0)&&(I(d.ja,w),I(d.ja,d.i),d.h.i.length=0,E(d.i),d.i.length=0),d.l.oa()}}function Pl(d,w,b){var R=b instanceof gr?Ln(b):new gr(b);if(R.g!="")w&&(R.g=w+"."+R.g),yr(R,R.u);else{var G=l.location;R=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;const X=new gr(null);R&&Hi(X,R),w&&(X.g=w),G&&yr(X,G),b&&(X.h=b),R=X}return b=d.G,w=d.wa,b&&w&&Ge(R,b,w),Ge(R,"VER",d.ka),Sr(d,R),R}function Iu(d,w,b){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Aa&&!d.ma?new Je(new Zr({ab:b})):new Je(d.ma),w.Fa(d.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}n=Cu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ta(){}ta.prototype.g=function(d,w){return new $t(d,w)};function $t(d,w){Et.call(this),this.g=new Yo(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!j(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!j(w)&&(this.g.G=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new Ks(this)}y($t,Et),$t.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Qo(this.g)},$t.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.v&&(b={},b.__data__=js(d),d=b);w.i.push(new _f(w.Ya++,d)),w.I==3&&ns(w)},$t.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,$t.Z.N.call(this)};function ku(d){Fo.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const b in w){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}y(ku,Fo);function Au(){pl.call(this),this.status=1}y(Au,pl);function Ks(d){this.g=d}y(Ks,Cu),Ks.prototype.ra=function(){yt(this.g,"a")},Ks.prototype.qa=function(d){yt(this.g,new ku(d))},Ks.prototype.pa=function(d){yt(this.g,new Au)},Ks.prototype.oa=function(){yt(this.g,"b")},ta.prototype.createWebChannel=ta.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,oE=function(){return new ta},iE=function(){return Ls()},sE=Xn,Np={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,Qh=Us,zs.COMPLETE="complete",rE=zs,uu.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",Et.prototype.listen=Et.prototype.J,mc=uu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,nE=Je}).apply(typeof Th<"u"?Th:typeof self<"u"?self:typeof window<"u"?window:{});let tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let tl="12.9.0";function UN(n){tl=n}const So=new ug("@firebase/firestore");function Ia(){return So.logLevel}function fe(n,...e){if(So.logLevel<=Le.DEBUG){const t=e.map(bg);So.debug(`Firestore (${tl}): ${n}`,...t)}}function Cs(n,...e){if(So.logLevel<=Le.ERROR){const t=e.map(bg);So.error(`Firestore (${tl}): ${n}`,...t)}}function To(n,...e){if(So.logLevel<=Le.WARN){const t=e.map(bg);So.warn(`Firestore (${tl}): ${n}`,...t)}}function bg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Te(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aE(n,r,t)}function aE(n,e,t){let r=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Cs(r),new Error(r)}function Ye(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||aE(e,s,r)}function Re(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class lE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class BN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $N{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ye(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new bs,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new bs)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new lE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class WN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class HN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new WN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class S_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ye(this.o===void 0,3512);const r=o=>{o.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new S_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new S_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function KN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=KN(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function Pp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return rp(s)===rp(o)?Ve(s,o):rp(s)?1:-1}return Ve(n.length,e.length)}const GN=55296,YN=57343;function rp(n){const e=n.charCodeAt(0);return e>=GN&&e<=YN}function za(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const T_="__name__";class Mr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Mr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const r=Mr.isNumericId(e),s=Mr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):Pp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return bi.fromString(e.substring(4,e.length-2))}}class tt extends Mr{construct(e,t,r){return new tt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const QN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Mr{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return QN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T_}static keyField(){return new Kt([T_])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new he(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new he(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}class xe{constructor(e){this.path=e}static fromPath(e){return new xe(tt.fromString(e))}static fromName(e){return new xe(tt.fromString(e).popFirst(5))}static empty(){return new xe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new tt(e.slice()))}}function cE(n,e,t){if(!t)throw new he(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function XN(n,e,t,r){if(e===!0&&r===!0)throw new he(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function I_(n){if(!xe.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function C_(n){if(xe.isDocumentKey(n))throw new he(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function ur(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qd(n);throw new he(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Qc(n,e){if(!uE(n))throw new he(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new he(Z.INVALID_ARGUMENT,t);return!0}const k_=-62135596800,A_=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*A_);return new ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<k_)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/A_}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Qc(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:kt("string",ot._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new ot(0,0))}static max(){return new ke(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Dc=-1;function JN(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new ot(t+1,0):new ot(t,r));return new Ii(s,xe.empty(),e)}function ZN(n){return new Ii(n.readTime,n.key,Dc)}class Ii{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ii(ke.min(),xe.empty(),Dc)}static max(){return new Ii(ke.max(),xe.empty(),Dc)}}function eP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}const tP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function nl(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==tP)throw n;fe("LocalStore","Unexpectedly lost primary lease")}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,r)=>{t(e)}))}static reject(e){return new ne(((t,r)=>{r(e)}))}static waitFor(e){return new ne(((t,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&t()}),(h=>r(h)))})),l=!0,o===s&&t()}))}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next((s=>s?ne.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new ne(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next((g=>{l[f]=g,++c,c===o&&r(l)}),(g=>s(g)))}}))}static doWhile(e,t){return new ne(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function rP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rl(n){return n.name==="IndexedDbTransactionError"}class Kd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kd.ce=-1;const Sg=-1;function Gd(n){return n==null}function yd(n){return n===0&&1/n==-1/0}function sP(n){return typeof n=="number"&&Number.isInteger(n)&&!yd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const hE="";function iP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R_(e)),e=oP(n.get(t),e);return R_(e)}function oP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case hE:t+="";break;default:t+=o}}return t}function R_(n){return n+hE+""}function N_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ji(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ih(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ih(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ih(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ih(this.root,e,this.comparator,!0)}}class Ih{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=o??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new P_(this.data.getIterator())}getIteratorFrom(e){return new P_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class P_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class jn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new jt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class fE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fE("Invalid base64 string: "+o):o}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const aP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ci(n){if(Ye(!!n,39018),typeof n=="string"){let e=0;const t=aP.exec(n);if(Ye(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}const mE="server_timestamp",pE="__type__",gE="__previous_value__",yE="__local_write_time__";function Tg(n){return(n?.mapValue?.fields||{})[pE]?.stringValue===mE}function Yd(n){const e=n.mapValue.fields[gE];return Tg(e)?Yd(e):e}function jc(n){const e=Ci(n.mapValue.fields[yE].timestampValue);return new ot(e.seconds,e.nanos)}class lP{constructor(e,t,r,s,o,l,c,h,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=g,this.apiKey=y}}const vd="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||vd}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}function cP(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(n.options.projectId,e)}const vE="__type__",uP="__max__",Ch={mapValue:{}},_E="__vector__",_d="value";function Ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Tg(n)?4:dP(n)?9007199254740991:hP(n)?10:11:Te(28295,{value:n})}function Hr(n,e){if(n===e)return!0;const t=Ai(n);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return jc(n).isEqual(jc(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ci(s.timestampValue),c=Ci(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return ki(s.bytesValue).isEqual(ki(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return xt(s.geoPointValue.latitude)===xt(o.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return xt(s.integerValue)===xt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=xt(s.doubleValue),c=xt(o.doubleValue);return l===c?yd(l)===yd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return za(n.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(N_(l)!==N_(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Hr(l[h],c[h])))return!1;return!0})(n,e);default:return Te(52216,{left:n})}}function Oc(n,e){return(n.values||[]).find((t=>Hr(t,e)))!==void 0}function Ba(n,e){if(n===e)return 0;const t=Ai(n),r=Ai(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=xt(o.integerValue||o.doubleValue),h=xt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return D_(n.timestampValue,e.timestampValue);case 4:return D_(jc(n),jc(e));case 5:return Pp(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=ki(o),h=ki(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const g=Ve(c[f],h[f]);if(g!==0)return g}return Ve(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Ve(xt(o.latitude),xt(l.latitude));return c!==0?c:Ve(xt(o.longitude),xt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return j_(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},h=l.fields||{},f=c[_d]?.arrayValue,g=h[_d]?.arrayValue,y=Ve(f?.values?.length||0,g?.values?.length||0);return y!==0?y:j_(f,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Ch.mapValue&&l===Ch.mapValue)return 0;if(o===Ch.mapValue)return 1;if(l===Ch.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},g=Object.keys(f);h.sort(),g.sort();for(let y=0;y<h.length&&y<g.length;++y){const _=Pp(h[y],g[y]);if(_!==0)return _;const E=Ba(c[h[y]],f[g[y]]);if(E!==0)return E}return Ve(h.length,g.length)})(n.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function D_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ci(n),r=Ci(e),s=Ve(t.seconds,r.seconds);return s!==0?s:Ve(t.nanos,r.nanos)}function j_(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Ba(t[s],r[s]);if(o)return o}return Ve(t.length,r.length)}function $a(n){return Dp(n)}function Dp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ci(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ki(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Dp(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Dp(t.fields[l])}`;return s+"}"})(n.mapValue):Te(61005,{value:n})}function Xh(n){switch(Ai(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Yd(n);return e?16+Xh(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+Xh(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return ji(r.fields,((o,l)=>{s+=o.length+Xh(l)})),s})(n.mapValue);default:throw Te(13486,{value:n})}}function M_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jp(n){return!!n&&"integerValue"in n}function Ig(n){return!!n&&"arrayValue"in n}function O_(n){return!!n&&"nullValue"in n}function L_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jh(n){return!!n&&"mapValue"in n}function hP(n){return(n?.mapValue?.fields||{})[vE]?.stringValue===_E}function Ec(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ji(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ec(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ec(n.arrayValue.values[t]);return e}return{...n}}function dP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uP}class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(t)}setAll(e){let t=Kt.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Ec(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Jh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Jh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ji(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new vn(Ec(this.value))}}function xE(n){const e=[];return ji(n.fields,((t,r)=>{const s=new Kt([t]);if(Jh(r)){const o=xE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new jn(e)}class nn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new nn(e,0,ke.min(),ke.min(),ke.min(),vn.empty(),0)}static newFoundDocument(e,t,r,s){return new nn(e,1,t,ke.min(),r,s,0)}static newNoDocument(e,t){return new nn(e,2,t,ke.min(),ke.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,ke.min(),ke.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xd{constructor(e,t){this.position=e,this.inclusive=t}}function V_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=Ba(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function F_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hr(n.position[t],e.position[t]))return!1;return!0}class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function fP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class wE{}class Ct extends wE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pP(e,t,r):t==="array-contains"?new vP(e,r):t==="in"?new _P(e,r):t==="not-in"?new xP(e,r):t==="array-contains-any"?new wP(e,r):new Ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gP(e,r):new yP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ba(t,this.value)):t!==null&&Ai(this.value)===Ai(t)&&this.matchesComparison(Ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends wE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hr(e,t)}matches(e){return bE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bE(n){return n.op==="and"}function EE(n){return mP(n)&&bE(n)}function mP(n){for(const e of n.filters)if(e instanceof hr)return!1;return!0}function Mp(n){if(n instanceof Ct)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(EE(n))return n.filters.map((e=>Mp(e))).join(",");{const e=n.filters.map((t=>Mp(t))).join(",");return`${n.op}(${e})`}}function SE(n,e){return n instanceof Ct?(function(r,s){return s instanceof Ct&&r.op===s.op&&r.field.isEqual(s.field)&&Hr(r.value,s.value)})(n,e):n instanceof hr?(function(r,s){return s instanceof hr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&SE(l,s.filters[c])),!0):!1})(n,e):void Te(19439)}function TE(n){return n instanceof Ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`})(n):n instanceof hr?(function(t){return t.op.toString()+" {"+t.getFilters().map(TE).join(" ,")+"}"})(n):"Filter"}class pP extends Ct{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class gP extends Ct{constructor(e,t){super(e,"in",t),this.keys=IE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yP extends Ct{constructor(e,t){super(e,"not-in",t),this.keys=IE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function IE(n,e){return(e.arrayValue?.values||[]).map((t=>xe.fromName(t.referenceValue)))}class vP extends Ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&Oc(t.arrayValue,this.value)}}class _P extends Ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Oc(this.value.arrayValue,t)}}class xP extends Ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Oc(this.value.arrayValue,t)}}class wP extends Ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Oc(this.value.arrayValue,r)))}}class bP{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function U_(n,e=null,t=[],r=[],s=null,o=null,l=null){return new bP(n,e,t,r,s,o,l)}function Cg(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Mp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Gd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$a(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$a(r))).join(",")),e.Te=t}return e.Te}function kg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!F_(n.startAt,e.startAt)&&F_(n.endAt,e.endAt)}function Op(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class sl{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function EP(n,e,t,r,s,o,l,c){return new sl(n,e,t,r,s,o,l,c)}function Ag(n){return new sl(n)}function z_(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function SP(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function CE(n){return n.collectionGroup!==null}function Sc(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new jt(Kt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Lc(o,r))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new Lc(Kt.keyField(),r))}return e.Ie}function zr(n){const e=Re(n);return e.Ee||(e.Ee=TP(e,Sc(n))),e.Ee}function TP(n,e){if(n.limitType==="F")return U_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Lc(s.field,o)}));const t=n.endAt?new xd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new xd(n.startAt.position,n.startAt.inclusive):null;return U_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Lp(n,e){const t=n.filters.concat([e]);return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IP(n,e){const t=n.explicitOrderBy.concat([e]);return new sl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Vp(n,e,t){return new sl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qd(n,e){return kg(zr(n),zr(e))&&n.limitType===e.limitType}function kE(n){return`${Cg(zr(n))}|lt:${n.limitType}`}function Ca(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>TE(s))).join(", ")}]`),Gd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>$a(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>$a(s))).join(",")),`Target(${r})`})(zr(n))}; limitType=${n.limitType})`}function Xd(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Sc(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,h){const f=V_(l,c,h);return l.inclusive?f<=0:f<0})(r.startAt,Sc(r),s)||r.endAt&&!(function(l,c,h){const f=V_(l,c,h);return l.inclusive?f>=0:f>0})(r.endAt,Sc(r),s))})(n,e)}function CP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AE(n){return(e,t)=>{let r=!1;for(const s of Sc(n)){const o=kP(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function kP(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?Ba(h,f):Te(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:n.dir})}}class Ro{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return dE(this.inner)}size(){return this.innerSize}}const AP=new mt(xe.comparator);function ks(){return AP}const RE=new mt(xe.comparator);function pc(...n){let e=RE;for(const t of n)e=e.insert(t.key,t);return e}function NE(n){let e=RE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function yo(){return Tc()}function PE(){return Tc()}function Tc(){return new Ro((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RP=new mt(xe.comparator),NP=new jt(xe.comparator);function Fe(...n){let e=NP;for(const t of n)e=e.add(t);return e}const PP=new jt(Ve);function DP(){return PP}function Rg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(e)?"-0":e}}function DE(n){return{integerValue:""+n}}function jP(n,e){return sP(e)?DE(e):Rg(n,e)}class Jd{constructor(){this._=void 0}}function MP(n,e,t){return n instanceof wd?(function(s,o){const l={fields:{[pE]:{stringValue:mE},[yE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Tg(o)&&(o=Yd(o)),o&&(l.fields[gE]=o),{mapValue:l}})(t,e):n instanceof Wa?ME(n,e):n instanceof Ha?OE(n,e):(function(s,o){const l=jE(s,o),c=B_(l)+B_(s.Ae);return jp(l)&&jp(s.Ae)?DE(c):Rg(s.serializer,c)})(n,e)}function OP(n,e,t){return n instanceof Wa?ME(n,e):n instanceof Ha?OE(n,e):t}function jE(n,e){return n instanceof bd?(function(r){return jp(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class wd extends Jd{}class Wa extends Jd{constructor(e){super(),this.elements=e}}function ME(n,e){const t=LE(e);for(const r of n.elements)t.some((s=>Hr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ha extends Jd{constructor(e){super(),this.elements=e}}function OE(n,e){let t=LE(e);for(const r of n.elements)t=t.filter((s=>!Hr(s,r)));return{arrayValue:{values:t}}}class bd extends Jd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function B_(n){return xt(n.integerValue||n.doubleValue)}function LE(n){return Ig(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class VE{constructor(e,t){this.field=e,this.transform=t}}function LP(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Wa&&s instanceof Wa||r instanceof Ha&&s instanceof Ha?za(r.elements,s.elements,Hr):r instanceof bd&&s instanceof bd?Hr(r.Ae,s.Ae):r instanceof wd&&s instanceof wd})(n.transform,e.transform)}class VP{constructor(e,t){this.version=e,this.transformResults=t}}class Kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Zd{}function FE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ng(n.key,Kn.none()):new Xc(n.key,n.data,Kn.none());{const t=n.data,r=vn.empty();let s=new jt(Kt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Mi(n.key,r,new jn(s.toArray()),Kn.none())}}function FP(n,e,t){n instanceof Xc?(function(s,o,l){const c=s.value.clone(),h=W_(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Mi?(function(s,o,l){if(!Zh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=W_(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(UE(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function Ic(n,e,t,r){return n instanceof Xc?(function(o,l,c,h){if(!Zh(o.precondition,l))return c;const f=o.value.clone(),g=H_(o.fieldTransforms,h,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mi?(function(o,l,c,h){if(!Zh(o.precondition,l))return c;const f=H_(o.fieldTransforms,h,l),g=l.data;return g.setAll(UE(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,c){return Zh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function UP(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=jE(r.transform,s||null);o!=null&&(t===null&&(t=vn.empty()),t.set(r.field,o))}return t||null}function $_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&za(r,s,((o,l)=>LP(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Xc extends Zd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mi extends Zd{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function UE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function W_(n,e,t){const r=new Map;Ye(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,OP(l,c,t[s]))}return r}function H_(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,MP(o,l,e))}return r}class Ng extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zP extends Zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class BP{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&FP(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=PE();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=FE(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,((t,r)=>$_(t,r)))&&za(this.baseMutations,e.baseMutations,((t,r)=>$_(t,r)))}}class Pg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return RP})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Pg(e,t,r,s)}}class $P{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class WP{constructor(e,t){this.count=e,this.unchangedNames=t}}var It,Be;function HP(n){switch(n){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function zE(n){if(n===void 0)return Cs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case It.OK:return Z.OK;case It.CANCELLED:return Z.CANCELLED;case It.UNKNOWN:return Z.UNKNOWN;case It.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case It.INTERNAL:return Z.INTERNAL;case It.UNAVAILABLE:return Z.UNAVAILABLE;case It.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case It.NOT_FOUND:return Z.NOT_FOUND;case It.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case It.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case It.ABORTED:return Z.ABORTED;case It.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case It.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case It.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:n})}}(Be=It||(It={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";function qP(){return new TextEncoder}const KP=new bi([4294967295,4294967295],0);function q_(n){const e=qP().encode(n),t=new tE;return t.update(e),new Uint8Array(t.digest())}function K_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new bi([t,r],0),new bi([s,o],0)]}class Dg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=bi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(bi.fromNumber(r)));return s.compare(KP)===1&&(s=new bi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=q_(e),[r,s]=K_(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Dg(o,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=q_(e),[r,s]=K_(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ef{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ef(ke.min(),s,new mt(Ve),ks(),Fe())}}class Jc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jc(r,t,Fe(),Fe(),Fe())}}class ed{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class BE{constructor(e,t){this.targetId=e,this.Ce=t}}class $E{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class G_{constructor(){this.ve=0,this.Fe=Y_(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Te(38017,{changeType:o})}})),new Jc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Y_()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class GP{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.He=kh(),this.Je=kh(),this.Ze=new mt(Ve)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Op(o))if(r===0){const l=new xe(o.path);this.et(t,l,nn.newNoDocument(l,ke.min()))}else Ye(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=ki(r).toUint8Array()}catch(h){if(h instanceof fE)return To("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Dg(l,s,o)}catch(h){return To(h instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Op(c.target)){const h=new xe(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,nn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let r=Fe();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new ef(e,t,this.Ze,this.je,r);return this.je=ks(),this.He=kh(),this.Je=kh(),this.Ze=new mt(Ve),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new G_,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new jt(Ve),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new jt(Ve),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new G_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function kh(){return new mt(xe.comparator)}function Y_(){return new mt(xe.comparator)}const YP={asc:"ASCENDING",desc:"DESCENDING"},QP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XP={and:"AND",or:"OR"};class JP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fp(n,e){return n.useProto3Json||Gd(e)?e:{value:e}}function Ed(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZP(n,e){return Ed(n,e.toTimestamp())}function Br(n){return Ye(!!n,49232),ke.fromTimestamp((function(t){const r=Ci(t);return new ot(r.seconds,r.nanos)})(n))}function jg(n,e){return Up(n,e).canonicalString()}function Up(n,e){const t=(function(s){return new tt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function HE(n){const e=tt.fromString(n);return Ye(QE(e),10190,{key:e.toString()}),e}function zp(n,e){return jg(n.databaseId,e.path)}function sp(n,e){const t=HE(e);if(t.get(1)!==n.databaseId.projectId)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(KE(t))}function qE(n,e){return jg(n.databaseId,e)}function e2(n){const e=HE(n);return e.length===4?tt.emptyPath():KE(e)}function Bp(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KE(n){return Ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Q_(n,e,t){return{name:zp(n,e),fields:t.value.mapValue.fields}}function t2(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Te(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(Ye(g===void 0||typeof g=="string",58123),Gt.fromBase64String(g||"")):(Ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Gt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const g=f.code===void 0?Z.UNKNOWN:zE(f.code);return new he(g,f.message||"")})(l);t=new $E(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sp(n,r.document.name),o=Br(r.document.updateTime),l=r.document.createTime?Br(r.document.createTime):ke.min(),c=new vn({mapValue:{fields:r.document.fields}}),h=nn.newFoundDocument(s,o,l,c),f=r.targetIds||[],g=r.removedTargetIds||[];t=new ed(f,g,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sp(n,r.document),o=r.readTime?Br(r.readTime):ke.min(),l=nn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new ed([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sp(n,r.document),o=r.removedTargetIds||[];t=new ed([],o,s,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new WP(s,o),c=r.targetId;t=new BE(c,l)}}return t}function n2(n,e){let t;if(e instanceof Xc)t={update:Q_(n,e.key,e.value)};else if(e instanceof Ng)t={delete:zp(n,e.key)};else if(e instanceof Mi)t={update:Q_(n,e.key,e.data),updateMask:h2(e.fieldMask)};else{if(!(e instanceof zP))return Te(16599,{dt:e.type});t={verify:zp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof wd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Wa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ha)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof bd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Te(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:ZP(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Te(27497)})(n,e.precondition)),t}function r2(n,e){return n&&n.length>0?(Ye(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Br(s.updateTime):Br(o);return l.isEqual(ke.min())&&(l=Br(o)),new VP(l,s.transformResults||[])})(t,e)))):[]}function s2(n,e){return{documents:[qE(n,e.path)]}}function i2(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qE(n,s);const o=(function(f){if(f.length!==0)return YE(hr.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(f){if(f.length!==0)return f.map((g=>(function(_){return{field:ka(_.field),direction:l2(_.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Fp(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:s}}function o2(n){let e=e2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ye(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){const _=GE(y);return _ instanceof hr&&EE(_)?_.getFilters():[_]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((_=>(function(I){return new Lc(Aa(I.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(_)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let _;return _=typeof y=="object"?y.value:y,Gd(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(y){const _=!!y.before,E=y.values||[];return new xd(E,_)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){const _=!y.before,E=y.values||[];return new xd(E,_)})(t.endAt)),EP(e,s,l,o,c,"F",h,f)}function a2(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Aa(t.unaryFilter.field);return Ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Aa(t.unaryFilter.field);return Ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Aa(t.unaryFilter.field);return Ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Aa(t.unaryFilter.field);return Ct.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ct.create(Aa(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hr.create(t.compositeFilter.filters.map((r=>GE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(n):Te(30097,{filter:n})}function l2(n){return YP[n]}function c2(n){return QP[n]}function u2(n){return XP[n]}function ka(n){return{fieldPath:n.canonicalString()}}function Aa(n){return Kt.fromServerFormat(n.fieldPath)}function YE(n){return n instanceof Ct?(function(t){if(t.op==="=="){if(L_(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NAN"}};if(O_(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(L_(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NAN"}};if(O_(t.value))return{unaryFilter:{field:ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ka(t.field),op:c2(t.op),value:t.value}}})(n):n instanceof hr?(function(t){const r=t.getFilters().map((s=>YE(s)));return r.length===1?r[0]:{compositeFilter:{op:u2(t.op),filters:r}}})(n):Te(54877,{filter:n})}function h2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function QE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function XE(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}class mi{constructor(e,t,r,s,o=ke.min(),l=ke.min(),c=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class d2{constructor(e){this.yt=e}}function f2(n){const e=o2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vp(e,e.limit,"L"):e}class m2{constructor(){this.Sn=new p2}addToCollectionParentIndex(e,t){return this.Sn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ii.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ii.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class p2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new jt(tt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(tt.comparator)).toArray()}}const X_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JE=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(JE,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class qa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qa(0)}static ar(){return new qa(-1)}}const J_="LruGarbageCollector",g2=1048576;function Z_([n,e],[t,r]){const s=Ve(n,t);return s===0?Ve(e,r):s}class y2{constructor(e){this.Pr=e,this.buffer=new jt(Z_),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Z_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(J_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){rl(t)?fe(J_,"Ignoring IndexedDB error during garbage collection: ",t):await nl(t)}await this.Ar(3e5)}))}}class _2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Kd.ce);const r=new y2(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(X_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),X_):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,o,l,c,h,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,c=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(f=Date.now(),Ia()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function x2(n,e){return new _2(n,e)}class w2{constructor(){this.changes=new Ro((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class b2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class E2{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ic(r.mutation,s,jn.empty(),ot.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const s=yo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=pc();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=yo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let o=ks();const l=Tc(),c=(function(){return Tc()})();return t.forEach(((h,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Mi)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),Ic(g.mutation,f,g.mutation.getFieldMask(),ot.now())):l.set(f.key,jn.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,g)=>l.set(f,g))),t.forEach(((f,g)=>c.set(f,new b2(g,l.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Tc();let s=new mt(((l,c)=>l-c)),o=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let g=r.get(h)||jn.empty();g=c.applyToLocalView(f,g),r.set(h,g);const y=(s.get(c.batchId)||Fe()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,g=h.value,y=PE();g.forEach((_=>{if(!o.has(_)){const E=FE(t.get(_),r.get(_));E!==null&&y.set(_,E),o=o.add(_)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ne.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return SP(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):CE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ne.resolve(yo());let c=Dc,h=o;return l.next((f=>ne.forEach(f,((g,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next((_=>{h=h.insert(g,_)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,Fe()))).next((g=>({batchId:c,changes:NE(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((r=>{let s=pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=pc();return this.indexManager.getCollectionParents(e,o).next((c=>ne.forEach(c,(h=>{const f=(function(y,_){return new sl(_,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((g=>{g.forEach(((y,_)=>{l=l.insert(y,_)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((h,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,nn.newInvalidDocument(g)))}));let c=pc();return l.forEach(((h,f)=>{const g=o.get(h);g!==void 0&&Ic(g.mutation,f,jn.empty(),ot.now()),Xd(t,f)&&(c=c.insert(h,f))})),c}))}}class S2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ne.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Br(s.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:f2(s.bundledQuery),readTime:Br(s.readTime)}})(t)),ne.resolve()}}class T2{constructor(){this.overlays=new mt(xe.comparator),this.Lr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=yo();return ne.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.bt(e,t,o)})),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=yo(),o=t.length+1,l=new xe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new mt(((f,g)=>f-g));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=yo(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const c=yo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,g)=>c.set(f,g))),!(c.size()>=s)););return ne.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new $P(t,r));let o=this.Lr.get(t);o===void 0&&(o=Fe(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}}class I2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}class Mg{constructor(){this.kr=new jt(Ft.Kr),this.qr=new jt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Ft(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new xe(new tt([])),r=new Ft(t,e),s=new Ft(t,e+1),o=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new xe(new tt([])),r=new Ft(t,e),s=new Ft(t,e+1);let o=Fe();return this.qr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Ft(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return xe.comparator(e.key,t.key)||Ve(e.Hr,t.Hr)}static Ur(e,t){return Ve(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}class C2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new jt(Ft.Kr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new BP(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Jr=this.Jr.add(new Ft(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Sg:this.Yn-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,s],(l=>{const c=this.Zr(l.Hr);o.push(c)})),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ve);return t.forEach((s=>{const o=new Ft(s,0),l=new Ft(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(c=>{r=r.add(c.Hr)}))})),ne.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const l=new Ft(new xe(o),0);let c=new jt(Ve);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(h.Hr)),!0)}),l),ne.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ye(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ne.forEach(t.mutations,(s=>{const o=new Ft(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Ft(t,0),s=this.Jr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class k2{constructor(e){this.ti=e,this.docs=(function(){return new mt(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let r=ks();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():nn.newInvalidDocument(s))})),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=ks();const l=t.path,c=new xe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:g}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||eP(ZN(g),r)<=0||(s.has(g.key)||Xd(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Te(9500)}ni(e,t){return ne.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new A2(this)}getSize(e){return ne.resolve(this.size)}}class A2 extends w2{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),ne.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class R2{constructor(e){this.persistence=e,this.ri=new Ro((t=>Cg(t)),kg),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ii=0,this.si=new Mg,this.targetCount=0,this.oi=qa._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ne.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.lr(t),ne.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),ne.waitFor(o).next((()=>s))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.si.containsKey(t))}}class ZE{constructor(e,t){this._i={},this.overlays={},this.ai=new Kd(0),this.ui=!1,this.ui=!0,this.ci=new I2,this.referenceDelegate=e(this),this.li=new R2(this),this.indexManager=new m2,this.remoteDocumentCache=(function(s){return new k2(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new d2(t),this.Pi=new S2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new C2(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new N2(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,t){return ne.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class N2 extends nP{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Mg,this.Ai=null}static Vi(e){return new Og(e)}get di(){if(this.Ai)return this.Ai;throw Te(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.di,(r=>{const s=xe.fromPath(r);return this.mi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Sd{constructor(e,t){this.persistence=e,this.fi=new Ro((r=>iP(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=x2(this,t)}static Vi(e,t){return new Sd(e,t)}Ti(){}Ii(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ne.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((o=>o?ne.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,o.removeEntry(l,ke.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ne.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xh(e.data.value)),t}wr(e,t,r){return ne.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Lg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Fe(),s=Fe();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Lg(e,t.fromCache,r,s)}}class P2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class D2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return ik()?8:rP(rn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new P2;return this.ys(e,t,l).next((c=>{if(o.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>o.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ia()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Ca(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ne.resolve()):(Ia()<=Le.DEBUG&&fe("QueryEngine","Query:",Ca(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ia()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Ca(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):ne.resolve())}gs(e,t){if(z_(t))return ne.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Vp(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=Fe(...o);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.bs(t,c);return this.Ss(t,f,l,h.readTime)?this.gs(e,Vp(t,null,"F")):this.Ds(e,f,t,h)}))))})))))}ps(e,t,r,s){return z_(t)||s.isEqual(ke.min())?ne.resolve(null):this.fs.getDocuments(e,r).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,r,s)?ne.resolve(null):(Ia()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ca(t)),this.Ds(e,l,t,JN(s,Dc)).next((c=>c)))}))}bs(e,t){let r=new jt(AE(e));return t.forEach(((s,o)=>{Xd(e,o)&&(r=r.add(o))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,t,r){return Ia()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Ca(t)),this.fs.getDocumentsMatchingQuery(e,t,Ii.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}const Vg="LocalStore",j2=3e8;class M2{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new mt(Ve),this.Fs=new Ro((o=>Cg(o)),kg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function O2(n,e,t,r){return new M2(n,e,t,r)}async function eS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=Fe();for(const f of s){l.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}for(const f of o){c.push(f.batchId);for(const g of f.mutations)h=h.add(g.key)}return t.localDocuments.getDocuments(r,h).next((f=>({Ns:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function L2(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,g){const y=f.batch,_=y.keys();let E=ne.resolve();return _.forEach((I=>{E=E.next((()=>g.getEntry(h,I))).next((T=>{const C=f.docVersions.get(I);Ye(C!==null,48541),T.version.compareTo(C)<0&&(y.applyToRemoteDocument(T,f),T.isValidDocument()&&(T.setReadTime(f.commitVersion),g.addEntry(T)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=Fe();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function tS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function V2(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((g,y)=>{const _=s.get(y);if(!_)return;c.push(t.li.removeMatchingKeys(o,g.removedDocuments,y).next((()=>t.li.addMatchingKeys(o,g.addedDocuments,y))));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Gt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(y,E),(function(T,C,V){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=j2?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(_,E,g)&&c.push(t.li.updateTargetData(o,E))}));let h=ks(),f=Fe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),c.push(F2(o,l,e.documentUpdates).next((g=>{h=g.Bs,f=g.Ls}))),!r.isEqual(ke.min())){const g=t.li.getLastRemoteSnapshotVersion(o).next((y=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(g)}return ne.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,f))).next((()=>h))})).then((o=>(t.vs=s,o)))}function F2(n,e,t){let r=Fe(),s=Fe();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=ks();return t.forEach(((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):fe(Vg,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{Bs:l,Ls:s}}))}function U2(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function z2(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((o=>o?(s=o,ne.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new mi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function $p(n,e,t){const r=Re(n),s=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!rl(l))throw l;fe(Vg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function ex(n,e,t){const r=Re(n);let s=ke.min(),o=Fe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,g){const y=Re(h),_=y.Fs.get(g);return _!==void 0?ne.resolve(y.vs.get(_)):y.li.getTargetData(f,g)})(r,l,zr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:ke.min(),t?o:Fe()))).next((c=>(B2(r,CP(e),c),{documents:c,ks:o})))))}function B2(n,e,t){let r=n.Ms.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Ms.set(e,r)}class tx{constructor(){this.activeTargetIds=DP()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $2{constructor(){this.vo=new tx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new tx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class W2{Mo(e){}shutdown(){}}const nx="ConnectivityMonitor";class rx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(nx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(nx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ah=null;function Wp(){return Ah===null?Ah=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ah++,"0x"+Ah.toString(16)}const ip="RestConnection",H2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class q2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===vd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const l=Wp(),c=this.Qo(e,t.toUriEncodedString());fe(ip,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,s,o);const{host:f}=new URL(c),g=Ja(f);return this.zo(e,c,h,r,g).then((y=>(fe(ip,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw To(ip,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y}))}jo(e,t,r,s,o,l){return this.Wo(e,t,r,s,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+tl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Qo(e,t){const r=H2[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}class K2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const en="WebChannelConnection",oc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ja extends q2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ja.c_){const e=iE();oc(e,sE.STAT_EVENT,(t=>{t.stat===Np.PROXY?fe(en,"STAT_EVENT: detected buffering proxy"):t.stat===Np.NOPROXY&&fe(en,"STAT_EVENT: detected no buffering proxy")})),ja.c_=!0}}zo(e,t,r,s,o){const l=Wp();return new Promise(((c,h)=>{const f=new nE;f.setWithCredentials(!0),f.listenOnce(rE.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Qh.NO_ERROR:const y=f.getResponseJson();fe(en,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Qh.TIMEOUT:fe(en,`RPC '${e}' ${l} timed out`),h(new he(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const _=f.getStatus();if(fe(en,`RPC '${e}' ${l} failed with status:`,_,"response text:",f.getResponseText()),_>0){let E=f.getResponseJson();Array.isArray(E)&&(E=E[0]);const I=E?.error;if(I&&I.status&&I.message){const T=(function(V){const D=V.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(D)>=0?D:Z.UNKNOWN})(I.status);h(new he(T,I.message))}else h(new he(Z.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new he(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{fe(en,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(s);fe(en,`RPC '${e}' ${l} sending request:`,s),f.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Wp(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const f=o.join("");fe(en,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=l.createWebChannel(f,c);this.I_(g);let y=!1,_=!1;const E=new K2({Ho:I=>{_?fe(en,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(y||(fe(en,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),fe(en,`RPC '${e}' stream ${s} sending:`,I),g.send(I))},Jo:()=>g.close()});return oc(g,mc.EventType.OPEN,(()=>{_||(fe(en,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),oc(g,mc.EventType.CLOSE,(()=>{_||(_=!0,fe(en,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(g))})),oc(g,mc.EventType.ERROR,(I=>{_||(_=!0,To(en,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),E.o_(new he(Z.UNAVAILABLE,"The operation could not be completed")))})),oc(g,mc.EventType.MESSAGE,(I=>{if(!_){const T=I.data[0];Ye(!!T,16349);const C=T,V=C?.error||C[0]?.error;if(V){fe(en,`RPC '${e}' stream ${s} received error:`,V);const D=V.status;let U=(function(q){const A=It[q];if(A!==void 0)return zE(A)})(D),H=V.message;D==="NOT_FOUND"&&H.includes("database")&&H.includes("does not exist")&&H.includes(this.databaseId.database)&&To(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),U===void 0&&(U=Z.INTERNAL,H="Unknown error status: "+D+" with message "+V.message),_=!0,E.o_(new he(U,H)),g.close()}else fe(en,`RPC '${e}' stream ${s} received:`,T),E.__(T)}})),ja.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return oE()}}function G2(n){return new ja(n)}function op(){return typeof document<"u"?document:null}function tf(n){return new JP(n,!0)}ja.c_=!1;class nS{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const sx="PersistentStream";class rS{constructor(e,t,r,s,o,l,c,h){this.Ci=e,this.b_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new he(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(sx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(sx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y2 extends rS{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Br(l.readTime):ke.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Bp(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Op(h)?{documents:s2(o,h)}:{query:i2(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=WE(o,l.resumeToken);const f=Fp(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(ke.min())>0){c.readTime=Ed(o,l.snapshotVersion.toTimestamp());const f=Fp(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const r=a2(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Bp(this.serializer),t.removeTarget=e,this.K_(t)}}class Q2 extends rS{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=r2(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Bp(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>n2(this.serializer,r)))};this.K_(t)}}class X2{}class J2 extends X2{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,Up(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(Z.UNKNOWN,o.toString())}))}jo(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,Up(t,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(Z.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Z2(n,e,t,r){return new J2(n,e,t,r)}class eD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Cs(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Io="RemoteStore";class tD{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{No(this)&&(fe(Io,"Restarting streams for network reachability change."),await(async function(h){const f=Re(h);f.Ea.add(4),await Zc(f),f.Va.set("Unknown"),f.Ea.delete(4),await nf(f)})(this))}))})),this.Va=new eD(r,s)}}async function nf(n){if(No(n))for(const e of n.Ra)await e(!0)}async function Zc(n){for(const e of n.Ra)await e(!1)}function sS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bg(t)?zg(t):il(t).O_()&&Ug(t,e))}function Fg(n,e){const t=Re(n),r=il(t);t.Ia.delete(e),r.O_()&&iS(t,e),t.Ia.size===0&&(r.O_()?r.L_():No(t)&&t.Va.set("Unknown"))}function Ug(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(n).Z_(e)}function iS(n,e){n.da.$e(e),il(n).X_(e)}function zg(n){n.da=new GP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),il(n).start(),n.Va.ua()}function Bg(n){return No(n)&&!il(n).x_()&&n.Ia.size>0}function No(n){return Re(n).Ea.size===0}function oS(n){n.da=void 0}async function nD(n){n.Va.set("Online")}async function rD(n){n.Ia.forEach(((e,t)=>{Ug(n,e)}))}async function sD(n,e){oS(n),Bg(n)?(n.Va.ha(e),zg(n)):n.Va.set("Unknown")}async function iD(n,e,t){if(n.Va.set("Online"),e instanceof $E&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){fe(Io,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Td(n,r)}else if(e instanceof ed?n.da.Xe(e):e instanceof BE?n.da.st(e):n.da.tt(e),!t.isEqual(ke.min()))try{const r=await tS(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.da.Tt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const g=o.Ia.get(f);g&&o.Ia.set(f,g.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const g=o.Ia.get(h);if(!g)return;o.Ia.set(h,g.withResumeToken(Gt.EMPTY_BYTE_STRING,g.snapshotVersion)),iS(o,h);const y=new mi(g.target,h,f,g.sequenceNumber);Ug(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){fe(Io,"Failed to raise snapshot:",r),await Td(n,r)}}async function Td(n,e,t){if(!rl(e))throw e;n.Ea.add(1),await Zc(n),n.Va.set("Offline"),t||(t=()=>tS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(Io,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await nf(n)}))}function aS(n,e){return e().catch((t=>Td(n,t,e)))}async function rf(n){const e=Re(n),t=Ri(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sg;for(;oD(e);)try{const s=await U2(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,aD(e,s)}catch(s){await Td(e,s)}lS(e)&&cS(e)}function oD(n){return No(n)&&n.Ta.length<10}function aD(n,e){n.Ta.push(e);const t=Ri(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function lS(n){return No(n)&&!Ri(n).x_()&&n.Ta.length>0}function cS(n){Ri(n).start()}async function lD(n){Ri(n).ra()}async function cD(n){const e=Ri(n);for(const t of n.Ta)e.ea(t.mutations)}async function uD(n,e,t){const r=n.Ta.shift(),s=Pg.from(r,e,t);await aS(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await rf(n)}async function hD(n,e){e&&Ri(n).Y_&&await(async function(r,s){if((function(l){return HP(l)&&l!==Z.ABORTED})(s.code)){const o=r.Ta.shift();Ri(r).B_(),await aS(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await rf(r)}})(n,e),lS(n)&&cS(n)}async function ix(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),fe(Io,"RemoteStore received new credentials");const r=No(t);t.Ea.add(3),await Zc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await nf(t)}async function dD(n,e){const t=Re(n);e?(t.Ea.delete(2),await nf(t)):e||(t.Ea.add(2),await Zc(t),t.Va.set("Unknown"))}function il(n){return n.ma||(n.ma=(function(t,r,s){const o=Re(t);return o.sa(),new Y2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:nD.bind(null,n),Yo:rD.bind(null,n),t_:sD.bind(null,n),J_:iD.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Bg(n)?zg(n):n.Va.set("Unknown")):(await n.ma.stop(),oS(n))}))),n.ma}function Ri(n){return n.fa||(n.fa=(function(t,r,s){const o=Re(t);return o.sa(),new Q2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lD.bind(null,n),t_:hD.bind(null,n),ta:cD.bind(null,n),na:uD.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await rf(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(Io,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class $g{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new $g(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wg(n,e){if(Cs("AsyncQueue",`${e}: ${n}`),rl(n))return new he(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class Ma{static emptySet(e){return new Ma(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ox{constructor(){this.ga=new mt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ka{constructor(e,t,r,s,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Ka(e,t,Ma.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class fD{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class mD{constructor(){this.queries=ax(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Re(t),o=s.queries;s.queries=ax(),o.forEach(((l,c)=>{for(const h of c.ba)h.onError(r)}))})(this,new he(Z.ABORTED,"Firestore shutting down"))}}function ax(){return new Ro((n=>kE(n)),Qd)}async function uS(n,e){const t=Re(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.Da()&&(r=2):(o=new fD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Wg(l,`Initialization of query '${Ca(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Hg(t)}async function hS(n,e){const t=Re(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pD(n,e){const t=Re(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ba)c.Fa(s)&&(r=!0);l.wa=s}}r&&Hg(t)}function gD(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const o of s.ba)o.onError(t);r.queries.delete(e)}function Hg(n){n.Ca.forEach((e=>{e.next()}))}var Hp,lx;(lx=Hp||(Hp={})).Ma="default",lx.Cache="cache";class dS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hp.Cache}}class fS{constructor(e){this.key=e}}class mS{constructor(e){this.key=e}}class yD{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.eu=AE(e),this.tu=new Ma(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new ox,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,y)=>{const _=s.get(g),E=Xd(this.query,y)?y:null,I=!!_&&this.mutatedKeys.has(_.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let C=!1;_&&E?_.data.isEqual(E.data)?I!==T&&(r.track({type:3,doc:E}),C=!0):this.su(_,E)||(r.track({type:2,doc:E}),C=!0,(h&&this.eu(E,h)>0||f&&this.eu(E,f)<0)&&(c=!0)):!_&&E?(r.track({type:0,doc:E}),C=!0):_&&!E&&(r.track({type:1,doc:_}),C=!0,(h||f)&&(c=!0)),C&&(E?(l=l.add(E),o=T?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{tu:l,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,y)=>(function(E,I){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:C})}};return T(E)-T(I)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],h=this.Ya.size===0&&this.current&&!s?1:0,f=h!==this.Xa;return this.Xa=h,l.length!==0||f?{snapshot:new Ka(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ox,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new mS(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new fS(r))})),t}cu(e){this.Za=e.ks,this.Ya=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ka.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const qg="SyncEngine";class vD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _D{constructor(e){this.key=e,this.hu=!1}}class xD{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ro((c=>kE(c)),Qd),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(xe.comparator),this.Au=new Map,this.Vu=new Mg,this.du={},this.mu=new Map,this.fu=qa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wD(n,e,t=!0){const r=xS(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await pS(r,e,t,!0),s}async function bD(n,e){const t=xS(n);await pS(t,e,!0,!1)}async function pS(n,e,t,r){const s=await z2(n.localStore,zr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await ED(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&sS(n.remoteStore,s),c}async function ED(n,e,t,r,s){n.pu=(y,_,E)=>(async function(T,C,V,D){let U=C.view.ru(V);U.Ss&&(U=await ex(T.localStore,C.query,!1).then((({documents:A})=>C.view.ru(A,U))));const H=D&&D.targetChanges.get(C.targetId),O=D&&D.targetMismatches.get(C.targetId)!=null,q=C.view.applyChanges(U,T.isPrimaryClient,H,O);return ux(T,C.targetId,q.au),q.snapshot})(n,y,_,E);const o=await ex(n.localStore,e,!0),l=new yD(e,o.ks),c=l.ru(o.documents),h=Jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(c,n.isPrimaryClient,h);ux(n,t,f.au);const g=new vD(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function SD(n,e,t){const r=Re(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!Qd(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $p(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Fg(r.remoteStore,s.targetId),qp(r,s.targetId)})).catch(nl)):(qp(r,s.targetId),await $p(r.localStore,s.targetId,!0))}async function TD(n,e){const t=Re(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Fg(t.remoteStore,r.targetId))}async function ID(n,e,t){const r=DD(n);try{const s=await(function(l,c){const h=Re(l),f=ot.now(),g=c.reduce(((E,I)=>E.add(I.key)),Fe());let y,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let I=ks(),T=Fe();return h.xs.getEntries(E,g).next((C=>{I=C,I.forEach(((V,D)=>{D.isValidDocument()||(T=T.add(V))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,I))).next((C=>{y=C;const V=[];for(const D of c){const U=UP(D,y.get(D.key).overlayedDocument);U!=null&&V.push(new Mi(D.key,U,xE(U.value.mapValue),Kn.exists(!0)))}return h.mutationQueue.addMutationBatch(E,f,V,c)})).next((C=>{_=C;const V=C.applyToLocalDocumentSet(y,T);return h.documentOverlayCache.saveOverlays(E,C.batchId,V)}))})).then((()=>({batchId:_.batchId,changes:NE(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,h){let f=l.du[l.currentUser.toKey()];f||(f=new mt(Ve)),f=f.insert(c,h),l.du[l.currentUser.toKey()]=f})(r,s.batchId,t),await eu(r,s.changes),await rf(r.remoteStore)}catch(s){const o=Wg(s,"Failed to persist write");t.reject(o)}}async function gS(n,e){const t=Re(n);try{const r=await V2(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ye(l.hu,14607):s.removedDocuments.size>0&&(Ye(l.hu,42227),l.hu=!1))})),await eu(t,r,e)}catch(r){await nl(r)}}function cx(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const h=Re(l);h.onlineState=c;let f=!1;h.queries.forEach(((g,y)=>{for(const _ of y.ba)_.va(c)&&(f=!0)})),f&&Hg(h)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CD(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new mt(xe.comparator);l=l.insert(o,nn.newNoDocument(o,ke.min()));const c=Fe().add(o),h=new ef(ke.min(),new Map,new mt(Ve),l,c);await gS(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),Kg(r)}else await $p(r.localStore,e,!1).then((()=>qp(r,e,t))).catch(nl)}async function kD(n,e){const t=Re(n),r=e.batch.batchId;try{const s=await L2(t.localStore,e);vS(t,r,null),yS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await eu(t,s)}catch(s){await nl(s)}}async function AD(n,e,t){const r=Re(n);try{const s=await(function(l,c){const h=Re(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let g;return h.mutationQueue.lookupMutationBatch(f,c).next((y=>(Ye(y!==null,37113),g=y.keys(),h.mutationQueue.removeMutationBatch(f,y)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,g,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g))).next((()=>h.localDocuments.getDocuments(f,g)))}))})(r.localStore,e);vS(r,e,t),yS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await eu(r,s)}catch(s){await nl(s)}}function yS(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vS(n,e,t){const r=Re(n);let s=r.du[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function qp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||_S(n,r)}))}function _S(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Fg(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Kg(n))}function ux(n,e,t){for(const r of t)r instanceof fS?(n.Vu.addReference(r.key,e),RD(n,r)):r instanceof mS?(fe(qg,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||_S(n,r.key)):Te(19791,{wu:r})}function RD(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(fe(qg,"New document in limbo: "+t),n.Eu.add(r),Kg(n))}function Kg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(tt.fromString(e)),r=n.fu.next();n.Au.set(r,new _D(t)),n.Ru=n.Ru.insert(t,r),sS(n.remoteStore,new mi(zr(Ag(t.path)),r,"TargetPurposeLimboResolution",Kd.ce))}}async function eu(n,e,t){const r=Re(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((f=>{if((f||t)&&r.isPrimaryClient){const g=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Lg.Es(h.targetId,f);o.push(g)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(h,f){const g=Re(h);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ne.forEach(f,(_=>ne.forEach(_.Ts,(E=>g.persistence.referenceDelegate.addReference(y,_.targetId,E))).next((()=>ne.forEach(_.Is,(E=>g.persistence.referenceDelegate.removeReference(y,_.targetId,E)))))))))}catch(y){if(!rl(y))throw y;fe(Vg,"Failed to update sequence numbers: "+y)}for(const y of f){const _=y.targetId;if(!y.fromCache){const E=g.vs.get(_),I=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(I);g.vs=g.vs.insert(_,T)}}})(r.localStore,o))}async function ND(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){fe(qg,"User change. New user:",e.toKey());const r=await eS(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new he(Z.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eu(t,r.Ns)}}function PD(n,e){const t=Re(n),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let s=Fe();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function xS(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CD.bind(null,e),e.Pu.J_=pD.bind(null,e.eventManager),e.Pu.yu=gD.bind(null,e.eventManager),e}function DD(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AD.bind(null,e),e}class Id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return O2(this.persistence,new D2,e.initialUser,this.serializer)}Cu(e){return new ZE(Og.Vi,this.serializer)}Du(e){return new $2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Id.provider={build:()=>new Id};class jD extends Id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ye(this.persistence.referenceDelegate instanceof Sd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new v2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new ZE((r=>Sd.Vi(r,t)),this.serializer)}}class Kp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>cx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ND.bind(null,this.syncEngine),await dD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mD})()}createDatastore(e){const t=tf(e.databaseInfo.databaseId),r=G2(e.databaseInfo);return Z2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,c){return new tD(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>cx(this.syncEngine,t,0)),(function(){return rx.v()?new rx:new W2})())}createSyncEngine(e,t){return(function(s,o,l,c,h,f,g){const y=new xD(s,o,l,c,h,f);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Re(t);fe(Io,"RemoteStore shutting down."),r.Ea.add(5),await Zc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Kp.provider={build:()=>new Kp};class wS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ni="FirestoreClient";class MD{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=tn.UNAUTHENTICATED,this.clientId=Eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{fe(Ni,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(fe(Ni,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function ap(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Ni,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await eS(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function hx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OD(n);fe(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ix(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>ix(e.remoteStore,s))),n._onlineComponents=e}async function OD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Ni,"Using user provided OfflineComponentProvider");try{await ap(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Z.FAILED_PRECONDITION||s.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;To("Error using user provided cache. Falling back to memory cache: "+t),await ap(n,new Id)}}else fe(Ni,"Using default OfflineComponentProvider"),await ap(n,new jD(void 0));return n._offlineComponents}async function bS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Ni,"Using user provided OnlineComponentProvider"),await hx(n,n._uninitializedComponentsProvider._online)):(fe(Ni,"Using default OnlineComponentProvider"),await hx(n,new Kp))),n._onlineComponents}function LD(n){return bS(n).then((e=>e.syncEngine))}async function ES(n){const e=await bS(n),t=e.eventManager;return t.onListen=wD.bind(null,e.syncEngine),t.onUnlisten=SD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=bD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TD.bind(null,e.syncEngine),t}function VD(n,e,t={}){const r=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const g=new wS({next:_=>{g.Nu(),l.enqueueAndForget((()=>hS(o,y)));const E=_.docs.has(c);!E&&_.fromCache?f.reject(new he(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&h&&h.source==="server"?f.reject(new he(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new dS(Ag(c.path),g,{includeMetadataChanges:!0,Ka:!0});return uS(o,y)})(await ES(n),n.asyncQueue,e,t,r))),r.promise}function FD(n,e,t={}){const r=new bs;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,f){const g=new wS({next:_=>{g.Nu(),l.enqueueAndForget((()=>hS(o,y))),_.fromCache&&h.source==="server"?f.reject(new he(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),y=new dS(c,g,{includeMetadataChanges:!0,Ka:!0});return uS(o,y)})(await ES(n),n.asyncQueue,e,t,r))),r.promise}function UD(n,e){const t=new bs;return n.asyncQueue.enqueueAndForget((async()=>ID(await LD(n),e,t))),t.promise}function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const zD="ComponentProvider",dx=new Map;function BD(n,e,t,r,s){return new lP(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,SS(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}const TS="firestore.googleapis.com",fx=!0;class mx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=fx}else this.host=e.host,this.ssl=e.ssl??fx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g2)throw new he(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new zN;switch(r.type){case"firstParty":return new HN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=dx.get(t);r&&(fe(zD,"Removing Datastore"),dx.delete(t),r.terminate())})(this),Promise.resolve()}}function $D(n,e,t,r={}){n=ur(n,sf);const s=Ja(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(hb(`https://${c}`),db("Firestore",!0)),o.host!==TS&&o.host!==c&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:s,emulatorOptions:r};if(!Ss(h,l)&&(n._setSettings(h),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=tn.MOCK_USER;else{f=QC(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new he(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new tn(y)}n._authCredentials=new BN(new lE(f,g))}}class Po{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Po(this.firestore,e,this._query)}}class wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Qc(t,wt._jsonSchema))return new wt(e,r||null,new xe(tt.fromString(t.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:kt("string",wt._jsonSchemaVersion),referencePath:kt("string")};class Ei extends Po{constructor(e,t,r){super(e,t,Ag(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new xe(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function sn(n,e,...t){if(n=Mt(n),cE("collection","path",e),n instanceof sf){const r=tt.fromString(e,...t);return C_(r),new Ei(n,null,r)}{if(!(n instanceof wt||n instanceof Ei))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return C_(r),new Ei(n.firestore,null,r)}}function ct(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Eg.newId()),cE("doc","path",e),n instanceof sf){const r=tt.fromString(e,...t);return I_(r),new wt(n,null,new xe(r))}{if(!(n instanceof wt||n instanceof Ei))throw new he(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tt.fromString(e,...t));return I_(r),new wt(n.firestore,n instanceof Ei?n.converter:null,new xe(r))}}const px="AsyncQueue";class gx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nS(this,"async_queue_retry"),this._c=()=>{const r=op();r&&fe(px,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=op();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=op();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new bs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!rl(e))throw e;fe(px,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Cs("INTERNAL UNHANDLED ERROR: ",yx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=$g.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Te(47125,{Pc:yx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function yx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Do extends sf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new gx,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gx(e),this._firestoreClient=void 0,await e}}}function WD(n,e){const t=typeof n=="object"?n:gb(),r=typeof n=="string"?n:vd,s=dg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=GC("firestore");o&&$D(s,...o)}return s}function Gg(n){if(n._terminated)throw new he(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HD(n),n._firestoreClient}function HD(n){const e=n._freezeSettings(),t=BD(n._databaseId,n._app?.options.appId||"",n._persistenceKey,n._app?.options.apiKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(Gt.fromBase64String(e))}catch(t){throw new he(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Qc(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:kt("string",qn._jsonSchemaVersion),bytes:kt("string")};class Yg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tu{constructor(e){this._methodName=e}}class $r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$r._jsonSchemaVersion}}static fromJSON(e){if(Qc(e,$r._jsonSchema))return new $r(e.latitude,e.longitude)}}$r._jsonSchemaVersion="firestore/geoPoint/1.0",$r._jsonSchema={type:kt("string",$r._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};class ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Qc(e,ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ar(e.vectorValues);throw new he(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ar._jsonSchemaVersion="firestore/vectorValue/1.0",ar._jsonSchema={type:kt("string",ar._jsonSchemaVersion),vectorValues:kt("object")};const qD=/^__.*__$/;class KD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xc(e,this.data,t,this.fieldTransforms)}}class IS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{dataSource:n})}}class of{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new of({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Cd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(CS(this.dataSource)&&qD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class GD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||tf(e)}createContext(e,t,r,s=!1){return new of({dataSource:e,methodName:t,targetDoc:r,path:Kt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function af(n){const e=n._freezeSettings(),t=tf(n._databaseId);return new GD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kS(n,e,t,r,s,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,s);Jg("Data must be an object, but it was:",l,r);const c=RS(r,l);let h,f;if(o.merge)h=new jn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const y of o.mergeFields){const _=Co(e,y,t);if(!l.contains(_))throw new he(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);DS(g,_)||g.push(_)}h=new jn(g),f=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,f=l.fieldTransforms;return new KD(new vn(c),h,f)}class lf extends tu{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function AS(n,e,t){return new of({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qg extends tu{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=AS(this,e,!0),r=this.Ac.map((o=>jo(o,t))),s=new Wa(r);return new VE(e.path,s)}isEqual(e){return e instanceof Qg&&Ss(this.Ac,e.Ac)}}class Xg extends tu{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=AS(this,e,!0),r=this.Ac.map((o=>jo(o,t))),s=new Ha(r);return new VE(e.path,s)}isEqual(e){return e instanceof Xg&&Ss(this.Ac,e.Ac)}}function YD(n,e,t,r){const s=n.createContext(1,e,t);Jg("Data must be an object, but it was:",s,r);const o=[],l=vn.empty();ji(r,((h,f)=>{const g=PS(e,h,t);f=Mt(f);const y=s.childContextForFieldPath(g);if(f instanceof lf)o.push(g);else{const _=jo(f,y);_!=null&&(o.push(g),l.set(g,_))}}));const c=new jn(o);return new IS(l,c,s.fieldTransforms)}function QD(n,e,t,r,s,o){const l=n.createContext(1,e,t),c=[Co(e,r,t)],h=[s];if(o.length%2!=0)throw new he(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)c.push(Co(e,o[_])),h.push(o[_+1]);const f=[],g=vn.empty();for(let _=c.length-1;_>=0;--_)if(!DS(f,c[_])){const E=c[_];let I=h[_];I=Mt(I);const T=l.childContextForFieldPath(E);if(I instanceof lf)f.push(E);else{const C=jo(I,T);C!=null&&(f.push(E),g.set(E,C))}}const y=new jn(f);return new IS(g,y,l.fieldTransforms)}function XD(n,e,t,r=!1){return jo(t,n.createContext(r?4:3,e))}function jo(n,e){if(NS(n=Mt(n)))return Jg("Unsupported field value:",e,n),RS(n,e);if(n instanceof tu)return(function(r,s){if(!CS(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let h=jo(c,s.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ot.fromDate(r);return{timestampValue:Ed(s.serializer,o)}}if(r instanceof ot){const o=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ed(s.serializer,o)}}if(r instanceof $r)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:WE(s.serializer,r._byteString)};if(r instanceof wt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ar)return(function(l,c){const h=l instanceof ar?l.toArray():l;return{mapValue:{fields:{[vE]:{stringValue:_E},[_d]:{arrayValue:{values:h.map((g=>{if(typeof g!="number")throw c.createError("VectorValues must only contain numeric values.");return Rg(c.serializer,g)}))}}}}}})(r,s);if(XE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qd(r)}`)})(n,e)}function RS(n,e){const t={};return dE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(n,((r,s)=>{const o=jo(s,e.childContextForField(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function NS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof $r||n instanceof qn||n instanceof wt||n instanceof tu||n instanceof ar||XE(n))}function Jg(n,e,t){if(!NS(t)||!uE(t)){const r=qd(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Co(n,e,t){if((e=Mt(e))instanceof Yg)return e._internalPath;if(typeof e=="string")return PS(n,e);throw Cd("Field path arguments must be of type string or ",n,!1,void 0,t)}const JD=new RegExp("[~\\*/\\[\\]]");function PS(n,e,t){if(e.search(JD)>=0)throw Cd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yg(...e.split("."))._internalPath}catch{throw Cd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cd(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new he(Z.INVALID_ARGUMENT,c+n+h)}function DS(n,e){return n.some((t=>t.isEqual(e)))}class ZD{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ji(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[_d].arrayValue?.values?.map((r=>xt(r.doubleValue)));return new ar(t)}convertGeoPoint(e){return new $r(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Yd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=Ci(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tt.fromString(e);Ye(QE(r),9688,{name:e});const s=new Mc(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return s.isEqual(t)||Cs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class jS extends ZD{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function ej(...n){return new Qg("arrayUnion",n)}function tj(...n){return new Xg("arrayRemove",n)}const vx="@firebase/firestore",_x="4.11.0";class MS{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Co("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nj extends MS{data(){return super.data()}}function rj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zg{}class OS extends Zg{}function cf(n,e,...t){let r=[];e instanceof Zg&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((h=>h instanceof ey)).length,c=o.filter((h=>h instanceof uf)).length;if(l>1||l>0&&c>0)throw new he(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class uf extends OS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new uf(e,t,r)}_apply(e){const t=this._parse(e);return VS(e._query,t),new Po(e.firestore,e.converter,Lp(e._query,t))}_parse(e){const t=af(e.firestore);return(function(o,l,c,h,f,g,y){let _;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){wx(y,g);const I=[];for(const T of y)I.push(xx(h,o,T));_={arrayValue:{values:I}}}else _=xx(h,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||wx(y,g),_=XD(c,l,y,g==="in"||g==="not-in");return Ct.create(f,g,_)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function LS(n,e,t){const r=e,s=Co("where",n);return uf._create(s,r,t)}class ey extends Zg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ey(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:hr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const c=o.getFlattenedFilters();for(const h of c)VS(l,h),l=Lp(l,h)})(e._query,t),new Po(e.firestore,e.converter,Lp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ty extends OS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ty(e,t)}_apply(e){const t=(function(s,o,l){if(s.startAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(o,l)})(e._query,this._field,this._direction);return new Po(e.firestore,e.converter,IP(e._query,t))}}function ny(n,e="asc"){const t=e,r=Co("orderBy",n);return ty._create(r,t)}function xx(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new he(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&t.indexOf("/")!==-1)throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tt.fromString(t));if(!xe.isDocumentKey(r))throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return M_(n,new xe(r))}if(t instanceof wt)return M_(n,t._key);throw new he(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qd(t)}.`)}function wx(n,e){if(!Array.isArray(n)||n.length===0)throw new he(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VS(n,e){const t=(function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function FS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends MS{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Co("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:kt("string",_o._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class td extends _o{data(e={}){return super.data(e)}}class Oa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new yc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new td(this._firestore,this._userDataWriter,r.key,r,new yc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const h=new td(s._firestore,s._userDataWriter,c.doc.key,c.doc,new yc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new td(s._firestore,s._userDataWriter,c.doc.key,c.doc,new yc(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:sj(c.type),doc:h,oldIndex:f,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:n})}}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:kt("string",Oa._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};function nu(n){n=ur(n,wt);const e=ur(n.firestore,Do),t=Gg(e);return VD(t,n._key).then((r=>ij(e,n,r)))}function dr(n){n=ur(n,Po);const e=ur(n.firestore,Do),t=Gg(e),r=new jS(e);return rj(n._query),FD(t,n._query).then((s=>new Oa(e,r,n,s)))}function kd(n,e,t){n=ur(n,wt);const r=ur(n.firestore,Do),s=FS(n.converter,e,t),o=af(r);return hf(r,[kS(o,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Kn.none())])}function Wr(n,e,t,...r){n=ur(n,wt);const s=ur(n.firestore,Do),o=af(s);let l;return l=typeof(e=Mt(e))=="string"||e instanceof Yg?QD(o,"updateDoc",n._key,e,t,r):YD(o,"updateDoc",n._key,e),hf(s,[l.toMutation(n._key,Kn.exists(!0))])}function ru(n){return hf(ur(n.firestore,Do),[new Ng(n._key,Kn.none())])}function su(n,e){const t=ur(n.firestore,Do),r=ct(n),s=FS(n.converter,e),o=af(n.firestore);return hf(t,[kS(o,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Kn.exists(!1))]).then((()=>r))}function hf(n,e){const t=Gg(n);return UD(t,e)}function ij(n,e,t){const r=t.docs.get(e._key),s=new jS(n);return new _o(n,s,e._key,r,new yc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){UN(Za),Fa(new wo("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Do(new $N(r.getProvider("auth-internal")),new qN(l,r.getProvider("app-check-internal")),cP(l,s),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),wi(vx,_x,e),wi(vx,_x,"esm2020")})();const oj={apiKey:"AIzaSyA4T595CXa5fNc0Esnk2nrWFYgHKb2tEAI",authDomain:"mauli-home-enterior.firebaseapp.com",projectId:"mauli-home-enterior",storageBucket:"mauli-home-enterior.appspot.com",messagingSenderId:"573187988410",appId:"1:573187988410:web:45eb85327e7efdff901b83"},US=pb(oj),Lr=eE(US),je=WD(US),zS=N.createContext(),cn=()=>N.useContext(zS),BS=({children:n})=>{const[e,t]=N.useState(null),[r,s]=N.useState(!0),[o,l]=N.useState(null),c=async I=>{try{const C=(await $b(Lr,I.email,I.password)).user;await f_(C,{displayName:I.name||I.username||""});const V=ct(je,"users",C.uid);return await kd(V,{uid:C.uid,name:I.name||I.username||"",email:I.email,phone:I.mobile||I.phone||"",role:"customer",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await _(C.uid),C}catch(T){throw console.error("Registration error:",T),T}},h=async(I,T)=>{try{return(await bR(Lr,I,T)).user}catch(C){throw console.error("Login error:",C),C}},f=async()=>{try{await _g(Lr),l(null)}catch(I){throw console.error("Logout error:",I),I}},g=async I=>{try{await md(Lr,I)}catch(T){throw console.error("Reset password error:",T),T}},y=async(I,T)=>{try{const C=ct(je,"users",I);return await Wr(C,{...T,updatedAt:new Date().toISOString()}),l(V=>({...V,...T})),T.name&&e&&await f_(e,{displayName:T.name}),!0}catch(C){throw console.error("Update profile error:",C),C}},_=async I=>{try{console.log("Fetching user data for uid:",I);const T=await nu(ct(je,"users",I));if(T.exists()){const C=T.data();console.log("User data found:",C),l(C)}else{console.log("No user data found in Firestore for uid:",I);const C={uid:I,email:e?.email||"",name:e?.displayName||"",role:"customer",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await kd(ct(je,"users",I),C),console.log("Created default user data"),l(C)}catch(V){console.error("Error creating user data:",V),l(null)}}}catch(T){console.error("Error fetching user data:",T),l(null)}};N.useEffect(()=>IR(Lr,async T=>{console.log("Auth state changed:",T?.email),t(T),T?await _(T.uid):l(null),s(!1)}),[]);const E={currentUser:e,userData:o,login:h,register:c,logout:f,resetPassword:g,updateUserProfile:y,loading:r};return m.jsx(zS.Provider,{value:E,children:!r&&n})};let aj={data:""},lj=n=>{if(typeof window=="object"){let e=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(n||document.head).appendChild(e),e.firstChild}return n||aj},cj=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,uj=/\/\*[^]*?\*\/|  +/g,bx=/\n+/g,fi=(n,e)=>{let t="",r="",s="";for(let o in n){let l=n[o];o[0]=="@"?o[1]=="i"?t=o+" "+l+";":r+=o[1]=="f"?fi(l,o):o+"{"+fi(l,o[1]=="k"?"":e)+"}":typeof l=="object"?r+=fi(l,e?e.replace(/([^,])+/g,c=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,c):c?c+" "+h:h)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=fi.p?fi.p(o,l):o+":"+l+";")}return t+(e&&s?e+"{"+s+"}":s)+r},ds={},$S=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+$S(n[t]);return e}return n},hj=(n,e,t,r,s)=>{let o=$S(n),l=ds[o]||(ds[o]=(h=>{let f=0,g=11;for(;f<h.length;)g=101*g+h.charCodeAt(f++)>>>0;return"go"+g})(o));if(!ds[l]){let h=o!==n?n:(f=>{let g,y,_=[{}];for(;g=cj.exec(f.replace(uj,""));)g[4]?_.shift():g[3]?(y=g[3].replace(bx," ").trim(),_.unshift(_[0][y]=_[0][y]||{})):_[0][g[1]]=g[2].replace(bx," ").trim();return _[0]})(n);ds[l]=fi(s?{["@keyframes "+l]:h}:h,t?"":"."+l)}let c=t&&ds.g?ds.g:null;return t&&(ds.g=ds[l]),((h,f,g,y)=>{y?f.data=f.data.replace(y,h):f.data.indexOf(h)===-1&&(f.data=g?h+f.data:f.data+h)})(ds[l],e,r,c),l},dj=(n,e,t)=>n.reduce((r,s,o)=>{let l=e[o];if(l&&l.call){let c=l(t),h=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=h?"."+h:c&&typeof c=="object"?c.props?"":fi(c,""):c===!1?"":c}return r+s+(l??"")},"");function df(n){let e=this||{},t=n.call?n(e.p):n;return hj(t.unshift?t.raw?dj(t,[].slice.call(arguments,1),e.p):t.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):t,lj(e.target),e.g,e.o,e.k)}let WS,Gp,Yp;df.bind({g:1});let As=df.bind({k:1});function fj(n,e,t,r){fi.p=e,WS=n,Gp=t,Yp=r}function Oi(n,e){let t=this||{};return function(){let r=arguments;function s(o,l){let c=Object.assign({},o),h=c.className||s.className;t.p=Object.assign({theme:Gp&&Gp()},c),t.o=/ *go\d+/.test(h),c.className=df.apply(t,r)+(h?" "+h:"");let f=n;return n[0]&&(f=c.as||n,delete c.as),Yp&&f[0]&&Yp(c),WS(f,c)}return s}}var mj=n=>typeof n=="function",Ad=(n,e)=>mj(n)?n(e):n,pj=(()=>{let n=0;return()=>(++n).toString()})(),HS=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),gj=20,ry="default",qS=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:r}=e;return qS(n,{type:n.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...n,toasts:n.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let o=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},nd=[],KS={toasts:[],pausedAt:void 0,settings:{toastLimit:gj}},Vr={},GS=(n,e=ry)=>{Vr[e]=qS(Vr[e]||KS,n),nd.forEach(([t,r])=>{t===e&&r(Vr[e])})},YS=n=>Object.keys(Vr).forEach(e=>GS(n,e)),yj=n=>Object.keys(Vr).find(e=>Vr[e].toasts.some(t=>t.id===n)),ff=(n=ry)=>e=>{GS(e,n)},vj={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_j=(n={},e=ry)=>{let[t,r]=N.useState(Vr[e]||KS),s=N.useRef(Vr[e]);N.useEffect(()=>(s.current!==Vr[e]&&r(Vr[e]),nd.push([e,r]),()=>{let l=nd.findIndex(([c])=>c===e);l>-1&&nd.splice(l,1)}),[e]);let o=t.toasts.map(l=>{var c,h,f;return{...n,...n[l.type],...l,removeDelay:l.removeDelay||((c=n[l.type])==null?void 0:c.removeDelay)||n?.removeDelay,duration:l.duration||((h=n[l.type])==null?void 0:h.duration)||n?.duration||vj[l.type],style:{...n.style,...(f=n[l.type])==null?void 0:f.style,...l.style}}});return{...t,toasts:o}},xj=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||pj()}),iu=n=>(e,t)=>{let r=xj(e,n,t);return ff(r.toasterId||yj(r.id))({type:2,toast:r}),r.id},Pt=(n,e)=>iu("blank")(n,e);Pt.error=iu("error");Pt.success=iu("success");Pt.loading=iu("loading");Pt.custom=iu("custom");Pt.dismiss=(n,e)=>{let t={type:3,toastId:n};e?ff(e)(t):YS(t)};Pt.dismissAll=n=>Pt.dismiss(void 0,n);Pt.remove=(n,e)=>{let t={type:4,toastId:n};e?ff(e)(t):YS(t)};Pt.removeAll=n=>Pt.remove(void 0,n);Pt.promise=(n,e,t)=>{let r=Pt.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(s=>{let o=e.success?Ad(e.success,s):void 0;return o?Pt.success(o,{id:r,...t,...t?.success}):Pt.dismiss(r),s}).catch(s=>{let o=e.error?Ad(e.error,s):void 0;o?Pt.error(o,{id:r,...t,...t?.error}):Pt.dismiss(r)}),n};var wj=1e3,bj=(n,e="default")=>{let{toasts:t,pausedAt:r}=_j(n,e),s=N.useRef(new Map).current,o=N.useCallback((y,_=wj)=>{if(s.has(y))return;let E=setTimeout(()=>{s.delete(y),l({type:4,toastId:y})},_);s.set(y,E)},[]);N.useEffect(()=>{if(r)return;let y=Date.now(),_=t.map(E=>{if(E.duration===1/0)return;let I=(E.duration||0)+E.pauseDuration-(y-E.createdAt);if(I<0){E.visible&&Pt.dismiss(E.id);return}return setTimeout(()=>Pt.dismiss(E.id,e),I)});return()=>{_.forEach(E=>E&&clearTimeout(E))}},[t,r,e]);let l=N.useCallback(ff(e),[e]),c=N.useCallback(()=>{l({type:5,time:Date.now()})},[l]),h=N.useCallback((y,_)=>{l({type:1,toast:{id:y,height:_}})},[l]),f=N.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),g=N.useCallback((y,_)=>{let{reverseOrder:E=!1,gutter:I=8,defaultPosition:T}=_||{},C=t.filter(U=>(U.position||T)===(y.position||T)&&U.height),V=C.findIndex(U=>U.id===y.id),D=C.filter((U,H)=>H<V&&U.visible).length;return C.filter(U=>U.visible).slice(...E?[D+1]:[0,D]).reduce((U,H)=>U+(H.height||0)+I,0)},[t]);return N.useEffect(()=>{t.forEach(y=>{if(y.dismissed)o(y.id,y.removeDelay);else{let _=s.get(y.id);_&&(clearTimeout(_),s.delete(y.id))}})},[t,o]),{toasts:t,handlers:{updateHeight:h,startPause:c,endPause:f,calculateOffset:g}}},Ej=As`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Sj=As`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Tj=As`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ij=Oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ej} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Sj} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Tj} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Cj=As`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,kj=Oi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Cj} 1s linear infinite;
`,Aj=As`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Rj=As`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Nj=Oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Aj} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Rj} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Pj=Oi("div")`
  position: absolute;
`,Dj=Oi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jj=As`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mj=Oi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jj} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Oj=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?N.createElement(Mj,null,e):e:t==="blank"?null:N.createElement(Dj,null,N.createElement(kj,{...r}),t!=="loading"&&N.createElement(Pj,null,t==="error"?N.createElement(Ij,{...r}):N.createElement(Nj,{...r})))},Lj=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Vj=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Fj="0%{opacity:0;} 100%{opacity:1;}",Uj="0%{opacity:1;} 100%{opacity:0;}",zj=Oi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Bj=Oi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,$j=(n,e)=>{let t=n.includes("top")?1:-1,[r,s]=HS()?[Fj,Uj]:[Lj(t),Vj(t)];return{animation:e?`${As(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${As(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Wj=N.memo(({toast:n,position:e,style:t,children:r})=>{let s=n.height?$j(n.position||e||"top-center",n.visible):{opacity:0},o=N.createElement(Oj,{toast:n}),l=N.createElement(Bj,{...n.ariaProps},Ad(n.message,n));return N.createElement(zj,{className:n.className,style:{...s,...t,...n.style}},typeof r=="function"?r({icon:o,message:l}):N.createElement(N.Fragment,null,o,l))});fj(N.createElement);var Hj=({id:n,className:e,style:t,onHeightUpdate:r,children:s})=>{let o=N.useCallback(l=>{if(l){let c=()=>{let h=l.getBoundingClientRect().height;r(n,h)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return N.createElement("div",{ref:o,className:e,style:t},s)},qj=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},s=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:HS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...s}},Kj=df`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Rh=16,Gj=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:s,toasterId:o,containerStyle:l,containerClassName:c})=>{let{toasts:h,handlers:f}=bj(t,o);return N.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Rh,left:Rh,right:Rh,bottom:Rh,pointerEvents:"none",...l},className:c,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map(g=>{let y=g.position||e,_=f.calculateOffset(g,{reverseOrder:n,gutter:r,defaultPosition:e}),E=qj(y,_);return N.createElement(Hj,{id:g.id,key:g.id,onHeightUpdate:f.updateHeight,className:g.visible?Kj:"",style:E},g.type==="custom"?Ad(g.message,g):s?s(g):N.createElement(Wj,{toast:g,position:y}))}))},ve=Pt;const QS=N.createContext(),ol=()=>N.useContext(QS),Yj=({children:n})=>{const{currentUser:e}=cn(),[t,r]=N.useState([]),[s,o]=N.useState(!0),[l,c]=N.useState(!1),h=N.useCallback(async(D,U)=>{if(!(!D||l))try{await kd(ct(je,"carts",D),{items:U,updatedAt:new Date().toISOString()},{merge:!0}),console.log("Cart saved to Firebase for user:",D)}catch(H){console.error("Error saving cart to Firebase:",H),H.code==="permission-denied"&&(c(!0),ve.error("Cart sync disabled. Working offline."))}},[l]),f=N.useCallback(async D=>{if(!D||l)return[];try{const U=await nu(ct(je,"carts",D));if(U.exists())return console.log("Cart loaded from Firebase for user:",D),U.data().items||[]}catch(U){console.error("Error loading cart from Firebase:",U),U.code==="permission-denied"&&(c(!0),ve.error("Cart sync disabled. Working offline."))}return[]},[l]);N.useEffect(()=>{(async()=>{o(!0);try{if(e&&!l){const U=await f(e.uid);if(U.length>0)r(U),localStorage.setItem("cart",JSON.stringify(U));else{const H=localStorage.getItem("cart");if(H&&H!=="undefined"&&H!=="null")try{const O=JSON.parse(H);Array.isArray(O)&&O.length>0?(r(O),h(e.uid,O).catch(()=>{})):r([])}catch{r([])}else r([])}}else{const U=localStorage.getItem("cart");if(U&&U!=="undefined"&&U!=="null")try{const H=JSON.parse(U);r(Array.isArray(H)?H:[])}catch{r([])}else r([])}}catch(U){console.error("Error loading cart:",U),r([])}finally{o(!1)}})()},[e,l,f,h]),N.useEffect(()=>{const U=setTimeout(async()=>{try{t.length>0?localStorage.setItem("cart",JSON.stringify(t)):localStorage.removeItem("cart"),e&&!l&&await h(e.uid,t)}catch(H){console.error("Error in cart save effect:",H)}},500);return()=>clearTimeout(U)},[t,e,l,h]);const g=(D,U=1)=>{r(H=>{const O=Array.isArray(H)?H:[];return O.find(A=>A?.id===D.id)?(ve.success(`Added another ${D.name} to cart!`),O.map(A=>A.id===D.id?{...A,quantity:(A.quantity||0)+U}:A)):(ve.success(`${D.name} added to cart!`),[...O,{id:D.id,name:D.name,price:D.price,image:D.image||"",quantity:U}])})},y=(D,U)=>{if(U<1){_(D);return}r(H=>(Array.isArray(H)?H:[]).map(q=>q.id===D?{...q,quantity:U}:q))},_=D=>{r(U=>{const H=Array.isArray(U)?U:[],O=H.find(q=>q.id===D);return O&&ve.success(`${O.name} removed from cart`),H.filter(q=>q.id!==D)})},E=()=>{r([]),localStorage.removeItem("cart"),e&&!l&&h(e.uid,[]).catch(()=>{}),ve.success("Cart cleared")},I=()=>(Array.isArray(t)?t:[]).reduce((U,H)=>{const O=Number(H?.price)||0,q=Number(H?.quantity)||0;return U+O*q},0),T=()=>(Array.isArray(t)?t:[]).reduce((U,H)=>U+(Number(H?.quantity)||0),0),C=async D=>{if(!e)throw ve.error("You must be logged in to place an order"),new Error("Not logged in");const U=Array.isArray(t)?t:[];if(U.length===0)throw ve.error("Your cart is empty"),new Error("Cart empty");if(D.paymentMethod==="razorpay"&&D.paymentStatus!=="paid")throw ve.error("Payment not completed"),new Error("Payment not completed");o(!0);try{const H={userId:e.uid,customerName:D.name||e.displayName||"Customer",customerEmail:e.email,customerPhone:D.phone||"",items:U.map(q=>({id:q.id,name:q.name,price:Number(q.price)||0,quantity:Number(q.quantity)||1,image:q.image||""})),totalAmount:I(),orderStatus:"pending",paymentStatus:D.paymentStatus||"pending",paymentMethod:D.paymentMethod||"cod",paymentId:D.paymentId||null,shippingAddress:`${D.address||""}, ${D.city||""} - ${D.pincode||""}`,orderDate:new Date().toISOString(),notes:D.notes||"",createdAt:new Date().toISOString(),isPaidOnline:D.paymentMethod==="razorpay"&&D.paymentStatus==="paid"};console.log("Placing order:",H);const O=await su(sn(je,"orders"),H);return console.log("Order placed with ID:",O.id),E(),ve.success("Order placed successfully!"),{id:O.id,...H}}catch(H){throw console.error("Error placing order:",H),ve.error("Error placing order: "+H.message),H}finally{o(!1)}},V={cartItems:Array.isArray(t)?t:[],addToCart:g,updateQuantity:y,removeFromCart:_,clearCart:E,getCartTotal:I,getItemCount:T,placeOrder:C,loading:s,firebaseError:l};return m.jsx(QS.Provider,{value:V,children:n})},XS=N.createContext(),sy=()=>N.useContext(XS),JS=({children:n})=>{const{currentUser:e}=cn(),[t,r]=N.useState([]),[s,o]=N.useState(!0);N.useEffect(()=>{e?l():(r([]),o(!1))},[e]);const l=async()=>{try{o(!0);const _=ct(je,"wishlists",e.uid),E=await nu(_);E.exists()?r(E.data().items||[]):(await kd(_,{items:[],userId:e.uid}),r([]))}catch(_){console.error("Error fetching wishlist:",_),ve.error("Failed to load wishlist")}finally{o(!1)}},y={wishlistItems:t,loading:s,addToWishlist:async _=>{if(!e)return ve.error("Please login to save items to wishlist"),!1;try{const E=ct(je,"wishlists",e.uid);if(t.some(T=>T.id===_.id))return ve.error("Item already in wishlist"),!1;const I={id:_.id,name:_.name,price:_.price,image:_.image,category:_.category,addedAt:new Date().toISOString()};return await Wr(E,{items:ej(I)}),r(T=>[...T,I]),ve.success(`${_.name} added to wishlist!`),!0}catch(E){return console.error("Error adding to wishlist:",E),ve.error("Failed to add to wishlist"),!1}},removeFromWishlist:async _=>{if(e)try{const E=ct(je,"wishlists",e.uid),I=t.find(T=>T.id===_);I&&(await Wr(E,{items:tj(I)}),r(T=>T.filter(C=>C.id!==_)),ve.success("Removed from wishlist"))}catch(E){console.error("Error removing from wishlist:",E),ve.error("Failed to remove from wishlist")}},isInWishlist:_=>t.some(E=>E.id===_),clearWishlist:async()=>{if(e)try{const _=ct(je,"wishlists",e.uid);await Wr(_,{items:[]}),r([]),ve.success("Wishlist cleared")}catch(_){console.error("Error clearing wishlist:",_),ve.error("Failed to clear wishlist")}}};return m.jsx(XS.Provider,{value:y,children:n})};function Nn(){const[n,e]=N.useState(!1),{logout:t,currentUser:r,userData:s}=cn(),{getItemCount:o}=ol(),{wishlistItems:l}=sy(),c=ln(),h=o(),f=l.length,g=async()=>{await t(),c("/login")};return m.jsxs("nav",{className:"bg-neutral-900 text-white shadow-md sticky top-0 z-50",children:[m.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex justify-between items-center",children:[m.jsx(De,{to:"/",className:"text-2xl font-bold tracking-wide text-amber-500 hover:text-amber-400 transition",children:"Mauli Interior"}),m.jsxs("div",{className:"hidden md:flex items-center space-x-8 text-lg",children:[m.jsx(De,{className:"hover:text-amber-400 transition",to:"/",children:"Home"}),m.jsx(De,{className:"hover:text-amber-400 transition",to:"/services",children:"Services"}),m.jsx(De,{className:"hover:text-amber-400 transition",to:"/products",children:"Products"}),m.jsx(De,{className:"hover:text-amber-400 transition",to:"/about",children:"About"}),m.jsx(De,{className:"hover:text-amber-400 transition",to:"/contact",children:"Contact"}),r&&m.jsxs(De,{to:"/wishlist",className:"relative hover:text-amber-400 transition",children:[m.jsx("span",{className:"text-2xl",children:""}),f>0&&m.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:f})]}),m.jsxs(De,{to:"/cart",className:"relative hover:text-amber-400 transition",children:[m.jsx("span",{className:"text-2xl",children:""}),h>0&&m.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:h})]}),r?m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx(De,{to:s?.role==="admin"?"/admin":"/dashboard",className:"hover:text-amber-400 transition font-medium",children:s?.role==="admin"?"Admin":"Dashboard"}),m.jsx("button",{onClick:g,className:"bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-sm font-medium transition",children:"Logout"})]}):m.jsx(De,{to:"/login",className:"bg-amber-500 hover:bg-amber-600 px-4 py-2 rounded-lg text-sm font-medium transition",children:"Login"})]}),m.jsx("button",{className:"md:hidden text-2xl hover:text-amber-400 transition",onClick:()=>e(!n),children:n?"":""})]}),r&&s?.role==="admin"&&m.jsx("div",{className:"absolute top-0 right-0 bg-amber-500 text-white text-xs px-2 py-1 rounded-bl-lg",children:"Admin"}),n&&m.jsxs("div",{className:"md:hidden bg-neutral-800 px-6 py-4 space-y-4 text-lg border-t border-gray-700",children:[m.jsx(De,{className:"block hover:text-amber-400 transition",to:"/",onClick:()=>e(!1),children:"Home"}),m.jsx(De,{className:"block hover:text-amber-400 transition",to:"/services",onClick:()=>e(!1),children:"Services"}),m.jsx(De,{className:"block hover:text-amber-400 transition",to:"/products",onClick:()=>e(!1),children:"Products"}),r&&m.jsxs(De,{className:"block hover:text-amber-400 transition",to:"/wishlist",onClick:()=>e(!1),children:["Wishlist ",f>0&&`(${f})`]}),m.jsxs(De,{className:"block hover:text-amber-400 transition",to:"/cart",onClick:()=>e(!1),children:["Cart ",h>0&&`(${h})`]}),m.jsx(De,{className:"block hover:text-amber-400 transition",to:"/about",onClick:()=>e(!1),children:"About"}),m.jsx(De,{className:"block hover:text-amber-400 transition",to:"/contact",onClick:()=>e(!1),children:"Contact"}),r?m.jsxs(m.Fragment,{children:[m.jsx(De,{to:s?.role==="admin"?"/admin":"/dashboard",className:"block hover:text-amber-400 transition",onClick:()=>e(!1),children:s?.role==="admin"?"Admin Panel":"Dashboard"}),m.jsx("button",{onClick:()=>{g(),e(!1)},className:"w-full text-left bg-red-500 hover:bg-red-600 px-4 py-2 rounded-lg text-sm font-medium transition text-white",children:"Logout"})]}):m.jsx(De,{to:"/login",className:"block bg-amber-500 hover:bg-amber-600 px-4 py-2 rounded-lg text-center font-medium transition text-white",onClick:()=>e(!1),children:"Login"})]})]})}function Pn(){return m.jsxs("footer",{className:"bg-neutral-900 text-gray-300 pt-12 pb-6",children:[m.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-10",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-amber-500 mb-4",children:"Mauli Interior"}),m.jsx("p",{className:"text-sm leading-6",children:"We specialize in modern and luxury interior design solutions for homes and offices. Our mission is to transform your dream space into reality with elegance and perfection."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Quick Links"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsx("li",{children:m.jsx(De,{to:"/",className:"hover:text-amber-400",children:"Home"})}),m.jsx("li",{children:m.jsx(De,{to:"/services",className:"hover:text-amber-400",children:"Services"})}),m.jsx("li",{children:m.jsx(De,{to:"/products",className:"hover:text-amber-400",children:"Products"})}),m.jsx("li",{children:m.jsx(De,{to:"/about",className:"hover:text-amber-400",children:"About"})}),m.jsx("li",{children:m.jsx(De,{to:"/contact",className:"hover:text-amber-400",children:"Contact"})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Contact Us"}),m.jsx("p",{children:" +91 9834000290"}),m.jsx("p",{children:" digambarg80@gmail.com"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold mb-4 text-white",children:"Our Address"}),m.jsxs("p",{children:["Mauli Interior Design Studio ",m.jsx("br",{}),"Jawahar Colony, Chhatrapati Sambhaji Nagar ",m.jsx("br",{}),"Maharashtra, India - 431001"]})]})]}),m.jsx("div",{className:"border-t border-gray-700 mt-10 pt-6 text-center text-sm text-gray-500",children:" 2026 Mauli Interior. All rights reserved."})]})}function ZS(){return m.jsxs("div",{className:"py-16 px-6 bg-gray-100",children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Our Services"}),m.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:[m.jsx(lp,{title:"Living Room Design",img:"https://images.unsplash.com/photo-1600210492493-0946911123ea"}),m.jsx(lp,{title:"Bedroom Design",img:"https://images.unsplash.com/photo-1615874959474-d609969a20ed"}),m.jsx(lp,{title:"Modular Kitchen",img:"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c"})]})]})}function lp({title:n,img:e}){return m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:scale-105 transition duration-300",children:[m.jsx("img",{src:e,alt:n,className:"h-64 w-full object-cover"}),m.jsx("div",{className:"p-6 text-center",children:m.jsx("h2",{className:"text-xl font-semibold",children:n})})]})}const Ex=["https://images.unsplash.com/photo-1618221195710-dd6b41faaea6","https://images.unsplash.com/photo-1600210492493-0946911123ea","https://images.unsplash.com/photo-1600607687939-ce8a6c25118c"];function Qj(){const[n,e]=N.useState(0),[t,r]=N.useState([]),[s,o]=N.useState(6),[l,c]=N.useState(!0);N.useEffect(()=>{const _=setInterval(()=>{e(E=>(E+1)%Ex.length)},3e3);return()=>clearInterval(_)},[]),N.useEffect(()=>{(async()=>{try{const I=(await dr(sn(je,"products"))).docs.map(T=>({id:T.id,...T.data()}));r(I)}catch(E){console.error("Error fetching products:",E)}finally{c(!1)}})()},[]);const h=t.slice(0,s),f=t.length>s,g=()=>{o(_=>_+6)},y=()=>{o(6),document.getElementById("products-section").scrollIntoView({behavior:"smooth"})};return m.jsxs("div",{className:"w-full",children:[m.jsxs("div",{className:"h-screen bg-cover bg-center relative transition-all duration-700",style:{backgroundImage:`url(${Ex[n]})`},children:[m.jsx("div",{className:"absolute inset-0 bg-black/60"}),m.jsxs("div",{className:"relative z-10 flex flex-col justify-center items-center h-full text-white text-center px-4",children:[m.jsx("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:"Luxury Interior Design"}),m.jsx("p",{className:"text-lg md:text-xl mb-8 text-gray-300",children:"Transforming Spaces Into Dream Homes"}),m.jsx(De,{to:"/services",className:"bg-amber-500 hover:bg-amber-600 px-6 py-3 text-lg rounded-lg transition duration-300",children:"Explore Services"})]})]}),m.jsx(ZS,{}),m.jsx("div",{id:"products-section",className:"py-16 px-10 bg-gray-100",children:m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsx("h2",{className:"text-3xl font-bold text-center mb-10",children:"Our Products"}),l?m.jsx("div",{className:"text-center py-12",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent mx-auto"})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map(_=>m.jsxs("div",{className:"bg-white p-5 rounded-lg shadow hover:shadow-lg transition transform hover:-translate-y-1",children:[m.jsx("img",{src:_.image||"https://via.placeholder.com/400x300?text=Mauli+Interior",alt:_.name,className:"h-48 w-full object-cover rounded"}),m.jsx("h3",{className:"text-xl font-semibold mt-4",children:_.name}),m.jsxs("p",{className:"text-gray-600 mt-2",children:[" ",_.price]}),m.jsx(De,{to:"/products",state:{selectedProduct:_},className:"mt-4 inline-block bg-amber-500 text-white px-4 py-2 rounded hover:bg-amber-600 transition w-full text-center",children:"View Details"})]},_.id))}),m.jsxs("div",{className:"flex justify-center mt-10 gap-4",children:[f&&m.jsx("button",{onClick:g,className:"bg-amber-500 hover:bg-amber-600 text-white px-8 py-3 rounded-lg font-medium transition transform hover:scale-105",children:"View More Products"}),s>6&&m.jsx("button",{onClick:y,className:"bg-gray-500 hover:bg-gray-600 text-white px-8 py-3 rounded-lg font-medium transition transform hover:scale-105",children:"Show Less"})]}),m.jsxs("p",{className:"text-center text-gray-500 mt-4",children:["Showing ",h.length," of ",t.length," products"]})]})]})})]})}function Xj(){return m.jsxs("div",{className:"py-16 px-6 max-w-6xl mx-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"About Us"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-10 items-center",children:[m.jsx("img",{src:"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c",alt:"about",className:"rounded-xl shadow-lg"}),m.jsx("p",{className:"text-lg text-gray-600",children:"Mauli Interior is a professional interior design company providing modern and luxury design solutions for homes and offices. We transform ideas into beautiful living spaces."})]})]})}function Jj(){const[n,e]=N.useState({name:"",email:"",message:""}),[t,r]=N.useState(!1),s=l=>{e({...n,[l.target.name]:l.target.value})},o=async l=>{if(l.preventDefault(),r(!0),!n.name||!n.email||!n.message){ve.error("Please fill all fields"),r(!1);return}try{const c=await su(sn(je,"contacts"),{name:n.name,email:n.email,message:n.message,createdAt:new Date().toISOString(),read:!1});console.log("Contact saved with ID:",c.id),ve.success("Message sent successfully!"),e({name:"",email:"",message:""})}catch(c){console.error("Error sending message:",c),ve.error("Error sending message: "+c.message)}finally{r(!1)}};return m.jsxs("div",{className:"py-16 px-6 max-w-xl mx-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-8",children:"Contact Us"}),m.jsxs("form",{onSubmit:o,className:"space-y-6",children:[m.jsx("input",{type:"text",name:"name",placeholder:"Your Name",value:n.name,onChange:s,className:"w-full border p-3 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:!0}),m.jsx("input",{type:"email",name:"email",placeholder:"Your Email",value:n.email,onChange:s,className:"w-full border p-3 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:!0}),m.jsx("textarea",{name:"message",placeholder:"Your Message",value:n.message,onChange:s,className:"w-full border p-3 rounded focus:ring-2 focus:ring-amber-500 focus:border-transparent",rows:"5",required:!0}),m.jsx("button",{type:"submit",disabled:t,className:"w-full bg-amber-500 hover:bg-amber-600 text-white p-3 rounded transition disabled:opacity-50",children:t?"Sending...":"Send Message"})]})]})}const e1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const Zj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const eM=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const Sx=n=>{const e=eM(n);return e.charAt(0).toUpperCase()+e.slice(1)};var tM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const nM=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const rM=N.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>N.createElement("svg",{ref:h,...tM,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:e1("lucide",s),...!o&&!nM(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,g])=>N.createElement(f,g)),...Array.isArray(o)?o:[o]]));const Li=(n,e)=>{const t=N.forwardRef(({className:r,...s},o)=>N.createElement(rM,{ref:o,iconNode:e,className:e1(`lucide-${Zj(Sx(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Sx(n),t};const sM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],iM=Li("arrow-right",sM);const oM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aM=Li("circle-check-big",oM);const lM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tx=Li("eye",lM);const cM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ix=Li("eye-off",cM);const uM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cx=Li("lock",uM);const hM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],dM=Li("mail",hM);const fM=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mM=Li("phone",fM);const pM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gM=Li("user",pM);function yM(){const n=ln(),{register:e}=cn(),[t,r]=N.useState({username:"",email:"",mobile:"",password:"",confirmPassword:""}),[s,o]=N.useState(!1),[l,c]=N.useState(!1),[h,f]=N.useState({}),[g,y]=N.useState(!1),[_,E]=N.useState(!1),I=O=>/^[6-9]\d{9}$/.test(O),T=O=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O),C=O=>{const q=/[A-Z]/.test(O),A=/[a-z]/.test(O),k=/\d/.test(O),P=/[!@#$%^&*(),.?":{}|<>]/.test(O);return{isValid:O.length>=8&&q&&A&&k,strength:{length:O.length>=8,upperCase:q,lowerCase:A,number:k,specialChar:P}}},V=()=>{const O={};return t.username.trim()?t.username.length<3?O.username="Username must be at least 3 characters":t.username.length>20&&(O.username="Username must be less than 20 characters"):O.username="Username is required",t.email?T(t.email)||(O.email="Please enter a valid email"):O.email="Email is required",t.mobile?I(t.mobile)||(O.mobile="Enter a valid 10-digit Indian mobile number starting with 6-9"):O.mobile="Mobile number is required",t.password?C(t.password).isValid||(O.password="Password must be at least 8 characters with uppercase, lowercase, and numbers"):O.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(O.confirmPassword="Passwords do not match"):O.confirmPassword="Please confirm your password",_||(O.terms="You must agree to the terms and conditions"),f(O),Object.keys(O).length===0},D=O=>{const{name:q,value:A}=O.target;if(q==="mobile"){const k=A.replace(/\D/g,"");k.length<=10&&r({...t,[q]:k})}else r({...t,[q]:A});h[q]&&f({...h,[q]:""})},U=async O=>{if(O.preventDefault(),!!V()){y(!0);try{await e({username:t.username,email:t.email,mobile:t.mobile,password:t.password}),alert("Registration Successful! Please check your email for verification."),n("/login")}catch(q){alert(q.message||"Registration failed. Please try again.")}finally{y(!1)}}},H=t.password?C(t.password):null;return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-100 p-4",children:m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md transform transition-all hover:scale-[1.02]",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Account"}),m.jsx("p",{className:"text-gray-600",children:"Join us today! Fill in your details below."})]}),m.jsxs("form",{onSubmit:U,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Username ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx(gM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"text",name:"username",value:t.username,onChange:D,placeholder:"Choose a username",className:`w-full pl-10 pr-3 py-3 border ${h.username?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all`})]}),h.username&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.username})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx(dM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"email",name:"email",value:t.email,onChange:D,placeholder:"Enter your email",className:`w-full pl-10 pr-3 py-3 border ${h.email?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all`})]}),h.email&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.email})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mobile Number ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx(mM,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:"tel",name:"mobile",value:t.mobile,onChange:D,placeholder:"Enter 10-digit mobile number",maxLength:"10",className:`w-full pl-10 pr-3 py-3 border ${h.mobile?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all`}),t.mobile&&t.mobile.length===10&&!h.mobile&&m.jsx(aM,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500",size:18})]}),h.mobile&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.mobile})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx(Cx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:s?"text":"password",name:"password",value:t.password,onChange:D,placeholder:"Create a password",className:`w-full pl-10 pr-10 py-3 border ${h.password?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all`}),m.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?m.jsx(Ix,{size:18}):m.jsx(Tx,{size:18})})]}),t.password&&H&&m.jsx("div",{className:"mt-2 space-y-1",children:m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[m.jsx("span",{className:`${H.strength.length?"text-green-600":"text-gray-400"}`,children:" 8+ characters"}),m.jsx("span",{className:`${H.strength.upperCase?"text-green-600":"text-gray-400"}`,children:" Uppercase"}),m.jsx("span",{className:`${H.strength.lowerCase?"text-green-600":"text-gray-400"}`,children:" Lowercase"}),m.jsx("span",{className:`${H.strength.number?"text-green-600":"text-gray-400"}`,children:" Number"})]})}),h.password&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.password})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Confirm Password ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsxs("div",{className:"relative",children:[m.jsx(Cx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),m.jsx("input",{type:l?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:D,placeholder:"Confirm your password",className:`w-full pl-10 pr-10 py-3 border ${h.confirmPassword?"border-red-500":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all`}),m.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?m.jsx(Ix,{size:18}):m.jsx(Tx,{size:18})})]}),h.confirmPassword&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:h.confirmPassword})]}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("input",{type:"checkbox",checked:_,onChange:O=>E(O.target.checked),className:"mt-1 w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),m.jsxs("label",{className:"ml-2 text-sm text-gray-600",children:["I agree to the"," ",m.jsx(De,{to:"/terms",className:"text-green-600 hover:underline",children:"Terms of Service"})," ","and"," ",m.jsx(De,{to:"/privacy",className:"text-green-600 hover:underline",children:"Privacy Policy"}),m.jsx("span",{className:"text-red-500",children:"*"})]})]}),h.terms&&m.jsx("p",{className:"text-red-500 text-xs -mt-2",children:h.terms}),m.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white p-3 rounded-lg font-medium transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 mt-6",children:g?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating Account..."]}):m.jsxs(m.Fragment,{children:["Register Now",m.jsx(iM,{size:18})]})})]}),m.jsxs("p",{className:"text-sm text-center mt-6 text-gray-600",children:["Already have an account?"," ",m.jsx(De,{to:"/login",className:"text-green-600 hover:text-green-800 font-semibold hover:underline transition-all",children:"Sign In"})]}),m.jsxs("p",{className:"text-xs text-center mt-4 text-gray-500",children:[m.jsx("span",{className:"text-red-500",children:"*"})," Required fields"]})]})})}function vM(){const n=ln(),e=qr(),{login:t}=cn(),{addToCart:r}=ol(),{state:s}=e,[o,l]=N.useState(s?.message||""),[c,h]=N.useState({email:"",password:""}),[f,g]=N.useState(!1),[y,_]=N.useState({}),[E,I]=N.useState(!1),[T,C]=N.useState(!1),V=()=>{const H={};return c.email?/\S+@\S+\.\S+/.test(c.email)||(H.email="Please enter a valid email"):H.email="Email is required",c.password?c.password.length<6&&(H.password="Password must be at least 6 characters"):H.password="Password is required",_(H),Object.keys(H).length===0},D=H=>{const{name:O,value:q}=H.target;h({...c,[O]:q}),y[O]&&_({...y,[O]:""})},U=async H=>{if(H.preventDefault(),!!V()){I(!0);try{await t(c.email,c.password);const O=localStorage.getItem("pendingCartItem");if(O){const q=JSON.parse(O);q.product&&r(q.product,q.quantity),localStorage.removeItem("pendingCartItem"),alert("Item added to your cart!"),n("/cart")}else n(s?.redirectTo||"/dashboard")}catch(O){console.error("Login error:",O);let q="Login failed. Please try again.";O.code==="auth/user-not-found"?q="No account found with this email.":O.code==="auth/wrong-password"?q="Incorrect password.":O.code==="auth/invalid-email"?q="Invalid email format.":O.code==="auth/too-many-requests"&&(q="Too many failed attempts. Try again later."),alert(q)}finally{I(!1)}}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-600 to-orange-700 p-4 pt-20",children:[m.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-white rounded-full opacity-10"}),m.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-white rounded-full opacity-10"})]}),m.jsxs("div",{className:"relative bg-white/95 backdrop-blur-sm p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[o&&m.jsx("div",{className:"mb-6 bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded-lg",children:o}),m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-amber-600 to-orange-600 rounded-full flex items-center justify-center shadow-lg",children:m.jsx("span",{className:"text-white text-4xl font-bold",children:"M"})})}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),m.jsx("p",{className:"text-gray-600",children:"Please login to your account"})]}),m.jsxs("form",{onSubmit:U,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl",children:""}),m.jsx("input",{type:"email",name:"email",value:c.email,onChange:D,placeholder:"Enter your email",className:`w-full pl-12 pr-4 py-3 border-2 ${y.email?"border-red-500":"border-gray-200"} rounded-xl focus:outline-none focus:border-amber-500 transition-colors bg-gray-50 focus:bg-white`})]}),y.email&&m.jsxs("p",{className:"text-red-500 text-xs mt-2 flex items-center",children:[m.jsx("span",{className:"mr-1",children:""})," ",y.email]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl",children:""}),m.jsx("input",{type:f?"text":"password",name:"password",value:c.password,onChange:D,placeholder:"Enter your password",className:`w-full pl-12 pr-12 py-3 border-2 ${y.password?"border-red-500":"border-gray-200"} rounded-xl focus:outline-none focus:border-amber-500 transition-colors bg-gray-50 focus:bg-white`}),m.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:f?"":""})]}),y.password&&m.jsxs("p",{className:"text-red-500 text-xs mt-2 flex items-center",children:[m.jsx("span",{className:"mr-1",children:""})," ",y.password]})]}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("label",{className:"flex items-center cursor-pointer group",children:[m.jsx("input",{type:"checkbox",checked:T,onChange:H=>C(H.target.checked),className:"w-4 h-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500 cursor-pointer"}),m.jsx("span",{className:"ml-2 text-sm text-gray-600 group-hover:text-gray-800",children:"Remember me"})]}),m.jsx(De,{to:"/forgot-password",className:"text-sm text-amber-600 hover:text-amber-800 hover:underline transition-colors",children:"Forgot Password?"})]}),m.jsx("button",{type:"submit",disabled:E,className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700 text-white py-3 rounded-xl font-semibold text-lg transition-all transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg",children:E?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Logging in..."]}):"Login"})]}),m.jsxs("p",{className:"text-sm text-center mt-6 text-gray-600",children:["Don't have an account?"," ",m.jsx(De,{to:"/register",state:{redirectTo:s?.redirectTo},className:"text-amber-600 hover:text-amber-800 font-semibold hover:underline transition-colors",children:"Create Account"})]})]})]})}function _M(){const[n,e]=N.useState(""),[t,r]=N.useState(""),[s,o]=N.useState(""),[l,c]=N.useState(!1),h=async f=>{f.preventDefault(),c(!0),r(""),o("");try{const g=eE();await md(g,n),r("Password reset email sent! Check your inbox."),e("")}catch(g){o(g.message)}finally{c(!1)}};return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-500 to-orange-600 p-4",children:m.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Reset Password"}),m.jsx("p",{className:"text-gray-600",children:"Enter your email to receive reset link"})]}),t&&m.jsx("div",{className:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded",children:t}),s&&m.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:s}),m.jsxs("form",{onSubmit:h,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),m.jsx("input",{type:"email",value:n,onChange:f=>e(f.target.value),placeholder:"Enter your email",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-amber-500",required:!0})]}),m.jsx("button",{type:"submit",disabled:l,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-xl font-semibold transition disabled:opacity-50",children:l?"Sending...":"Send Reset Link"})]}),m.jsx("p",{className:"text-sm text-center mt-6",children:m.jsx(De,{to:"/login",className:"text-amber-600 hover:text-amber-800",children:"Back to Login"})})]})})}function xM(){const{currentUser:n,userData:e,logout:t}=cn(),r=ln(),[s,o]=N.useState(!0),[l,c]=N.useState([]);N.useEffect(()=>{n&&h()},[n]);const h=async()=>{try{console.log("Fetching orders for user:",n.uid);const y=cf(sn(je,"orders"),LS("userId","==",n.uid),ny("orderDate","desc")),_=await dr(y);console.log("Orders snapshot:",_.size);const E=_.docs.map(I=>{const T=I.data();return console.log("Order data:",T),{id:I.id,...T}});c(E)}catch(y){console.error("Error fetching orders:",y),ve.error("Failed to load orders")}finally{o(!1)}},f=async()=>{await t(),r("/login")},g=y=>{switch(y){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return s?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-amber-500 border-t-transparent"})}):m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("div",{className:"bg-white shadow",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",e?.name||n?.displayName||"Valued Customer","!"]}),m.jsx("p",{className:"text-gray-600 mt-1",children:n?.email})]}),m.jsx("button",{onClick:f,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition",children:"Logout"})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[m.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-blue-100",children:"Total Orders"}),m.jsx("p",{className:"text-3xl font-bold mt-2",children:l.length})]}),m.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:m.jsx("span",{className:"text-2xl",children:""})})]})}),m.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-green-100",children:"Completed"}),m.jsx("p",{className:"text-3xl font-bold mt-2",children:l.filter(y=>y.orderStatus==="completed").length})]}),m.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:m.jsx("span",{className:"text-2xl",children:""})})]})}),m.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl p-6 text-white shadow-lg",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-amber-100",children:"Pending"}),m.jsx("p",{className:"text-3xl font-bold mt-2",children:l.filter(y=>y.orderStatus==="pending").length})]}),m.jsx("div",{className:"bg-white/20 p-3 rounded-lg",children:m.jsx("span",{className:"text-2xl",children:""})})]})})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6",children:"My Orders"}),l.length===0?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("p",{className:"text-gray-500 mb-4",children:"No orders yet. Start shopping!"}),m.jsx("button",{onClick:()=>r("/products"),className:"bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-lg transition",children:"Browse Products"})]}):m.jsx("div",{className:"space-y-4",children:l.map(y=>m.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition",children:[m.jsxs("div",{className:"flex justify-between items-start mb-3",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-sm text-gray-500",children:["Order ID: ",y.id]}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Date: ",y.orderDate?new Date(y.orderDate).toLocaleDateString():"N/A"]})]}),m.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g(y.orderStatus)}`,children:y.orderStatus})]}),m.jsx("div",{className:"space-y-2",children:y.items?.map((_,E)=>m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsxs("span",{children:[_.name," x",_.quantity]}),m.jsxs("span",{className:"font-medium",children:["",_.price*_.quantity]})]},E))}),m.jsxs("div",{className:"border-t mt-3 pt-3 flex justify-between",children:[m.jsx("span",{className:"font-bold",children:"Total"}),m.jsxs("span",{className:"font-bold text-amber-600",children:["",y.totalAmount]})]}),m.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:[m.jsxs("p",{children:["Payment: ",y.paymentMethod]}),m.jsxs("p",{children:["Address: ",y.shippingAddress]})]})]},y.id))})]})]})]})}const Qp=({product:n=null})=>{const e="919834000290",t=()=>encodeURIComponent(n?`Hi! I'm interested in ${n.name} (${n.price}). Can you provide more details?`:"Hi! I'm interested in your interior design services. Can you provide more details?"),r=()=>{const s=t();window.open(`https://wa.me/${e}?text=${s}`,"_blank")};return n?m.jsx("button",{onClick:r,style:{width:"100%",backgroundColor:"#25D366",color:"white",border:"none",borderRadius:"8px",padding:"12px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",marginTop:"10px"},children:" Enquire on WhatsApp"}):m.jsx("button",{onClick:r,style:{position:"fixed",bottom:"20px",right:"20px",backgroundColor:"#25D366",color:"white",border:"none",borderRadius:"50%",width:"60px",height:"60px",fontSize:"30px",cursor:"pointer",boxShadow:"0 4px 10px rgba(0,0,0,0.3)",zIndex:1e3},children:""})},wM=()=>m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden animate-pulse",children:[m.jsx("div",{className:"w-full h-64 bg-gray-300"}),m.jsxs("div",{className:"p-6",children:[m.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-full mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6 mb-4"}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("div",{className:"h-8 bg-gray-300 rounded w-24"}),m.jsx("div",{className:"h-10 bg-gray-300 rounded w-28"})]})]})]});function bM({productId:n}){const[e,t]=N.useState([]),[r,s]=N.useState(null),[o,l]=N.useState(5),[c,h]=N.useState(""),[f,g]=N.useState(!0),[y,_]=N.useState(!1),[E,I]=N.useState(null),[T,C]=N.useState(""),[V,D]=N.useState(5),[U,H]=N.useState(0),{currentUser:O,userData:q}=cn();N.useEffect(()=>{n&&A()},[n]);const A=async()=>{try{g(!0),console.log("Fetching reviews for product:",n);const oe=cf(sn(je,"reviews"),LS("productId","==",n)),J=await dr(oe);console.log("Reviews fetched:",J.docs.length);const ae=J.docs.map(ee=>({id:ee.id,...ee.data()}));if(ae.sort((ee,ce)=>{const z=ee.createdAt?new Date(ee.createdAt):new Date(0);return(ce.createdAt?new Date(ce.createdAt):new Date(0))-z}),t(ae),ae.length>0){const ee=ae.reduce((ce,z)=>ce+(z.rating||0),0);H((ee/ae.length).toFixed(1))}else H(0);if(O){const ee=ae.find(ce=>ce.userId===O.uid);s(ee||null)}}catch(oe){console.error("Error fetching reviews:",oe),ve.error("Failed to load reviews")}finally{g(!1)}},k=async oe=>{if(oe.preventDefault(),!O){ve.error("Please login to write a review");return}if(!c.trim()){ve.error("Please write a comment");return}_(!0);try{const J={productId:n,userId:O.uid,userName:q?.name||O.displayName||O.email?.split("@")[0]||"Anonymous",userEmail:O.email,rating:Number(o),comment:c.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),status:"active"};console.log("Submitting review:",J);const ae=await su(sn(je,"reviews"),J);console.log("Review saved with ID:",ae.id),ve.success("Review submitted successfully!"),h(""),l(5),A()}catch(J){console.error("Error submitting review:",J),ve.error("Failed to submit review: "+J.message)}finally{_(!1)}},P=async oe=>{if(!T.trim()){ve.error("Please write a comment");return}_(!0);try{const J=ct(je,"reviews",oe);await Wr(J,{rating:Number(V),comment:T.trim(),updatedAt:new Date().toISOString()}),ve.success("Review updated successfully!"),I(null),A()}catch(J){console.error("Error updating review:",J),ve.error("Failed to update review: "+J.message)}finally{_(!1)}},F=async oe=>{if(window.confirm("Are you sure you want to delete this review?"))try{await ru(ct(je,"reviews",oe)),ve.success("Review deleted successfully"),r?.id===oe&&s(null),A()}catch(J){console.error("Error deleting review:",J),ve.error("Failed to delete review: "+J.message)}},L=async(oe,J)=>{if(window.confirm("Are you sure you want to show this review?"))try{await Wr(ct(je,"reviews",oe),{status:J,moderatedAt:new Date().toISOString(),moderatedBy:O?.uid}),ve.success(`Review ${J==="active"?"shown":"hidden"} successfully`),A()}catch(ae){console.error("Error moderating review:",ae),ve.error("Failed to moderate review: "+ae.message)}},B=(oe,J=!1,ae=null)=>{const ee=[];for(let ce=1;ce<=5;ce++)ee.push(m.jsx("button",{type:"button",onClick:()=>J&&ae&&ae(ce),className:`text-2xl ${ce<=oe?"text-yellow-400":"text-gray-300"} ${J?"cursor-pointer hover:scale-110 transition":"cursor-default"}`,disabled:!J,children:""},ce));return ee},j=e.filter(oe=>oe.status==="active"),Ce=q?.role==="admin";return console.log("Current reviews:",e),console.log("Visible reviews:",j),m.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-lg p-6",children:[m.jsx("div",{className:"flex justify-between items-center mb-6",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-2xl font-bold",children:"Customer Reviews"}),e.length>0&&m.jsxs("div",{className:"flex items-center mt-1",children:[m.jsx("div",{className:"flex text-yellow-400 mr-2",children:B(Math.round(U))}),m.jsxs("span",{className:"text-gray-600",children:[U," out of 5 (",e.length," ",e.length===1?"review":"reviews",")"]})]})]})}),O&&!r&&m.jsxs("form",{onSubmit:k,className:"bg-gray-50 p-4 rounded-lg mb-6",children:[m.jsx("h4",{className:"font-semibold mb-3",children:"Write a Review"}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Rating"}),m.jsx("div",{className:"flex gap-1",children:B(o,!0,l)})]}),m.jsxs("div",{className:"mb-3",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Your Review"}),m.jsx("textarea",{value:c,onChange:oe=>h(oe.target.value),placeholder:"Share your experience with this product...",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500",rows:"3",required:!0})]}),m.jsx("button",{type:"submit",disabled:y,className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg transition disabled:opacity-50",children:y?"Submitting...":"Submit Review"})]}),r&&m.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[m.jsx("h4",{className:"font-semibold mb-2",children:"Your Review"}),E===r.id?m.jsxs("div",{children:[m.jsx("div",{className:"mb-3",children:m.jsx("div",{className:"flex gap-1",children:B(V,!0,D)})}),m.jsx("textarea",{value:T,onChange:oe=>C(oe.target.value),className:"w-full p-2 border rounded-lg mb-2",rows:"2"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>P(r.id),disabled:y,className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-sm",children:"Save"}),m.jsx("button",{onClick:()=>I(null),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):m.jsxs("div",{children:[m.jsx("div",{className:"flex text-yellow-400 mb-1",children:B(r.rating)}),m.jsx("p",{className:"text-gray-700 mb-2",children:r.comment}),m.jsx("p",{className:"text-xs text-gray-500",children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"Recently"}),m.jsxs("div",{className:"flex gap-2 mt-2",children:[m.jsx("button",{onClick:()=>{I(r.id),C(r.comment),D(r.rating)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),m.jsx("button",{onClick:()=>F(r.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]})]}),f?m.jsx("div",{className:"text-center py-8",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-amber-500 border-t-transparent mx-auto"})}):j.length===0?m.jsx("p",{className:"text-gray-500 text-center py-8",children:"No reviews yet. Be the first to review!"}):m.jsx("div",{className:"space-y-4",children:j.map(oe=>m.jsx("div",{className:"border-b pb-4 last:border-0",children:m.jsx("div",{className:"flex justify-between items-start",children:m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx("span",{className:"font-semibold",children:oe.userName}),m.jsx("span",{className:"text-sm text-gray-500",children:oe.createdAt?new Date(oe.createdAt).toLocaleDateString():"Recently"})]}),m.jsx("div",{className:"flex text-yellow-400 mb-2",children:B(oe.rating)}),m.jsx("p",{className:"text-gray-700",children:oe.comment})]})})},oe.id))}),Ce&&e.filter(oe=>oe.status!=="active").length>0&&m.jsxs("div",{className:"mt-8 border-t pt-6",children:[m.jsxs("h4",{className:"font-bold text-lg mb-4",children:["Moderation Queue (",e.filter(oe=>oe.status!=="active").length,")"]}),m.jsx("div",{className:"space-y-4",children:e.filter(oe=>oe.status!=="active").map(oe=>m.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:oe.userName}),m.jsx("p",{className:"text-sm text-gray-600",children:oe.userEmail})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>L(oe.id,"active"),className:"bg-green-500 text-white px-3 py-1 rounded text-sm",children:"Approve"}),m.jsx("button",{onClick:()=>F(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded text-sm",children:"Delete"})]})]}),m.jsx("div",{className:"flex text-yellow-400 mt-2",children:B(oe.rating)}),m.jsx("p",{className:"text-gray-700 mt-1",children:oe.comment})]},oe.id))})]})]})}function EM(){const[n,e]=N.useState([]),[t,r]=N.useState([]),[s,o]=N.useState("all"),[l,c]=N.useState([]),[h,f]=N.useState(!0),[g,y]=N.useState(null),[_,E]=N.useState(""),[I,T]=N.useState({min:0,max:1e5}),[C,V]=N.useState("default"),[D,U]=N.useState(!1),{currentUser:H}=cn(),{addToCart:O}=ol(),{addToWishlist:q,removeFromWishlist:A,isInWishlist:k}=sy(),P=ln(),F=J=>{J.target.src="https://picsum.photos/400/300?random=1"};N.useEffect(()=>{L()},[]),N.useEffect(()=>{B()},[n,_,s,I,C]);const L=async()=>{try{const ae=(await dr(sn(je,"products"))).docs.map(z=>({id:z.id,...z.data()}));e(ae);const ee=[...new Set(ae.map(z=>z.category).filter(Boolean))];c(ee);const ce=Math.max(...ae.map(z=>z.price||0));T({min:0,max:ce||1e5})}catch(J){console.error("Error fetching products:",J)}finally{f(!1)}},B=()=>{let J=[...n];switch(s!=="all"&&(J=J.filter(ae=>ae.category===s)),_.trim()&&(J=J.filter(ae=>ae.name?.toLowerCase().includes(_.toLowerCase())||ae.description?.toLowerCase().includes(_.toLowerCase())||ae.category?.toLowerCase().includes(_.toLowerCase()))),J=J.filter(ae=>ae.price>=I.min&&ae.price<=I.max),C){case"price-low":J.sort((ae,ee)=>(ae.price||0)-(ee.price||0));break;case"price-high":J.sort((ae,ee)=>(ee.price||0)-(ae.price||0));break;case"name-asc":J.sort((ae,ee)=>(ae.name||"").localeCompare(ee.name||""));break;case"name-desc":J.sort((ae,ee)=>(ee.name||"").localeCompare(ae.name||""));break}r(J)},j=()=>{E(""),o("all");const J=Math.max(...n.map(ae=>ae.price||0),1e3);T({min:0,max:J}),V("default")},Ce=J=>{o(J)},oe=J=>{H?(O(J),alert(`${J.name} added to cart!`)):(localStorage.setItem("pendingCartItem",JSON.stringify({productId:J.id,product:J,quantity:1,timestamp:new Date().toISOString()})),P("/login",{state:{message:"Please login or create an account to add items to cart",redirectTo:"/products"}}))};return h?m.jsx("div",{className:"py-16 px-6 max-w-7xl mx-auto",children:m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(J=>m.jsx(wM,{},J))})}):g?m.jsxs("div",{className:"py-16 px-6 max-w-7xl mx-auto",children:[m.jsx("button",{onClick:()=>y(null),className:"mb-6 text-amber-500 hover:text-amber-600 flex items-center gap-2",children:" Back to Products"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsx("div",{children:m.jsx("img",{src:g.image||`https://picsum.photos/600/400?random=${g.id}`,alt:g.name,className:"w-full rounded-xl shadow-lg",onError:F})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold mb-2",children:g.name}),g.category&&m.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm capitalize",children:g.category}),m.jsxs("p",{className:"text-3xl font-bold text-amber-600 my-4",children:["",g.price]}),m.jsx("p",{className:"text-gray-600 mb-6",children:g.description}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:()=>{k(g.id)?A(g.id):q(g)},className:`w-full py-3 rounded-lg font-medium transition flex items-center justify-center gap-2 ${k(g.id)?"bg-red-50 text-red-600 border border-red-200":"bg-gray-50 text-gray-700 border border-gray-200 hover:bg-gray-100"}`,children:[m.jsx("span",{className:"text-xl",children:k(g.id)?"":""}),k(g.id)?"Saved to Wishlist":"Save to Wishlist"]}),m.jsx("button",{onClick:()=>oe(g),disabled:!g.inStock,className:`w-full py-3 rounded-lg font-medium transition ${g.inStock?"bg-amber-500 hover:bg-amber-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g.inStock?"Add to Cart":"Out of Stock"}),m.jsx(Qp,{product:g})]})]})]}),m.jsx(bM,{productId:g.id})]}):m.jsxs("div",{className:"py-16 px-6 max-w-7xl mx-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-center mb-12",children:"Our Products"}),m.jsxs("div",{className:"mb-8",children:[m.jsxs("button",{onClick:()=>U(!D),className:"w-full md:hidden bg-gray-100 p-3 rounded-lg mb-3 flex justify-between items-center",children:[m.jsx("span",{children:"Filter & Sort Products"}),m.jsx("span",{children:D?"":""})]}),m.jsxs("div",{className:`${D?"block":"hidden"} md:block bg-white p-6 rounded-xl shadow-lg mb-6`,children:[m.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[m.jsxs("div",{className:"col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Search Products"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"Search by name, description, category...",value:_,onChange:J=>E(J.target.value),className:"w-full p-3 border rounded-lg pl-10"}),m.jsx("span",{className:"absolute left-3 top-3 text-gray-400",children:""})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sort By"}),m.jsxs("select",{value:C,onChange:J=>V(J.target.value),className:"w-full p-3 border rounded-lg",children:[m.jsx("option",{value:"default",children:"Default"}),m.jsx("option",{value:"price-low",children:"Price: Low to High"}),m.jsx("option",{value:"price-high",children:"Price: High to Low"}),m.jsx("option",{value:"name-asc",children:"Name: A to Z"}),m.jsx("option",{value:"name-desc",children:"Name: Z to A"})]})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Price Range: ",I.min," - ",I.max]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"number",placeholder:"Min",min:"0",max:I.max,value:I.min,onChange:J=>{const ae=Math.max(0,Number(J.target.value));T({...I,min:Math.min(ae,I.max)})},className:"w-1/2 p-2 border rounded-lg"}),m.jsx("input",{type:"number",placeholder:"Max",min:I.min,max:"1000000",value:I.max,onChange:J=>{const ae=Number(J.target.value);T({...I,max:Math.max(ae,I.min)})},className:"w-1/2 p-2 border rounded-lg"})]})]})]}),m.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"Categories:"}),m.jsx("button",{onClick:()=>Ce("all"),className:`px-3 py-1 rounded-full text-sm transition ${s==="all"?"bg-amber-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:"All"}),l.map(J=>m.jsx("button",{onClick:()=>Ce(J),className:`px-3 py-1 rounded-full text-sm capitalize transition ${s===J?"bg-amber-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:J},J)),(_||s!=="all"||C!=="default"||I.min>0||I.max<Math.max(...n.map(J=>J.price||0)))&&m.jsx("button",{onClick:j,className:"ml-auto text-red-500 hover:text-red-700 text-sm font-medium",children:"Clear All Filters"})]})]}),m.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Showing ",t.length," of ",n.length," products"]})]}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.length===0?m.jsxs("div",{className:"text-center col-span-3 py-12",children:[m.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"No products found matching your criteria."}),m.jsx("button",{onClick:j,className:"bg-amber-500 text-white px-6 py-2 rounded-lg hover:bg-amber-600",children:"Clear Filters"})]}):t.map(J=>m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition cursor-pointer relative",onClick:()=>y(J),children:[m.jsx("button",{onClick:ae=>{ae.stopPropagation(),k(J.id)?A(J.id):q(J)},className:"absolute top-3 right-3 bg-white rounded-full p-2 shadow-md hover:scale-110 transition z-10",children:m.jsx("span",{className:"text-2xl",children:k(J.id)?"":""})}),m.jsx("img",{src:J.image||`https://picsum.photos/400/300?random=${J.id}`,alt:J.name,className:"w-full h-64 object-cover",onError:F}),m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("h2",{className:"text-xl font-semibold",children:J.name}),J.category&&m.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-xs capitalize",children:J.category})]}),m.jsx("p",{className:"text-gray-600 mt-2 line-clamp-2",children:J.description}),m.jsxs("div",{className:"flex justify-between items-center mt-4",children:[m.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["",J.price]}),!J.inStock&&m.jsx("span",{className:"text-red-500 text-sm",children:"Out of Stock"})]}),m.jsx("button",{onClick:ae=>{ae.stopPropagation(),oe(J)},disabled:!J.inStock,className:`w-full mt-4 py-2 rounded-lg transition ${J.inStock?"bg-amber-500 hover:bg-amber-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:J.inStock?"Add to Cart":"Out of Stock"})]})]},J.id))}),m.jsx(Qp,{})]})}function SM(){const{cartItems:n,updateQuantity:e,removeFromCart:t,getCartTotal:r,clearCart:s}=ol(),{currentUser:o}=cn(),l=ln(),[c,h]=N.useState(!1),f=_=>{_.target.src="https://picsum.photos/100/100?random=1"},g=()=>{o?l("/checkout"):(localStorage.setItem("pendingCart",JSON.stringify(n)),l("/login",{state:{message:"Please login to complete your purchase",redirectTo:"/checkout"}}))},y=()=>{l("/products")};return n.length===0?m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Cart is Empty"}),m.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't added any products yet."}),m.jsx("button",{onClick:y,className:"bg-amber-500 hover:bg-amber-600 text-white px-8 py-3 rounded-lg text-lg font-medium transition",children:"Continue Shopping"})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Shopping Cart"}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2 space-y-4",children:n.map(_=>m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 flex gap-4",children:[m.jsx("img",{src:_.image||`https://picsum.photos/100/100?random=${_.id}`,alt:_.name,className:"w-24 h-24 object-cover rounded",onError:f}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"font-semibold",children:_.name}),m.jsxs("p",{className:"text-amber-600 font-bold",children:["",_.price]}),m.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[m.jsxs("div",{className:"flex items-center border rounded",children:[m.jsx("button",{onClick:()=>e(_.id,_.quantity-1),className:"px-3 py-1 hover:bg-gray-100",children:"-"}),m.jsx("span",{className:"px-3 py-1 border-x",children:_.quantity}),m.jsx("button",{onClick:()=>e(_.id,_.quantity+1),className:"px-3 py-1 hover:bg-gray-100",children:"+"})]}),m.jsx("button",{onClick:()=>t(_.id),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-bold",children:["",_.price*_.quantity]})})]},_.id))}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-fit",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Order Summary"}),m.jsxs("div",{className:"space-y-2 mb-4",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Subtotal"}),m.jsxs("span",{children:["",r()]})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Shipping"}),m.jsx("span",{children:"Free"})]}),m.jsx("div",{className:"border-t pt-2 mt-2",children:m.jsxs("div",{className:"flex justify-between font-bold",children:[m.jsx("span",{children:"Total"}),m.jsxs("span",{className:"text-amber-600",children:["",r()]})]})})]}),m.jsx("button",{onClick:g,className:"w-full bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-lg font-medium transition mb-2",children:"Proceed to Checkout"}),m.jsx("button",{onClick:y,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-lg font-medium transition",children:"Continue Shopping"}),m.jsx("button",{onClick:s,className:"w-full text-red-500 hover:text-red-700 text-sm mt-4",children:"Clear Cart"})]})]})]})})}const TM="rzp_test_SHwsS0sdeg0geb";function IM(){const{cartItems:n,getCartTotal:e,placeOrder:t,loading:r}=ol(),{currentUser:s,userData:o}=cn(),l=ln(),[c,h]=N.useState({name:s?.displayName||o?.name||"",phone:o?.phone||"",address:"",city:"",pincode:"",paymentMethod:"razorpay",notes:""}),[f,g]=N.useState({}),[y,_]=N.useState(!1),E=()=>{const U={};return c.name||(U.name="Name is required"),c.phone||(U.phone="Phone number is required"),c.address||(U.address="Address is required"),c.city||(U.city="City is required"),c.pincode||(U.pincode="Pincode is required"),g(U),Object.keys(U).length===0},I=U=>{const{name:H,value:O}=U.target;h(q=>({...q,[H]:O})),f[H]&&g(q=>({...q,[H]:""}))},T=()=>new Promise(U=>{const H=document.createElement("script");H.src="https://checkout.razorpay.com/v1/checkout.js",H.onload=()=>U(!0),H.onerror=()=>U(!1),document.body.appendChild(H)}),C=async()=>{_(!0);try{if(!await T()){ve.error("Failed to load payment gateway. Please try again."),_(!1);return}const H=e(),O={key:TM,amount:H*100,currency:"INR",name:"Mauli Interior",description:"Payment for your order",image:"https://your-website.com/logo.png",handler:async A=>{try{const k={...c,paymentId:A.razorpay_payment_id,paymentStatus:"paid"},P=await t(k);ve.success("Payment successful! Order placed."),l(`/order-confirmation/${P.id}`)}catch(k){console.error("Error placing order:",k),ve.error("Order placed but error saving details. Contact support.")}},prefill:{name:c.name,email:s.email,contact:c.phone},notes:{address:`${c.address}, ${c.city} - ${c.pincode}`},theme:{color:"#F59E0B"},modal:{ondismiss:()=>{_(!1),ve.error("Payment cancelled")}}};new window.Razorpay(O).open()}catch(U){console.error("Payment error:",U),ve.error("Payment failed. Please try again."),_(!1)}},V=async()=>{_(!0);try{await t({...c,paymentStatus:"pending",paymentMethod:"cod"}),ve.success("Order placed successfully!"),l("/dashboard")}catch{ve.error("Error placing order")}finally{_(!1)}},D=U=>{U.preventDefault(),E()&&(c.paymentMethod==="razorpay"?C():V())};return n.length===0?(l("/products"),null):m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[m.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("form",{onSubmit:D,className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Shipping Information"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name *"}),m.jsx("input",{type:"text",name:"name",value:c.name,onChange:I,className:`w-full p-2 border rounded ${f.name?"border-red-500":"border-gray-300"}`}),f.name&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.name})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number *"}),m.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:I,className:`w-full p-2 border rounded ${f.phone?"border-red-500":"border-gray-300"}`}),f.phone&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.phone})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address *"}),m.jsx("textarea",{name:"address",value:c.address,onChange:I,rows:"3",className:`w-full p-2 border rounded ${f.address?"border-red-500":"border-gray-300"}`}),f.address&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.address})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"City *"}),m.jsx("input",{type:"text",name:"city",value:c.city,onChange:I,className:`w-full p-2 border rounded ${f.city?"border-red-500":"border-gray-300"}`}),f.city&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.city})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Pincode *"}),m.jsx("input",{type:"text",name:"pincode",value:c.pincode,onChange:I,className:`w-full p-2 border rounded ${f.pincode?"border-red-500":"border-gray-300"}`}),f.pincode&&m.jsx("p",{className:"text-red-500 text-xs mt-1",children:f.pincode})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Method"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"paymentMethod",value:"razorpay",checked:c.paymentMethod==="razorpay",onChange:I,className:"mr-3"}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Pay Online (Razorpay)"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Credit Card, Debit Card, UPI, NetBanking"})]})]}),m.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[m.jsx("input",{type:"radio",name:"paymentMethod",value:"cod",checked:c.paymentMethod==="cod",onChange:I,className:"mr-3"}),m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Cash on Delivery"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Pay when you receive"})]})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Order Notes (Optional)"}),m.jsx("textarea",{name:"notes",value:c.notes,onChange:I,rows:"2",className:"w-full p-2 border border-gray-300 rounded",placeholder:"Any special instructions..."})]})]}),m.jsx("button",{type:"submit",disabled:y||r,className:"w-full mt-6 bg-amber-500 hover:bg-amber-600 text-white py-3 rounded-lg font-medium transition disabled:opacity-50 flex items-center justify-center",children:y?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"Processing..."]}):c.paymentMethod==="razorpay"?"Proceed to Pay":"Place Order (COD)"})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-fit",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Order"}),m.jsx("div",{className:"space-y-3 mb-4 max-h-96 overflow-y-auto",children:n.map(U=>m.jsxs("div",{className:"flex justify-between text-sm border-b pb-2",children:[m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:U.name}),m.jsxs("span",{className:"text-gray-500 ml-2",children:["x",U.quantity]})]}),m.jsxs("span",{className:"font-medium",children:["",U.price*U.quantity]})]},U.id))}),m.jsx("div",{className:"border-t pt-4",children:m.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[m.jsx("span",{children:"Total"}),m.jsxs("span",{className:"text-amber-600",children:["",e()]})]})})]})]})]})})}function CM(){const{orderId:n}=WI(),[e,t]=N.useState(null),[r,s]=N.useState(!0),{currentUser:o}=cn(),l=ln();return N.useEffect(()=>{n&&(async()=>{try{const h=await nu(ct(je,"orders",n));h.exists()?t({id:h.id,...h.data()}):l("/dashboard")}catch(h){console.error("Error fetching order:",h)}finally{s(!1)}})()},[n,l]),r?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):e?m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsx("div",{className:"max-w-3xl mx-auto px-4",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[m.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:m.jsx("span",{className:"text-4xl",children:""})}),m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Thank you for your order. We'll send you a confirmation email shortly."}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6 text-left",children:[m.jsx("h2",{className:"font-semibold mb-4",children:"Order Details"}),m.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Order ID: ",m.jsx("span",{className:"font-mono",children:e.id})]}),m.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Date: ",new Date(e.orderDate).toLocaleString()]}),m.jsxs("div",{className:"border-t pt-4",children:[e.items?.map((c,h)=>m.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[m.jsxs("span",{children:[c.name," x",c.quantity]}),m.jsxs("span",{children:["",c.price*c.quantity]})]},h)),m.jsxs("div",{className:"border-t mt-2 pt-2 flex justify-between font-bold",children:[m.jsx("span",{children:"Total Paid"}),m.jsxs("span",{className:"text-amber-600",children:["",e.totalAmount]})]})]}),e.paymentId&&m.jsxs("p",{className:"text-xs text-gray-500 mt-4",children:["Payment ID: ",e.paymentId]})]}),m.jsx("div",{className:"mb-6",children:m.jsx(Qp,{order:e})}),m.jsxs("div",{className:"flex gap-4 justify-center",children:[m.jsx(De,{to:"/dashboard",className:"bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-lg font-medium transition",children:"View My Orders"}),m.jsx(De,{to:"/products",className:"bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium transition",children:"Continue Shopping"})]})]})})}):null}function kM(){const{wishlistItems:n,removeFromWishlist:e,clearWishlist:t,loading:r}=sy(),{addToCart:s}=ol(),{currentUser:o}=cn();return ln(),o?r?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):n.length===0?m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Your Wishlist is Empty"}),m.jsx("p",{className:"text-gray-600 mb-8",children:"Save your favorite products to see them here."}),m.jsx(De,{to:"/products",className:"bg-amber-500 text-white px-6 py-3 rounded-lg hover:bg-amber-600",children:"Browse Products"})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("h1",{className:"text-3xl font-bold",children:["My Wishlist (",n.length,")"]}),m.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700",children:"Clear All"})]}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:n.map(l=>m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:l.image||"https://via.placeholder.com/300x200?text=Product",alt:l.name,className:"w-full h-48 object-cover"}),m.jsx("button",{onClick:()=>e(l.id),className:"absolute top-2 right-2 bg-white rounded-full p-2 shadow-md hover:scale-110 transition",children:m.jsx("span",{className:"text-red-500",children:""})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-semibold text-lg mb-1",children:l.name}),l.category&&m.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full",children:l.category}),m.jsxs("p",{className:"text-amber-600 font-bold text-xl mt-2",children:["",l.price]}),m.jsx("button",{onClick:()=>{s({id:l.id,name:l.name,price:l.price,image:l.image}),e(l.id)},className:"w-full mt-4 bg-amber-500 hover:bg-amber-600 text-white py-2 rounded-lg transition",children:"Add to Cart"})]})]},l.id))})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-16",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 text-center",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Please Login"}),m.jsx("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to view your wishlist."}),m.jsx(De,{to:"/login",className:"bg-amber-500 text-white px-6 py-3 rounded-lg hover:bg-amber-600",children:"Go to Login"})]})})}function Ea({children:n,adminOnly:e=!1}){const{currentUser:t,userData:r}=cn(),[s,o]=N.useState(!0),[l,c]=N.useState(null);return N.useEffect(()=>{(async()=>{if(t)if(r)c(r.role||"customer");else try{const f=await nu(ct(je,"users",t.uid));f.exists()?c(f.data().role||"customer"):c("customer")}catch(f){console.error("Error fetching role:",f),c("customer")}o(!1)})()},[t,r]),t?s?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):e&&l!=="admin"?(console.log("Admin access denied. User role:",l),m.jsx(Wv,{to:"/dashboard",replace:!0})):n:m.jsx(Wv,{to:"/login",replace:!0})}function AM(){const[n,e]=N.useState(!0),t=ln(),r=qr(),s=async()=>{window.confirm("Are you sure you want to logout?")&&(await _g(Lr),t("/login"))},o=[{path:"/admin",icon:"",label:"Dashboard"},{path:"/admin/users",icon:"",label:"Users"},{path:"/admin/products",icon:"",label:"Products"},{path:"/admin/orders",icon:"",label:"Orders"},{path:"/admin/reviews",icon:"",label:"Reviews"},{path:"/admin/contacts",icon:"",label:"Contact Messages"}];return m.jsxs("div",{className:"flex h-screen bg-gray-100",children:[m.jsxs("div",{className:`${n?"w-64":"w-20"} bg-white shadow-lg transition-all duration-300`,children:[m.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n&&m.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Mauli Admin"}),m.jsx("button",{onClick:()=>e(!n),className:"p-2 rounded-lg hover:bg-gray-100",children:n?"":""})]}),m.jsxs("nav",{className:"mt-8",children:[o.map(l=>m.jsxs(De,{to:l.path,className:`flex items-center px-4 py-3 hover:bg-gray-100 ${r.pathname===l.path?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":""}`,children:[m.jsx("span",{className:"text-xl",children:l.icon}),n&&m.jsx("span",{className:"ml-3",children:l.label})]},l.path)),m.jsxs("button",{onClick:s,className:"w-full flex items-center px-4 py-3 hover:bg-red-50 text-red-600 mt-auto",children:[m.jsx("span",{className:"text-xl",children:""}),n&&m.jsx("span",{className:"ml-3",children:"Logout"})]})]})]}),m.jsx("div",{className:"flex-1 overflow-auto",children:m.jsx(sC,{})})]})}function ou(n){return n+.5|0}const pi=(n,e,t)=>Math.max(Math.min(n,t),e);function vc(n){return pi(ou(n*2.55),0,255)}function Si(n){return pi(ou(n*255),0,255)}function gs(n){return pi(ou(n/2.55)/100,0,1)}function kx(n){return pi(ou(n*100),0,100)}const Wn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xp=[..."0123456789ABCDEF"],RM=n=>Xp[n&15],NM=n=>Xp[(n&240)>>4]+Xp[n&15],Nh=n=>(n&240)>>4===(n&15),PM=n=>Nh(n.r)&&Nh(n.g)&&Nh(n.b)&&Nh(n.a);function DM(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Wn[n[1]]*17,g:255&Wn[n[2]]*17,b:255&Wn[n[3]]*17,a:e===5?Wn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Wn[n[1]]<<4|Wn[n[2]],g:Wn[n[3]]<<4|Wn[n[4]],b:Wn[n[5]]<<4|Wn[n[6]],a:e===9?Wn[n[7]]<<4|Wn[n[8]]:255})),t}const jM=(n,e)=>n<255?e(n):"";function MM(n){var e=PM(n)?RM:NM;return n?"#"+e(n.r)+e(n.g)+e(n.b)+jM(n.a,e):void 0}const OM=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function t1(n,e,t){const r=e*Math.min(t,1-t),s=(o,l=(o+n/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[s(0),s(8),s(4)]}function LM(n,e,t){const r=(s,o=(s+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function VM(n,e,t){const r=t1(n,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)r[s]*=1-e-t,r[s]+=e;return r}function FM(n,e,t,r,s){return n===s?(e-t)/r+(e<t?6:0):e===s?(t-n)/r+2:(n-e)/r+4}function iy(n){const t=n.r/255,r=n.g/255,s=n.b/255,o=Math.max(t,r,s),l=Math.min(t,r,s),c=(o+l)/2;let h,f,g;return o!==l&&(g=o-l,f=c>.5?g/(2-o-l):g/(o+l),h=FM(t,r,s,g,o),h=h*60+.5),[h|0,f||0,c]}function oy(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Si)}function ay(n,e,t){return oy(t1,n,e,t)}function UM(n,e,t){return oy(VM,n,e,t)}function zM(n,e,t){return oy(LM,n,e,t)}function n1(n){return(n%360+360)%360}function BM(n){const e=OM.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?vc(+e[5]):Si(+e[5]));const s=n1(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=UM(s,o,l):e[1]==="hsv"?r=zM(s,o,l):r=ay(s,o,l),{r:r[0],g:r[1],b:r[2],a:t}}function $M(n,e){var t=iy(n);t[0]=n1(t[0]+e),t=ay(t),n.r=t[0],n.g=t[1],n.b=t[2]}function WM(n){if(!n)return;const e=iy(n),t=e[0],r=kx(e[1]),s=kx(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${s}%, ${gs(n.a)})`:`hsl(${t}, ${r}%, ${s}%)`}const Ax={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function HM(){const n={},e=Object.keys(Rx),t=Object.keys(Ax);let r,s,o,l,c;for(r=0;r<e.length;r++){for(l=c=e[r],s=0;s<t.length;s++)o=t[s],c=c.replace(o,Ax[o]);o=parseInt(Rx[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let Ph;function qM(n){Ph||(Ph=HM(),Ph.transparent=[0,0,0,0]);const e=Ph[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const KM=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function GM(n){const e=KM.exec(n);let t=255,r,s,o;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?vc(l):pi(l*255,0,255)}return r=+e[1],s=+e[3],o=+e[5],r=255&(e[2]?vc(r):pi(r,0,255)),s=255&(e[4]?vc(s):pi(s,0,255)),o=255&(e[6]?vc(o):pi(o,0,255)),{r,g:s,b:o,a:t}}}function YM(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${gs(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const cp=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Sa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function QM(n,e,t){const r=Sa(gs(n.r)),s=Sa(gs(n.g)),o=Sa(gs(n.b));return{r:Si(cp(r+t*(Sa(gs(e.r))-r))),g:Si(cp(s+t*(Sa(gs(e.g))-s))),b:Si(cp(o+t*(Sa(gs(e.b))-o))),a:n.a+t*(e.a-n.a)}}function Dh(n,e,t){if(n){let r=iy(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=ay(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function r1(n,e){return n&&Object.assign(e||{},n)}function Nx(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Si(n[3]))):(e=r1(n,{r:0,g:0,b:0,a:1}),e.a=Si(e.a)),e}function XM(n){return n.charAt(0)==="r"?GM(n):BM(n)}class Vc{constructor(e){if(e instanceof Vc)return e;const t=typeof e;let r;t==="object"?r=Nx(e):t==="string"&&(r=DM(e)||qM(e)||XM(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=r1(this._rgb);return e&&(e.a=gs(e.a)),e}set rgb(e){this._rgb=Nx(e)}rgbString(){return this._valid?YM(this._rgb):void 0}hexString(){return this._valid?MM(this._rgb):void 0}hslString(){return this._valid?WM(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,s=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=r.a-s.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-f,r.r=255&f*r.r+o*s.r+.5,r.g=255&f*r.g+o*s.g+.5,r.b=255&f*r.b+o*s.b+.5,r.a=l*r.a+(1-l)*s.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=QM(this._rgb,e._rgb,t)),this}clone(){return new Vc(this.rgb)}alpha(e){return this._rgb.a=Si(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=ou(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dh(this._rgb,2,e),this}darken(e){return Dh(this._rgb,2,-e),this}saturate(e){return Dh(this._rgb,1,e),this}desaturate(e){return Dh(this._rgb,1,-e),this}rotate(e){return $M(this._rgb,e),this}}function fs(){}const JM=(()=>{let n=0;return()=>n++})();function Ze(n){return n==null}function Ut(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function He(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gn(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Pr(n,e){return Gn(n)?n:e}function We(n,e){return typeof n>"u"?e:n}const ZM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,s1=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function it(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Xe(n,e,t,r){let s,o,l;if(Ut(n))for(o=n.length,s=0;s<o;s++)e.call(t,n[s],s);else if(He(n))for(l=Object.keys(n),o=l.length,s=0;s<o;s++)e.call(t,n[l[s]],l[s])}function Rd(n,e){let t,r,s,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(s=n[t],o=e[t],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function Nd(n){if(Ut(n))return n.map(Nd);if(He(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let s=0;for(;s<r;++s)e[t[s]]=Nd(n[t[s]]);return e}return n}function i1(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function eO(n,e,t,r){if(!i1(n))return;const s=e[n],o=t[n];He(s)&&He(o)?Fc(s,o,r):e[n]=Nd(o)}function Fc(n,e,t){const r=Ut(e)?e:[e],s=r.length;if(!He(n))return n;t=t||{};const o=t.merger||eO;let l;for(let c=0;c<s;++c){if(l=r[c],!He(l))continue;const h=Object.keys(l);for(let f=0,g=h.length;f<g;++f)o(h[f],n,l,t)}return n}function Cc(n,e){return Fc(n,e,{merger:tO})}function tO(n,e,t){if(!i1(n))return;const r=e[n],s=t[n];He(r)&&He(s)?Cc(r,s):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Nd(s))}const Px={"":n=>n,x:n=>n.x,y:n=>n.y};function nO(n){const e=n.split("."),t=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function rO(n){const e=nO(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function ko(n,e){return(Px[e]||(Px[e]=rO(e)))(n)}function ly(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Uc=n=>typeof n<"u",Pi=n=>typeof n=="function",Dx=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function sO(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const at=Math.PI,At=2*at,Pd=Number.POSITIVE_INFINITY,iO=at/180,Dt=at/2,ho=at/4,jx=at*2/3,o1=Math.log10,Ti=Math.sign;function rd(n,e,t){return Math.abs(n-e)<t}function Mx(n){const e=Math.round(n);n=rd(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(o1(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function oO(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((s,o)=>s-o).pop(),e}function aO(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Dd(n){return!aO(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function lO(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function cO(n,e,t){let r,s,o;for(r=0,s=n.length;r<s;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function _s(n){return n*(at/180)}function uO(n){return n*(180/at)}function Ox(n){if(!Gn(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function a1(n,e){const t=e.x-n.x,r=e.y-n.y,s=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*at&&(o+=At),{angle:o,distance:s}}function hO(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Or(n){return(n%At+At)%At}function jd(n,e,t,r){const s=Or(n),o=Or(e),l=Or(t),c=Or(o-s),h=Or(l-s),f=Or(s-o),g=Or(s-l);return s===o||s===l||r&&o===l||c>h&&f<g}function xn(n,e,t){return Math.max(e,Math.min(t,n))}function dO(n){return xn(n,-32768,32767)}function vo(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function cy(n,e,t){t=t||(l=>n[l]<e);let r=n.length-1,s=0,o;for(;r-s>1;)o=s+r>>1,t(o)?s=o:r=o;return{lo:s,hi:r}}const Jp=(n,e,t,r)=>cy(n,t,r?s=>{const o=n[s][e];return o<t||o===t&&n[s+1][e]===t}:s=>n[s][e]<t),fO=(n,e,t)=>cy(n,t,r=>n[r][e]>=t);function mO(n,e,t){let r=0,s=n.length;for(;r<s&&n[r]<e;)r++;for(;s>r&&n[s-1]>t;)s--;return r>0||s<n.length?n.slice(r,s):n}const l1=["push","pop","shift","splice","unshift"];function pO(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),l1.forEach(t=>{const r="_onData"+ly(t),s=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=s.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...o)}),l}})})}function Lx(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(l1.forEach(o=>{delete n[o]}),delete n._chartjs)}function c1(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const u1=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function h1(n,e){let t=[],r=!1;return function(...s){t=s,r||(r=!0,u1.call(window,()=>{r=!1,n.apply(e,t)}))}}function gO(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const d1=n=>n==="start"?"left":n==="end"?"right":"center",Dn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,yO=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e,jh=n=>n===0||n===1,Vx=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*At/t)),Fx=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*At/t)+1,kc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Dt)+1,easeOutSine:n=>Math.sin(n*Dt),easeInOutSine:n=>-.5*(Math.cos(at*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>jh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>jh(n)?n:Vx(n,.075,.3),easeOutElastic:n=>jh(n)?n:Fx(n,.075,.3),easeInOutElastic(n){return jh(n)?n:n<.5?.5*Vx(n*2,.1125,.45):.5+.5*Fx(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-kc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?kc.easeInBounce(n*2)*.5:kc.easeOutBounce(n*2-1)*.5+.5};function f1(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ux(n){return f1(n)?n:new Vc(n)}function up(n){return f1(n)?n:new Vc(n).saturate(.5).darken(.1).hexString()}const vO=["x","y","borderWidth","radius","tension"],_O=["color","borderColor","backgroundColor"];function xO(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:_O},numbers:{type:"number",properties:vO}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function wO(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zx=new Map;function bO(n,e){e=e||{};const t=n+JSON.stringify(e);let r=zx.get(t);return r||(r=new Intl.NumberFormat(n,e),zx.set(t,r)),r}function uy(n,e,t){return bO(e,t).format(n)}const EO={values(n){return Ut(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let s,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(s="scientific"),o=SO(n,t)}const l=o1(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:s,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),uy(n,r,h)}};function SO(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var m1={formatters:EO};function TO(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:m1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ao=Object.create(null),Zp=Object.create(null);function Ac(n,e){if(!e)return n;const t=e.split(".");for(let r=0,s=t.length;r<s;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function hp(n,e,t){return typeof e=="string"?Fc(Ac(n,e),t):Fc(Ac(n,""),e)}class IO{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>up(s.backgroundColor),this.hoverBorderColor=(r,s)=>up(s.borderColor),this.hoverColor=(r,s)=>up(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return hp(this,e,t)}get(e){return Ac(this,e)}describe(e,t){return hp(Zp,e,t)}override(e,t){return hp(Ao,e,t)}route(e,t,r,s){const o=Ac(this,e),l=Ac(this,r),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],f=l[s];return He(h)?Object.assign({},f,h):We(h,f)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var bt=new IO({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[xO,wO,TO]);function CO(n){return!n||Ze(n.size)||Ze(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Bx(n,e,t,r,s){let o=e[s];return o||(o=e[s]=n.measureText(s).width,t.push(s)),o>r&&(r=o),r}function fo(n,e,t){const r=n.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*r)/r+s}function $x(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Wx(n,e,t,r){p1(n,e,t,r,null)}function p1(n,e,t,r,s){let o,l,c,h,f,g,y,_;const E=e.pointStyle,I=e.rotation,T=e.radius;let C=(I||0)*iO;if(E&&typeof E=="object"&&(o=E.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(C),n.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),n.restore();return}if(!(isNaN(T)||T<=0)){switch(n.beginPath(),E){default:s?n.ellipse(t,r,s/2,T,0,0,At):n.arc(t,r,T,0,At),n.closePath();break;case"triangle":g=s?s/2:T,n.moveTo(t+Math.sin(C)*g,r-Math.cos(C)*T),C+=jx,n.lineTo(t+Math.sin(C)*g,r-Math.cos(C)*T),C+=jx,n.lineTo(t+Math.sin(C)*g,r-Math.cos(C)*T),n.closePath();break;case"rectRounded":f=T*.516,h=T-f,l=Math.cos(C+ho)*h,y=Math.cos(C+ho)*(s?s/2-f:h),c=Math.sin(C+ho)*h,_=Math.sin(C+ho)*(s?s/2-f:h),n.arc(t-y,r-c,f,C-at,C-Dt),n.arc(t+_,r-l,f,C-Dt,C),n.arc(t+y,r+c,f,C,C+Dt),n.arc(t-_,r+l,f,C+Dt,C+at),n.closePath();break;case"rect":if(!I){h=Math.SQRT1_2*T,g=s?s/2:h,n.rect(t-g,r-h,2*g,2*h);break}C+=ho;case"rectRot":y=Math.cos(C)*(s?s/2:T),l=Math.cos(C)*T,c=Math.sin(C)*T,_=Math.sin(C)*(s?s/2:T),n.moveTo(t-y,r-c),n.lineTo(t+_,r-l),n.lineTo(t+y,r+c),n.lineTo(t-_,r+l),n.closePath();break;case"crossRot":C+=ho;case"cross":y=Math.cos(C)*(s?s/2:T),l=Math.cos(C)*T,c=Math.sin(C)*T,_=Math.sin(C)*(s?s/2:T),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+_,r-l),n.lineTo(t-_,r+l);break;case"star":y=Math.cos(C)*(s?s/2:T),l=Math.cos(C)*T,c=Math.sin(C)*T,_=Math.sin(C)*(s?s/2:T),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+_,r-l),n.lineTo(t-_,r+l),C+=ho,y=Math.cos(C)*(s?s/2:T),l=Math.cos(C)*T,c=Math.sin(C)*T,_=Math.sin(C)*(s?s/2:T),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+_,r-l),n.lineTo(t-_,r+l);break;case"line":l=s?s/2:Math.cos(C)*T,c=Math.sin(C)*T,n.moveTo(t-l,r-c),n.lineTo(t+l,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(C)*(s?s/2:T),r+Math.sin(C)*T);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function g1(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function hy(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function dy(n){n.restore()}function kO(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ze(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function AO(n,e,t,r,s){if(s.strikethrough||s.underline){const o=n.measureText(r),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,g=s.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=s.decorationWidth||2,n.moveTo(l,g),n.lineTo(c,g),n.stroke()}}function RO(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Md(n,e,t,r,s,o={}){const l=Ut(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,f;for(n.save(),n.font=s.string,kO(n,o),h=0;h<l.length;++h)f=l[h],o.backdrop&&RO(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ze(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,r,o.maxWidth)),n.fillText(f,t,r,o.maxWidth),AO(n,t,r,f,o),r+=Number(s.lineHeight);n.restore()}function Od(n,e){const{x:t,y:r,w:s,h:o,radius:l}=e;n.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*at,at,!0),n.lineTo(t,r+o-l.bottomLeft),n.arc(t+l.bottomLeft,r+o-l.bottomLeft,l.bottomLeft,at,Dt,!0),n.lineTo(t+s-l.bottomRight,r+o),n.arc(t+s-l.bottomRight,r+o-l.bottomRight,l.bottomRight,Dt,0,!0),n.lineTo(t+s,r+l.topRight),n.arc(t+s-l.topRight,r+l.topRight,l.topRight,0,-Dt,!0),n.lineTo(t+l.topLeft,r)}const NO=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,PO=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function DO(n,e){const t=(""+n).match(NO);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const jO=n=>+n||0;function fy(n,e){const t={},r=He(e),s=r?Object.keys(e):e,o=He(n)?r?l=>We(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of s)t[l]=jO(o(l));return t}function y1(n){return fy(n,{top:"y",right:"x",bottom:"y",left:"x"})}function La(n){return fy(n,["topLeft","topRight","bottomLeft","bottomRight"])}function fr(n){const e=y1(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wn(n,e){n=n||{},e=e||bt.font;let t=We(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=We(n.style,e.style);r&&!(""+r).match(PO)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:We(n.family,e.family),lineHeight:DO(We(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:We(n.weight,e.weight),string:""};return s.string=CO(s),s}function Mh(n,e,t,r){let s,o,l;for(s=0,o=n.length;s<o;++s)if(l=n[s],l!==void 0&&l!==void 0)return l}function MO(n,e,t){const{min:r,max:s}=n,o=s1(e,(s-r)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(r,-Math.abs(o)),max:l(s,o)}}function al(n,e){return Object.assign(Object.create(n),e)}function my(n,e=[""],t,r,s=()=>n[0]){const o=t||n;typeof r>"u"&&(r=w1("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:s,override:c=>my([c,...n],e,o,r)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return _1(c,h,()=>$O(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return qx(c).includes(h)},ownKeys(c){return qx(c)},set(c,h,f){const g=c._storage||(c._storage=s());return c[h]=g[h]=f,delete c._keys,!0}})}function Ga(n,e,t,r){const s={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:v1(n,r),setContext:o=>Ga(n,o,t,r),override:o=>Ga(n.override(o),e,t,r)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return _1(o,l,()=>LO(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function v1(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=n;return{allKeys:s,scriptable:t,indexable:r,isScriptable:Pi(t)?t:()=>t,isIndexable:Pi(r)?r:()=>r}}const OO=(n,e)=>n?n+ly(e):e,py=(n,e)=>He(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _1(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function LO(n,e,t){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=n;let c=r[e];return Pi(c)&&l.isScriptable(e)&&(c=VO(e,c,n,t)),Ut(c)&&c.length&&(c=FO(e,c,n,l.isIndexable)),py(e,c)&&(c=Ga(c,s,o&&o[e],l)),c}function VO(n,e,t,r){const{_proxy:s,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||r);return c.delete(n),py(n,h)&&(h=gy(s._scopes,s,n,h)),h}function FO(n,e,t,r){const{_proxy:s,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(He(e[0])){const h=e,f=s._scopes.filter(g=>g!==h);e=[];for(const g of h){const y=gy(f,s,n,g);e.push(Ga(y,o,l&&l[n],c))}}return e}function x1(n,e,t){return Pi(n)?n(e,t):n}const UO=(n,e)=>n===!0?e:typeof n=="string"?ko(e,n):void 0;function zO(n,e,t,r,s){for(const o of e){const l=UO(t,o);if(l){n.add(l);const c=x1(l._fallback,t,s);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function gy(n,e,t,r){const s=e._rootScopes,o=x1(e._fallback,t,r),l=[...n,...s],c=new Set;c.add(r);let h=Hx(c,l,t,o||t,r);return h===null||typeof o<"u"&&o!==t&&(h=Hx(c,l,o,h,r),h===null)?!1:my(Array.from(c),[""],s,o,()=>BO(e,t,r))}function Hx(n,e,t,r,s){for(;t;)t=zO(n,e,t,r,s);return t}function BO(n,e,t){const r=n._getTarget();e in r||(r[e]={});const s=r[e];return Ut(s)&&He(t)?t:s||{}}function $O(n,e,t,r){let s;for(const o of e)if(s=w1(OO(o,n),t),typeof s<"u")return py(n,s)?gy(t,r,n,s):s}function w1(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function qx(n){let e=n._keys;return e||(e=n._keys=WO(n._scopes)),e}function WO(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}function yy(){return typeof window<"u"&&typeof document<"u"}function vy(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ld(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const mf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function HO(n,e){return mf(n).getPropertyValue(e)}const qO=["top","right","bottom","left"];function xo(n,e,t){const r={};t=t?"-"+t:"";for(let s=0;s<4;s++){const o=qO[s];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const KO=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function GO(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:s,offsetY:o}=r;let l=!1,c,h;if(KO(s,o,n.target))c=s,h=o;else{const f=e.getBoundingClientRect();c=r.clientX-f.left,h=r.clientY-f.top,l=!0}return{x:c,y:h,box:l}}function go(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,s=mf(t),o=s.boxSizing==="border-box",l=xo(s,"padding"),c=xo(s,"border","width"),{x:h,y:f,box:g}=GO(n,t),y=l.left+(g&&c.left),_=l.top+(g&&c.top);let{width:E,height:I}=e;return o&&(E-=l.width+c.width,I-=l.height+c.height),{x:Math.round((h-y)/E*t.width/r),y:Math.round((f-_)/I*t.height/r)}}function YO(n,e,t){let r,s;if(e===void 0||t===void 0){const o=n&&vy(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=mf(o),h=xo(c,"border","width"),f=xo(c,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,r=Ld(c.maxWidth,o,"clientWidth"),s=Ld(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||Pd,maxHeight:s||Pd}}const gi=n=>Math.round(n*10)/10;function QO(n,e,t,r){const s=mf(n),o=xo(s,"margin"),l=Ld(s.maxWidth,n,"clientWidth")||Pd,c=Ld(s.maxHeight,n,"clientHeight")||Pd,h=YO(n,e,t);let{width:f,height:g}=h;if(s.boxSizing==="content-box"){const _=xo(s,"border","width"),E=xo(s,"padding");f-=E.width+_.width,g-=E.height+_.height}return f=Math.max(0,f-o.width),g=Math.max(0,r?f/r:g-o.height),f=gi(Math.min(f,l,h.maxWidth)),g=gi(Math.min(g,c,h.maxHeight)),f&&!g&&(g=gi(f/2)),(e!==void 0||t!==void 0)&&r&&h.height&&g>h.height&&(g=h.height,f=gi(Math.floor(g*r))),{width:f,height:g}}function Kx(n,e,t){const r=e||1,s=gi(n.height*r),o=gi(n.width*r);n.height=gi(n.height),n.width=gi(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||l.height!==s||l.width!==o?(n.currentDevicePixelRatio=r,l.height=s,l.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const XO=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};yy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function Gx(n,e){const t=HO(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}const JO=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},ZO=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Va(n,e,t){return n?JO(e,t):ZO()}function b1(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function E1(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function Oh(n,e,t){return n.options.clip?n[t]:e[t]}function eL(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:Oh(t,e,"left"),right:Oh(t,e,"right"),top:Oh(r,e,"top"),bottom:Oh(r,e,"bottom")}:e}function tL(n,e){const t=e._clip;if(t.disabled)return!1;const r=eL(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}class nL{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,s){const o=t.listeners[s],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=u1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const o=r.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(s.draw(),this._notify(s,r,e,"progress")),o.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ms=new nL;const Yx="transparent",rL={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=Ux(n||Yx),s=r.valid&&Ux(e||Yx);return s&&s.valid?s.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class sL{constructor(e,t,r,s){const o=t[r];s=Mh([e.to,s,o,e.from]);const l=Mh([e.from,o,s]);this._active=!0,this._fn=e.fn||rL[e.type||typeof l],this._easing=kc[e.easing]||kc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const s=this._target[this._prop],o=r-this._start,l=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Mh([e.to,t,s,e.from]),this._from=Mh([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,s=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<r),!this._active){this._target[s]=c,this._notify(!0);return}if(t<0){this._target[s]=o;return}h=t/r%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[s]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][t]()}}class S1{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!He(e))return;const t=Object.keys(bt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const o=e[s];if(!He(o))return;const l={};for(const c of t)l[c]=o[c];(Ut(o.properties)&&o.properties||[s]).forEach(c=>{(c===s||!r.has(c))&&r.set(c,l)})})}_animateOptions(e,t){const r=t.options,s=oL(e,r);if(!s)return[];const o=this._createAnimations(s,r);return r.$shared&&iL(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,s=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){s.push(...this._animateOptions(e,t));continue}const g=t[f];let y=o[f];const _=r.get(f);if(y)if(_&&y.active()){y.update(_,g,c);continue}else y.cancel();if(!_||!_.duration){e[f]=g;continue}o[f]=y=new sL(_,e,f,g),s.push(y)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return ms.add(this._chart,r),!0}}function iL(n,e){const t=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const o=n[r[s]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function oL(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Qx(n,e){const t=n&&n.options||{},r=t.reverse,s=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:s,end:r?s:o}}function aL(n,e,t){if(t===!1)return!1;const r=Qx(n,t),s=Qx(e,t);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function lL(n){let e,t,r,s;return He(n)?(e=n.top,t=n.right,r=n.bottom,s=n.left):e=t=r=s=n,{top:e,right:t,bottom:r,left:s,disabled:n===!1}}function T1(n,e){const t=[],r=n._getSortedDatasetMetas(e);let s,o;for(s=0,o=r.length;s<o;++s)t.push(r[s].index);return t}function Xx(n,e,t,r={}){const s=n.keys,o=r.mode==="single";let l,c,h,f;if(e===null)return;let g=!1;for(l=0,c=s.length;l<c;++l){if(h=+s[l],h===t){if(g=!0,r.all)continue;break}f=n.values[h],Gn(f)&&(o||e===0||Ti(e)===Ti(f))&&(e+=f)}return!g&&!r.all?0:e}function cL(n,e){const{iScale:t,vScale:r}=e,s=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,f,g;for(h=0,f=l.length;h<f;++h)g=l[h],c[h]={[s]:g,[o]:n[g]};return c}function dp(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function uL(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function hL(n){const{min:e,max:t,minDefined:r,maxDefined:s}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function dL(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function Jx(n,e,t,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const o=n[s.index];if(t&&o>0||!t&&o<0)return s.index}return null}function Zx(n,e){const{chart:t,_cachedMeta:r}=n,s=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=r,h=o.axis,f=l.axis,g=uL(o,l,r),y=e.length;let _;for(let E=0;E<y;++E){const I=e[E],{[h]:T,[f]:C}=I,V=I._stacks||(I._stacks={});_=V[f]=dL(s,g,T),_[c]=C,_._top=Jx(_,l,!0,r.type),_._bottom=Jx(_,l,!1,r.type);const D=_._visualValues||(_._visualValues={});D[c]=C}}function fp(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function fL(n,e){return al(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mL(n,e,t){return al(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ac(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const s of e){const o=s._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const mp=n=>n==="reset"||n==="none",ew=(n,e)=>e?n:Object.assign({},n),pL=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:T1(t,!0),values:null};class _y{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=dp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ac(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),s=(y,_,E,I)=>y==="x"?_:y==="r"?I:E,o=t.xAxisID=We(r.xAxisID,fp(e,"x")),l=t.yAxisID=We(r.yAxisID,fp(e,"y")),c=t.rAxisID=We(r.rAxisID,fp(e,"r")),h=t.indexAxis,f=t.iAxisID=s(h,o,l,c),g=t.vAxisID=s(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lx(this._data,this),e._stacked&&ac(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(He(t)){const s=this._cachedMeta;this._data=cL(t,s)}else if(r!==t){if(r){Lx(r,this);const s=this._cachedMeta;ac(s),s._parsed=[]}t&&Object.isExtensible(t)&&pO(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=t._stacked;t._stacked=dp(t.vScale,t),t.stack!==r.stack&&(s=!0,ac(t),t.stack=r.stack),this._resyncElements(e),(s||o!==t._stacked)&&(Zx(this,t._parsed),t._stacked=dp(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:l}=r,c=o.axis;let h=e===0&&t===s.length?!0:r._sorted,f=e>0&&r._parsed[e-1],g,y,_;if(this._parsing===!1)r._parsed=s,r._sorted=!0,_=s;else{Ut(s[e])?_=this.parseArrayData(r,s,e,t):He(s[e])?_=this.parseObjectData(r,s,e,t):_=this.parsePrimitiveData(r,s,e,t);const E=()=>y[c]===null||f&&y[c]<f[c];for(g=0;g<t;++g)r._parsed[g+e]=y=_[g],h&&(E()&&(h=!1),f=y);r._sorted=h}l&&Zx(this,_)}parsePrimitiveData(e,t,r,s){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,f=o.getLabels(),g=o===l,y=new Array(s);let _,E,I;for(_=0,E=s;_<E;++_)I=_+r,y[_]={[c]:g||o.parse(f[I],I),[h]:l.parse(t[I],I)};return y}parseArrayData(e,t,r,s){const{xScale:o,yScale:l}=e,c=new Array(s);let h,f,g,y;for(h=0,f=s;h<f;++h)g=h+r,y=t[g],c[h]={x:o.parse(y[0],g),y:l.parse(y[1],g)};return c}parseObjectData(e,t,r,s){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(s);let g,y,_,E;for(g=0,y=s;g<y;++g)_=g+r,E=t[_],f[g]={x:o.parse(ko(E,c),_),y:l.parse(ko(E,h),_)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const s=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:T1(s,!0),values:t._stacks[e.axis]._visualValues};return Xx(c,l,o.index,{mode:r})}updateRangeFromParsed(e,t,r,s){const o=r[t.axis];let l=o===null?NaN:o;const c=s&&r._stacks[t.axis];s&&c&&(s.values=c,l=Xx(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,l=s.length,c=this._getOtherScale(e),h=pL(t,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:y}=hL(c);let _,E;function I(){E=s[_];const T=E[c.axis];return!Gn(E[e.axis])||g>T||y<T}for(_=0;_<l&&!(!I()&&(this.updateRangeFromParsed(f,e,E,h),o));++_);if(o){for(_=l-1;_>=0;--_)if(!I()){this.updateRangeFromParsed(f,e,E,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let s,o,l;for(s=0,o=t.length;s<o;++s)l=t[s][e.axis],Gn(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,s=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=lL(We(this.options.clip,aL(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,s=r.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||s.length-c,f=this.options.drawActiveElementsOnTop;let g;for(r.dataset&&r.dataset.draw(e,o,c,h),g=c;g<c+h;++g){const y=s[g];y.hidden||(y.active&&f?l.push(y):y.draw(e,o))}for(g=0;g<l.length;++g)l[g].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const s=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=mL(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=fL(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const s=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&Uc(r);if(c)return ew(c,h);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,e),y=s?[`${e}Hover`,"hover",e,""]:[e,""],_=f.getOptionScopes(this.getDataset(),g),E=Object.keys(bt.elements[e]),I=()=>this.getContext(r,s,t),T=f.resolveNamedOptions(_,E,I,y);return T.$shared&&(T.$shared=h,o[l]=Object.freeze(ew(T,h))),T}_resolveAnimations(e,t,r){const s=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(s.options.animation!==!1){const g=this.chart.config,y=g.datasetAnimationScopeKeys(this._type,t),_=g.getOptionScopes(this.getDataset(),y);h=g.createResolver(_,this.getContext(e,r,t))}const f=new S1(s,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||mp(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),s=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(t,o)||o!==s;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:l}}updateElement(e,t,r,s){mp(s)?Object.assign(e,r):this._resolveAnimations(t,s).update(e,r)}updateSharedOptions(e,t,r){e&&!mp(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,s){e.active=s;const o=this.getStyle(t,s);this._resolveAnimations(t,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const s=r.length,o=t.length,l=Math.min(o,s);l&&this.parse(0,l),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,t,r=!0){const s=this._cachedMeta,o=s.data,l=e+t;let c;const h=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(s._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,s){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,t);r._stacked&&ac(r,s)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,s]=e;this[t](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function gL(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let s=0,o=t.length;s<o;s++)r=r.concat(t[s].controller.getAllParsedValues(n));n._cache.$bar=c1(r.sort((s,o)=>s-o))}return n._cache.$bar}function yL(n){const e=n.iScale,t=gL(e,n.type);let r=e._length,s,o,l,c;const h=()=>{l===32767||l===-32768||(Uc(c)&&(r=Math.min(r,Math.abs(l-c)||r)),c=l)};for(s=0,o=t.length;s<o;++s)l=e.getPixelForValue(t[s]),h();for(c=void 0,s=0,o=e.ticks.length;s<o;++s)l=e.getPixelForTick(s),h();return r}function vL(n,e,t,r){const s=t.barThickness;let o,l;return Ze(s)?(o=e.min*t.categoryPercentage,l=t.barPercentage):(o=s*r,l=1),{chunk:o/r,ratio:l,start:e.pixels[n]-o/2}}function _L(n,e,t,r){const s=e.pixels,o=s[n];let l=n>0?s[n-1]:null,c=n<s.length-1?s[n+1]:null;const h=t.categoryPercentage;l===null&&(l=o-(c===null?e.end-e.start:c-o)),c===null&&(c=o+o-l);const f=o-(o-Math.min(l,c))/2*h;return{chunk:Math.abs(c-l)/2*h/r,ratio:t.barPercentage,start:f}}function xL(n,e,t,r){const s=t.parse(n[0],r),o=t.parse(n[1],r),l=Math.min(s,o),c=Math.max(s,o);let h=l,f=c;Math.abs(l)>Math.abs(c)&&(h=c,f=l),e[t.axis]=f,e._custom={barStart:h,barEnd:f,start:s,end:o,min:l,max:c}}function I1(n,e,t,r){return Ut(n)?xL(n,e,t,r):e[t.axis]=t.parse(n,r),e}function tw(n,e,t,r){const s=n.iScale,o=n.vScale,l=s.getLabels(),c=s===o,h=[];let f,g,y,_;for(f=t,g=t+r;f<g;++f)_=e[f],y={},y[s.axis]=c||s.parse(l[f],f),h.push(I1(_,y,o,f));return h}function pp(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function wL(n,e,t){return n!==0?Ti(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function bL(n){let e,t,r,s,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(s="end",o="start"):(s="start",o="end"),{start:t,end:r,reverse:e,top:s,bottom:o}}function EL(n,e,t,r){let s=e.borderSkipped;const o={};if(!s){n.borderSkipped=o;return}if(s===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:c,reverse:h,top:f,bottom:g}=bL(n);s==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?s=f:(t._bottom||0)===r?s=g:(o[nw(g,l,c,h)]=!0,s=f)),o[nw(s,l,c,h)]=!0,n.borderSkipped=o}function nw(n,e,t,r){return r?(n=SL(n,e,t),n=rw(n,t,e)):n=rw(n,e,t),n}function SL(n,e,t){return n===e?t:n===t?e:n}function rw(n,e,t){return n==="start"?e:n==="end"?t:n}function TL(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class IL extends _y{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,r,s){return tw(e,t,r,s)}parseArrayData(e,t,r,s){return tw(e,t,r,s)}parseObjectData(e,t,r,s){const{iScale:o,vScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=o.axis==="x"?c:h,g=l.axis==="x"?c:h,y=[];let _,E,I,T;for(_=r,E=r+s;_<E;++_)T=t[_],I={},I[o.axis]=o.parse(ko(T,f),_),y.push(I1(ko(T,g),I,l,_));return y}updateRangeFromParsed(e,t,r,s){super.updateRangeFromParsed(e,t,r,s);const o=r._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:s}=t,o=this.getParsed(e),l=o._custom,c=pp(l)?"["+l.start+", "+l.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,s){const o=s==="reset",{index:l,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),f=c.isHorizontal(),g=this._getRuler(),{sharedOptions:y,includeOptions:_}=this._getSharedOptions(t,s);for(let E=t;E<t+r;E++){const I=this.getParsed(E),T=o||Ze(I[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(E),C=this._calculateBarIndexPixels(E,g),V=(I._stacks||{})[c.axis],D={horizontal:f,base:T.base,enableBorderRadius:!V||pp(I._custom)||l===V._top||l===V._bottom,x:f?T.head:C.center,y:f?C.center:T.head,height:f?C.size:Math.abs(T.size),width:f?Math.abs(T.size):C.size};_&&(D.options=y||this.resolveDataElementOptions(E,e[E].active?"active":s));const U=D.options||e[E].options;EL(D,U,V,l),TL(D,U,g.ratio),this.updateElement(e[E],E,D,s)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(g=>g.controller.options.grouped),o=r.options.stacked,l=[],c=this._cachedMeta.controller.getParsed(t),h=c&&c[r.axis],f=g=>{const y=g._parsed.find(E=>E[r.axis]===h),_=y&&y[g.vScale.axis];if(Ze(_)||isNaN(_))return!0};for(const g of s)if(!(t!==void 0&&f(g))&&((o===!1||l.indexOf(g.stack)===-1||o===void 0&&g.stack===void 0)&&l.push(g.stack),g.index===e))break;return l.length||l.push(void 0),l}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[We(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const s=this._getStacks(e,r),o=t!==void 0?s.indexOf(t):-1;return o===-1?s.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,s=[];let o,l;for(o=0,l=t.data.length;o<l;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const c=e.barThickness;return{min:c||yL(t),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:s},options:{base:o,minBarLength:l}}=this,c=o||0,h=this.getParsed(e),f=h._custom,g=pp(f);let y=h[t.axis],_=0,E=r?this.applyStack(t,h,r):y,I,T;E!==y&&(_=E-y,E=y),g&&(y=f.barStart,E=f.barEnd-f.barStart,y!==0&&Ti(y)!==Ti(f.barEnd)&&(_=0),_+=y);const C=!Ze(o)&&!g?o:_;let V=t.getPixelForValue(C);if(this.chart.getDataVisibility(e)?I=t.getPixelForValue(_+E):I=V,T=I-V,Math.abs(T)<l){T=wL(T,t,c)*l,y===c&&(V-=T/2);const D=t.getPixelForDecimal(0),U=t.getPixelForDecimal(1),H=Math.min(D,U),O=Math.max(D,U);V=Math.max(Math.min(V,O),H),I=V+T,r&&!g&&(h._stacks[t.axis]._visualValues[s]=t.getValueForPixel(I)-t.getValueForPixel(V))}if(V===t.getPixelForValue(c)){const D=Ti(T)*t.getLineWidthForValue(c)/2;V+=D,T-=D}return{size:T,base:V,head:I,center:I+T/2}}_calculateBarIndexPixels(e,t){const r=t.scale,s=this.options,o=s.skipNull,l=We(s.maxBarThickness,1/0);let c,h;const f=this._getAxisCount();if(t.grouped){const g=o?this._getStackCount(e):t.stackCount,y=s.barThickness==="flex"?_L(e,t,s,g*f):vL(e,t,s,g*f),_=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(We(_,this.getFirstScaleIdForIndexAxis())),I=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+E;c=y.start+y.chunk*I+y.chunk/2,h=Math.min(l,y.chunk*y.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),h=Math.min(l,t.min*t.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,s=r.length;let o=0;for(;o<s;++o)this.getParsed(o)[t.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}function CL(n,e,t){let r=1,s=1,o=0,l=0;if(e<At){const c=n,h=c+e,f=Math.cos(c),g=Math.sin(c),y=Math.cos(h),_=Math.sin(h),E=(U,H,O)=>jd(U,c,h,!0)?1:Math.max(H,H*t,O,O*t),I=(U,H,O)=>jd(U,c,h,!0)?-1:Math.min(H,H*t,O,O*t),T=E(0,f,y),C=E(Dt,g,_),V=I(at,f,y),D=I(at+Dt,g,_);r=(T-V)/2,s=(C-D)/2,o=-(T+V)/2,l=-(C+D)/2}return{ratioX:r,ratioY:s,offsetX:o,offsetY:l}}class kL extends _y{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:s,color:o,useBorderRadius:l,borderRadius:c}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((h,f)=>{const y=e.getDatasetMeta(0).controller.getStyle(f);return{text:h,fillStyle:y.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(f),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:s,pointStyle:r,borderRadius:l&&(c||y.borderRadius),index:f}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=h=>+r[h];if(He(r[e])){const{key:h="value"}=this._parsing;o=f=>+ko(r[f],h)}let l,c;for(l=e,c=e+t;l<c;++l)s._parsed[l]=o(l)}}_getRotation(){return _s(this.options.rotation-90)}_getCircumference(){return _s(this.options.circumference)}_getRotationExtents(){let e=At,t=-At;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),l=s._getCircumference();e=Math.min(e,o),t=Math.max(t,o+l)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,s=this._cachedMeta,o=s.data,l=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-l)/2,0),h=Math.min(ZM(this.options.cutout,c),1),f=this._getRingWeight(this.index),{circumference:g,rotation:y}=this._getRotationExtents(),{ratioX:_,ratioY:E,offsetX:I,offsetY:T}=CL(y,g,h),C=(r.width-l)/_,V=(r.height-l)/E,D=Math.max(Math.min(C,V)/2,0),U=s1(this.options.radius,D),H=Math.max(U*h,0),O=(U-H)/this._getVisibleDatasetWeightTotal();this.offsetX=I*U,this.offsetY=T*U,s.total=this.calculateTotal(),this.outerRadius=U-O*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-O*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/At)}updateElements(e,t,r,s){const o=s==="reset",l=this.chart,c=l.chartArea,f=l.options.animation,g=(c.left+c.right)/2,y=(c.top+c.bottom)/2,_=o&&f.animateScale,E=_?0:this.innerRadius,I=_?0:this.outerRadius,{sharedOptions:T,includeOptions:C}=this._getSharedOptions(t,s);let V=this._getRotation(),D;for(D=0;D<t;++D)V+=this._circumference(D,o);for(D=t;D<t+r;++D){const U=this._circumference(D,o),H=e[D],O={x:g+this.offsetX,y:y+this.offsetY,startAngle:V,endAngle:V+U,circumference:U,outerRadius:I,innerRadius:E};C&&(O.options=T||this.resolveDataElementOptions(D,H.active?"active":s)),V+=U,this.updateElement(H,D,O,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,s;for(s=0;s<t.length;s++){const o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?At*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=uy(t._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const r=this.chart;let s,o,l,c,h;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){l=r.getDatasetMeta(s),e=l.data,c=l.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)h=c.resolveDataElementOptions(s),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,s=e.length;r<s;++r){const o=this.resolveDataElementOptions(r);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(We(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class AL extends kL{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function mo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xy{static override(e){Object.assign(xy.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return mo()}parse(){return mo()}format(){return mo()}add(){return mo()}diff(){return mo()}startOf(){return mo()}endOf(){return mo()}}var RL={_date:xy};function NL(n,e,t,r){const{controller:s,data:o,_sorted:l}=n,c=s._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const f=c._reversePixels?fO:Jp;if(r){if(s._sharedOptions){const g=o[0],y=typeof g.getRange=="function"&&g.getRange(e);if(y){const _=f(o,e,t-y),E=f(o,e,t+y);return{lo:_.lo,hi:E.hi}}}}else{const g=f(o,e,t);if(h){const{vScale:y}=s._cachedMeta,{_parsed:_}=n,E=_.slice(0,g.lo+1).reverse().findIndex(T=>!Ze(T[y.axis]));g.lo-=Math.max(0,E);const I=_.slice(g.hi).findIndex(T=>!Ze(T[y.axis]));g.hi+=Math.max(0,I)}return g}}return{lo:0,hi:o.length-1}}function pf(n,e,t,r,s){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:f,data:g}=o[c],{lo:y,hi:_}=NL(o[c],e,l,s);for(let E=y;E<=_;++E){const I=g[E];I.skip||r(I,f,E)}}}function PL(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,s){const o=e?Math.abs(r.x-s.x):0,l=t?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function gp(n,e,t,r,s){const o=[];return!s&&!n.isPointInArea(e)||pf(n,t,e,function(c,h,f){!s&&!g1(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&o.push({element:c,datasetIndex:h,index:f})},!0),o}function DL(n,e,t,r){let s=[];function o(l,c,h){const{startAngle:f,endAngle:g}=l.getProps(["startAngle","endAngle"],r),{angle:y}=a1(l,{x:e.x,y:e.y});jd(y,f,g)&&s.push({element:l,datasetIndex:c,index:h})}return pf(n,t,e,o),s}function jL(n,e,t,r,s,o){let l=[];const c=PL(t);let h=Number.POSITIVE_INFINITY;function f(g,y,_){const E=g.inRange(e.x,e.y,s);if(r&&!E)return;const I=g.getCenterPoint(s);if(!(!!o||n.isPointInArea(I))&&!E)return;const C=c(e,I);C<h?(l=[{element:g,datasetIndex:y,index:_}],h=C):C===h&&l.push({element:g,datasetIndex:y,index:_})}return pf(n,t,e,f),l}function yp(n,e,t,r,s,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?DL(n,e,t,s):jL(n,e,t,r,s,o)}function sw(n,e,t,r,s){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return pf(n,t,e,(h,f,g)=>{h[l]&&h[l](e[t],s)&&(o.push({element:h,datasetIndex:f,index:g}),c=c||h.inRange(e.x,e.y,s))}),r&&!c?[]:o}var ML={modes:{index(n,e,t,r){const s=go(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?gp(n,s,o,r,l):yp(n,s,o,!1,r,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const g=c[0].index,y=f.data[g];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:g})}),h):[]},dataset(n,e,t,r){const s=go(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?gp(n,s,o,r,l):yp(n,s,o,!1,r,l);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let g=0;g<f.length;++g)c.push({element:f[g],datasetIndex:h,index:g})}return c},point(n,e,t,r){const s=go(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return gp(n,s,o,r,l)},nearest(n,e,t,r){const s=go(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return yp(n,s,o,t.intersect,r,l)},x(n,e,t,r){const s=go(e,n);return sw(n,s,"x",t.intersect,r)},y(n,e,t,r){const s=go(e,n);return sw(n,s,"y",t.intersect,r)}}};const C1=["left","top","right","bottom"];function lc(n,e){return n.filter(t=>t.pos===e)}function iw(n,e){return n.filter(t=>C1.indexOf(t.pos)===-1&&t.box.axis===e)}function cc(n,e){return n.sort((t,r)=>{const s=e?r:t,o=e?t:r;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function OL(n){const e=[];let t,r,s,o,l,c;for(t=0,r=(n||[]).length;t<r;++t)s=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=s,e.push({index:t,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:l&&o+l,stackWeight:c});return e}function LL(n){const e={};for(const t of n){const{stack:r,pos:s,stackWeight:o}=t;if(!r||!C1.includes(s))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function VL(n,e){const t=LL(n),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,f=t[c.stack],g=f&&c.stackWeight/f.weight;c.horizontal?(c.width=g?g*r:h&&e.availableWidth,c.height=s):(c.width=r,c.height=g?g*s:h&&e.availableHeight)}return t}function FL(n){const e=OL(n),t=cc(e.filter(f=>f.box.fullSize),!0),r=cc(lc(e,"left"),!0),s=cc(lc(e,"right")),o=cc(lc(e,"top"),!0),l=cc(lc(e,"bottom")),c=iw(e,"x"),h=iw(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:s.concat(h).concat(l).concat(c),chartArea:lc(e,"chartArea"),vertical:r.concat(s).concat(h),horizontal:o.concat(l).concat(c)}}function ow(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function k1(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function UL(n,e,t,r){const{pos:s,box:o}=t,l=n.maxPadding;if(!He(s)){t.size&&(n[s]-=t.size);const y=r[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,n[s]+=t.size}o.getPadding&&k1(l,o.getPadding());const c=Math.max(0,e.outerWidth-ow(l,n,"left","right")),h=Math.max(0,e.outerHeight-ow(l,n,"top","bottom")),f=c!==n.w,g=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:f,other:g}:{same:g,other:f}}function zL(n){const e=n.maxPadding;function t(r){const s=Math.max(e[r]-n[r],0);return n[r]+=s,s}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function BL(n,e){const t=e.maxPadding;function r(s){const o={left:0,top:0,right:0,bottom:0};return s.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return r(n?["left","right"]:["top","bottom"])}function _c(n,e,t,r){const s=[];let o,l,c,h,f,g;for(o=0,l=n.length,f=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,BL(c.horizontal,e));const{same:y,other:_}=UL(e,t,c,r);f|=y&&s.length,g=g||_,h.fullSize||s.push(c)}return f&&_c(s,e,t,r)||g}function Lh(n,e,t,r,s){n.top=t,n.left=e,n.right=e+r,n.bottom=t+s,n.width=r,n.height=s}function aw(n,e,t,r){const s=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,f=r[c.stack]||{placed:0,weight:1},g=c.stackWeight/f.weight||1;if(c.horizontal){const y=e.w*g,_=f.size||h.height;Uc(f.start)&&(l=f.start),h.fullSize?Lh(h,s.left,l,t.outerWidth-s.right-s.left,_):Lh(h,e.left+f.placed,l,y,_),f.start=l,f.placed+=y,l=h.bottom}else{const y=e.h*g,_=f.size||h.width;Uc(f.start)&&(o=f.start),h.fullSize?Lh(h,o,s.top,_,t.outerHeight-s.bottom-s.top):Lh(h,o,e.top+f.placed,_,y),f.start=o,f.placed+=y,o=h.right}}e.x=o,e.y=l}var yi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const s=fr(n.options.layout.padding),o=Math.max(e-s.width,0),l=Math.max(t-s.height,0),c=FL(n.boxes),h=c.vertical,f=c.horizontal;Xe(n.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});const g=h.reduce((T,C)=>C.box.options&&C.box.options.display===!1?T:T+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/g,hBoxMaxHeight:l/2}),_=Object.assign({},s);k1(_,fr(r));const E=Object.assign({maxPadding:_,w:o,h:l,x:s.left,y:s.top},s),I=VL(h.concat(f),y);_c(c.fullSize,E,y,I),_c(h,E,y,I),_c(f,E,y,I)&&_c(h,E,y,I),zL(E),aw(c.leftAndTop,E,y,I),E.x+=E.w,E.y+=E.h,aw(c.rightAndBottom,E,y,I),n.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},Xe(c.chartArea,T=>{const C=T.box;Object.assign(C,n.chartArea),C.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class A1{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,s){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):r)}}isAttached(e){return!0}updateConfig(e){}}class $L extends A1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const sd="$chartjs",WL={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lw=n=>n===null||n==="";function HL(n,e){const t=n.style,r=n.getAttribute("height"),s=n.getAttribute("width");if(n[sd]={initial:{height:r,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",lw(s)){const o=Gx(n,"width");o!==void 0&&(n.width=o)}if(lw(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=Gx(n,"height");o!==void 0&&(n.height=o)}return n}const R1=XO?{passive:!0}:!1;function qL(n,e,t){n&&n.addEventListener(e,t,R1)}function KL(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,R1)}function GL(n,e){const t=WL[n.type]||n.type,{x:r,y:s}=go(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Vd(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function YL(n,e,t){const r=n.canvas,s=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Vd(c.addedNodes,r),l=l&&!Vd(c.removedNodes,r);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function QL(n,e,t){const r=n.canvas,s=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Vd(c.removedNodes,r),l=l&&!Vd(c.addedNodes,r);l&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const zc=new Map;let cw=0;function N1(){const n=window.devicePixelRatio;n!==cw&&(cw=n,zc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function XL(n,e){zc.size||window.addEventListener("resize",N1),zc.set(n,e)}function JL(n){zc.delete(n),zc.size||window.removeEventListener("resize",N1)}function ZL(n,e,t){const r=n.canvas,s=r&&vy(r);if(!s)return;const o=h1((c,h)=>{const f=s.clientWidth;t(c,h),f<s.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,g=h.contentRect.height;f===0&&g===0||o(f,g)});return l.observe(s),XL(n,o),l}function vp(n,e,t){t&&t.disconnect(),e==="resize"&&JL(n)}function e4(n,e,t){const r=n.canvas,s=h1(o=>{n.ctx!==null&&t(GL(o,n))},n);return qL(r,e,s),s}class t4 extends A1{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(HL(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[sd])return!1;const r=t[sd].initial;["height","width"].forEach(o=>{const l=r[o];Ze(l)?t.removeAttribute(o):t.setAttribute(o,l)});const s=r.style||{};return Object.keys(s).forEach(o=>{t.style[o]=s[o]}),t.width=t.width,delete t[sd],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),l={attach:YL,detach:QL,resize:ZL}[t]||e4;s[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),s=r[t];if(!s)return;({attach:vp,detach:vp,resize:vp}[t]||KL)(e,t,s),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,s){return QO(e,t,r,s)}isAttached(e){const t=e&&vy(e);return!!(t&&t.isConnected)}}function n4(n){return!yy()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?$L:t4}class ll{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Dd(this.x)&&Dd(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const s={};return e.forEach(o=>{s[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),s}}function r4(n,e){const t=n.options.ticks,r=s4(n),s=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?o4(e):[],l=o.length,c=o[0],h=o[l-1],f=[];if(l>s)return a4(e,f,o,l/s),f;const g=i4(o,e,s);if(l>0){let y,_;const E=l>1?Math.round((h-c)/(l-1)):null;for(Vh(e,f,g,Ze(E)?0:c-E,c),y=0,_=l-1;y<_;y++)Vh(e,f,g,o[y],o[y+1]);return Vh(e,f,g,h,Ze(E)?e.length:h+E),f}return Vh(e,f,g),f}function s4(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),s=n._maxLength/t;return Math.floor(Math.min(r,s))}function i4(n,e,t){const r=l4(n),s=e.length/t;if(!r)return Math.max(s,1);const o=oO(r);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>s)return h}return Math.max(s,1)}function o4(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function a4(n,e,t,r){let s=0,o=t[0],l;for(r=Math.ceil(r),l=0;l<n.length;l++)l===o&&(e.push(n[l]),s++,o=t[s*r])}function Vh(n,e,t,r,s){const o=We(r,0),l=Math.min(We(s,n.length),n.length);let c=0,h,f,g;for(t=Math.ceil(t),s&&(h=s-r,t=h/Math.floor(h/t)),g=o;g<0;)c++,g=Math.round(o+c*t);for(f=Math.max(o,0);f<l;f++)f===g&&(e.push(n[f]),c++,g=Math.round(o+c*t))}function l4(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const c4=n=>n==="left"?"right":n==="right"?"left":n,uw=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,hw=(n,e)=>Math.min(e||n,n);function dw(n,e){const t=[],r=n.length/e,s=n.length;let o=0;for(;o<s;o+=r)t.push(n[Math.floor(o)]);return t}function u4(n,e,t){const r=n.ticks.length,s=Math.min(e,r-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(s),f;if(!(t&&(r===1?f=Math.max(h-o,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(s-1))/2,h+=s<e?f:-f,h<o-c||h>l+c)))return h}function h4(n,e){Xe(n,t=>{const r=t.gc,s=r.length/2;let o;if(s>e){for(o=0;o<s;++o)delete t.data[r[o]];r.splice(0,s)}})}function uc(n){return n.drawTicks?n.tickLength:0}function fw(n,e){if(!n.display)return 0;const t=wn(n.font,e),r=fr(n.padding);return(Ut(n.text)?n.text.length:1)*t.lineHeight+r.height}function d4(n,e){return al(n,{scale:e,type:"scale"})}function f4(n,e,t){return al(n,{tick:t,index:e,type:"tick"})}function m4(n,e,t){let r=d1(n);return(t&&e!=="right"||!t&&e==="right")&&(r=c4(r)),r}function p4(n,e,t,r){const{top:s,left:o,bottom:l,right:c,chart:h}=n,{chartArea:f,scales:g}=h;let y=0,_,E,I;const T=l-s,C=c-o;if(n.isHorizontal()){if(E=Dn(r,o,c),He(t)){const V=Object.keys(t)[0],D=t[V];I=g[V].getPixelForValue(D)+T-e}else t==="center"?I=(f.bottom+f.top)/2+T-e:I=uw(n,t,e);_=c-o}else{if(He(t)){const V=Object.keys(t)[0],D=t[V];E=g[V].getPixelForValue(D)-C+e}else t==="center"?E=(f.left+f.right)/2-C+e:E=uw(n,t,e);I=Dn(r,l,s),y=t==="left"?-Dt:Dt}return{titleX:E,titleY:I,maxWidth:_,rotation:y}}class cl extends ll{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:s}=this;return e=Pr(e,Number.POSITIVE_INFINITY),t=Pr(t,Number.NEGATIVE_INFINITY),r=Pr(r,Number.POSITIVE_INFINITY),s=Pr(s,Number.NEGATIVE_INFINITY),{min:Pr(e,r),max:Pr(t,s),minDefined:Gn(e),maxDefined:Gn(t)}}getMinMax(e){let{min:t,max:r,minDefined:s,maxDefined:o}=this.getUserBounds(),l;if(s&&o)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)l=c[h].controller.getMinMax(this,e),s||(t=Math.min(t,l.min)),o||(r=Math.max(r,l.max));return t=o&&t>r?r:t,r=s&&t>r?t:r,{min:Pr(t,Pr(r,t)),max:Pr(r,Pr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){it(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:s,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=MO(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?dw(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=r4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){it(this.options.afterUpdate,[this])}beforeSetDimensions(){it(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){it(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),it(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){it(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,s,o;for(r=0,s=e.length;r<s;r++)o=e[r],o.label=it(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){it(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){it(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=hw(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,o=t.maxRotation;let l=s,c,h,f;if(!this._isVisible()||!t.display||s>=o||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const g=this._getLabelSizes(),y=g.widest.width,_=g.highest.height,E=xn(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/r:E/(r-1),y+6>c&&(c=E/(r-(e.offset?.5:1)),h=this.maxHeight-uc(e.grid)-t.padding-fw(e.title,this.chart.options.font),f=Math.sqrt(y*y+_*_),l=uO(Math.min(Math.asin(xn((g.highest.height+6)/c,-1,1)),Math.asin(xn(h/f,-1,1))-Math.asin(xn(_/f,-1,1)))),l=Math.max(s,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){it(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){it(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:s,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=fw(s,t.options.font);if(c?(e.width=this.maxWidth,e.height=uc(o)+h):(e.height=this.maxHeight,e.width=uc(o)+h),r.display&&this.ticks.length){const{first:f,last:g,widest:y,highest:_}=this._getLabelSizes(),E=r.padding*2,I=_s(this.labelRotation),T=Math.cos(I),C=Math.sin(I);if(c){const V=r.mirror?0:C*y.width+T*_.height;e.height=Math.min(this.maxHeight,e.height+V+E)}else{const V=r.mirror?0:T*y.width+C*_.height;e.width=Math.min(this.maxWidth,e.width+V+E)}this._calculatePadding(f,g,C,T)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,s){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const g=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let _=0,E=0;h?f?(_=s*e.width,E=r*t.height):(_=r*e.height,E=s*t.width):o==="start"?E=t.width:o==="end"?_=e.width:o!=="inner"&&(_=e.width/2,E=t.width/2),this.paddingLeft=Math.max((_-g+l)*this.width/(this.width-g),0),this.paddingRight=Math.max((E-y+l)*this.width/(this.width-y),0)}else{let g=t.height/2,y=e.height/2;o==="start"?(g=0,y=e.height):o==="end"&&(g=t.height,y=0),this.paddingTop=g+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){it(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Ze(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=dw(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:s,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/hw(t,r));let f=0,g=0,y,_,E,I,T,C,V,D,U,H,O;for(y=0;y<t;y+=h){if(I=e[y].label,T=this._resolveTickFontOptions(y),s.font=C=T.string,V=o[C]=o[C]||{data:{},gc:[]},D=T.lineHeight,U=H=0,!Ze(I)&&!Ut(I))U=Bx(s,V.data,V.gc,U,I),H=D;else if(Ut(I))for(_=0,E=I.length;_<E;++_)O=I[_],!Ze(O)&&!Ut(O)&&(U=Bx(s,V.data,V.gc,U,O),H+=D);l.push(U),c.push(H),f=Math.max(U,f),g=Math.max(H,g)}h4(o,t);const q=l.indexOf(f),A=c.indexOf(g),k=P=>({width:l[P]||0,height:c[P]||0});return{first:k(0),last:k(t-1),widest:k(q),highest:k(A),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return dO(this._alignToPixels?fo(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=f4(this.getContext(),e,r))}return this.$context||(this.$context=d4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=_s(this.labelRotation),r=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*r>c*s?c/r:h/s:h*s<c*r?h/r:c/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,s=this.options,{grid:o,position:l,border:c}=s,h=o.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),_=uc(o),E=[],I=c.setContext(this.getContext()),T=I.display?I.width:0,C=T/2,V=function(J){return fo(r,J,T)};let D,U,H,O,q,A,k,P,F,L,B,j;if(l==="top")D=V(this.bottom),A=this.bottom-_,P=D-C,L=V(e.top)+C,j=e.bottom;else if(l==="bottom")D=V(this.top),L=e.top,j=V(e.bottom)-C,A=D+C,P=this.top+_;else if(l==="left")D=V(this.right),q=this.right-_,k=D-C,F=V(e.left)+C,B=e.right;else if(l==="right")D=V(this.left),F=e.left,B=V(e.right)-C,q=D+C,k=this.left+_;else if(t==="x"){if(l==="center")D=V((e.top+e.bottom)/2+.5);else if(He(l)){const J=Object.keys(l)[0],ae=l[J];D=V(this.chart.scales[J].getPixelForValue(ae))}L=e.top,j=e.bottom,A=D+C,P=A+_}else if(t==="y"){if(l==="center")D=V((e.left+e.right)/2);else if(He(l)){const J=Object.keys(l)[0],ae=l[J];D=V(this.chart.scales[J].getPixelForValue(ae))}q=D-C,k=q-_,F=e.left,B=e.right}const Ce=We(s.ticks.maxTicksLimit,y),oe=Math.max(1,Math.ceil(y/Ce));for(U=0;U<y;U+=oe){const J=this.getContext(U),ae=o.setContext(J),ee=c.setContext(J),ce=ae.lineWidth,z=ae.color,te=ee.dash||[],pe=ee.dashOffset,Ne=ae.tickWidth,Ee=ae.tickColor,Oe=ae.tickBorderDash||[],Pe=ae.tickBorderDashOffset;H=u4(this,U,h),H!==void 0&&(O=fo(r,H,ce),f?q=k=F=B=O:A=P=L=j=O,E.push({tx1:q,ty1:A,tx2:k,ty2:P,x1:F,y1:L,x2:B,y2:j,width:ce,color:z,borderDash:te,borderDashOffset:pe,tickWidth:Ne,tickColor:Ee,tickBorderDash:Oe,tickBorderDashOffset:Pe}))}return this._ticksLength=y,this._borderValue=D,E}_computeLabelItems(e){const t=this.axis,r=this.options,{position:s,ticks:o}=r,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:g,mirror:y}=o,_=uc(r.grid),E=_+g,I=y?-g:E,T=-_s(this.labelRotation),C=[];let V,D,U,H,O,q,A,k,P,F,L,B,j="middle";if(s==="top")q=this.bottom-I,A=this._getXAxisLabelAlignment();else if(s==="bottom")q=this.top+I,A=this._getXAxisLabelAlignment();else if(s==="left"){const oe=this._getYAxisLabelAlignment(_);A=oe.textAlign,O=oe.x}else if(s==="right"){const oe=this._getYAxisLabelAlignment(_);A=oe.textAlign,O=oe.x}else if(t==="x"){if(s==="center")q=(e.top+e.bottom)/2+E;else if(He(s)){const oe=Object.keys(s)[0],J=s[oe];q=this.chart.scales[oe].getPixelForValue(J)+E}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")O=(e.left+e.right)/2-E;else if(He(s)){const oe=Object.keys(s)[0],J=s[oe];O=this.chart.scales[oe].getPixelForValue(J)}A=this._getYAxisLabelAlignment(_).textAlign}t==="y"&&(h==="start"?j="top":h==="end"&&(j="bottom"));const Ce=this._getLabelSizes();for(V=0,D=c.length;V<D;++V){U=c[V],H=U.label;const oe=o.setContext(this.getContext(V));k=this.getPixelForTick(V)+o.labelOffset,P=this._resolveTickFontOptions(V),F=P.lineHeight,L=Ut(H)?H.length:1;const J=L/2,ae=oe.color,ee=oe.textStrokeColor,ce=oe.textStrokeWidth;let z=A;l?(O=k,A==="inner"&&(V===D-1?z=this.options.reverse?"left":"right":V===0?z=this.options.reverse?"right":"left":z="center"),s==="top"?f==="near"||T!==0?B=-L*F+F/2:f==="center"?B=-Ce.highest.height/2-J*F+F:B=-Ce.highest.height+F/2:f==="near"||T!==0?B=F/2:f==="center"?B=Ce.highest.height/2-J*F:B=Ce.highest.height-L*F,y&&(B*=-1),T!==0&&!oe.showLabelBackdrop&&(O+=F/2*Math.sin(T))):(q=k,B=(1-L)*F/2);let te;if(oe.showLabelBackdrop){const pe=fr(oe.backdropPadding),Ne=Ce.heights[V],Ee=Ce.widths[V];let Oe=B-pe.top,Pe=0-pe.left;switch(j){case"middle":Oe-=Ne/2;break;case"bottom":Oe-=Ne;break}switch(A){case"center":Pe-=Ee/2;break;case"right":Pe-=Ee;break;case"inner":V===D-1?Pe-=Ee:V>0&&(Pe-=Ee/2);break}te={left:Pe,top:Oe,width:Ee+pe.width,height:Ne+pe.height,color:oe.backdropColor}}C.push({label:H,font:P,textOffset:B,options:{rotation:T,color:ae,strokeColor:ee,strokeWidth:ce,textAlign:z,textBaseline:j,translation:[O,q],backdrop:te}})}return C}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-_s(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:s,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let f,g;return t==="left"?s?(g=this.right+o,r==="near"?f="left":r==="center"?(f="center",g+=h/2):(f="right",g+=h)):(g=this.right-c,r==="near"?f="right":r==="center"?(f="center",g-=h/2):(f="left",g=this.left)):t==="right"?s?(g=this.left+o,r==="near"?f="right":r==="center"?(f="center",g-=h/2):(f="left",g-=h)):(g=this.left+c,r==="near"?f="left":r==="center"?(f="center",g+=h/2):(f="right",g=this.right)):f="right",{textAlign:f,x:g}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:s,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,s,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(o=>o.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,f,g)=>{!g.width||!g.color||(r.save(),r.lineWidth=g.width,r.strokeStyle=g.color,r.setLineDash(g.borderDash||[]),r.lineDashOffset=g.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(t.display)for(o=0,l=s.length;o<l;++o){const h=s[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:s}}=this,o=r.setContext(this.getContext()),l=r.display?o.width:0;if(!l)return;const c=s.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,g,y,_;this.isHorizontal()?(f=fo(e,this.left,l)-l/2,g=fo(e,this.right,c)+c/2,y=_=h):(y=fo(e,this.top,l)-l/2,_=fo(e,this.bottom,c)+c/2,f=g=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,y),t.lineTo(g,_),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&hy(r,s);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,f=l.label,g=l.textOffset;Md(r,f,0,g,h,c)}s&&dy(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:s}}=this;if(!r.display)return;const o=wn(r.font),l=fr(r.padding),c=r.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||He(t)?(h+=l.bottom,Ut(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=l.top;const{titleX:f,titleY:g,maxWidth:y,rotation:_}=p4(this,h,t,c);Md(e,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:_,textAlign:m4(c,t,s),textBaseline:"middle",translation:[f,g]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=We(e.grid&&e.grid.z,-1),s=We(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==cl.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[r]===this.id&&(!e||c.type===e)&&s.push(c)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return wn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Fh{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;v4(t)&&(r=this.register(t));const s=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in s||(s[o]=e,g4(e,l,r),this.override&&bt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,s=this.scope;r in t&&delete t[r],s&&r in bt[s]&&(delete bt[s][r],this.override&&delete Ao[r])}}function g4(n,e,t){const r=Fc(Object.create(null),[t?bt.get(t):{},bt.get(e),n.defaults]);bt.set(e,r),n.defaultRoutes&&y4(e,n.defaultRoutes),n.descriptors&&bt.describe(e,n.descriptors)}function y4(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),s=r.pop(),o=[n].concat(r).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");bt.route(o,s,h,c)})}function v4(n){return"id"in n&&"defaults"in n}class _4{constructor(){this.controllers=new Fh(_y,"datasets",!0),this.elements=new Fh(ll,"elements"),this.plugins=new Fh(Object,"plugins"),this.scales=new Fh(cl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(s=>{const o=r||this._getRegistryForType(s);r||o.isForType(s)||o===this.plugins&&s.id?this._exec(e,o,s):Xe(s,l=>{const c=r||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,r){const s=ly(e);it(r["before"+s],[],r),t[e](r),it(r["after"+s],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var jr=new _4;class x4{constructor(){this._init=void 0}notify(e,t,r,s){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=s?this._descriptors(e).filter(s):this._descriptors(e),l=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),l}_notify(e,t,r,s){s=s||{};for(const o of e){const l=o.plugin,c=l[r],h=[t,s,o.options];if(it(c,h,l)===!1&&s.cancelable)return!1}return!0}invalidate(){Ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,s=We(r.options&&r.options.plugins,{}),o=w4(r);return s===!1&&!t?[]:E4(e,o,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,s=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(s(t,r),e,"stop"),this._notify(s(r,t),e,"start")}}function w4(n){const e={},t=[],r=Object.keys(jr.plugins.items);for(let o=0;o<r.length;o++)t.push(jr.getPlugin(r[o]));const s=n.plugins||[];for(let o=0;o<s.length;o++){const l=s[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function b4(n,e){return!e&&n===!1?null:n===!0?{}:n}function E4(n,{plugins:e,localIds:t},r,s){const o=[],l=n.getContext();for(const c of e){const h=c.id,f=b4(r[h],s);f!==null&&o.push({plugin:c,options:S4(n.config,{plugin:c,local:t[h]},f,l)})}return o}function S4(n,{plugin:e,local:t},r,s){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(r,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function eg(n,e){const t=bt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function T4(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function I4(n,e){return n===e?"_index_":"_value_"}function mw(n){if(n==="x"||n==="y"||n==="r")return n}function C4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function tg(n,...e){if(mw(n))return n;for(const t of e){const r=t.axis||C4(t.position)||n.length>1&&mw(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function pw(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function k4(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return pw(n,"x",t[0])||pw(n,"y",t[0])}return{}}function A4(n,e){const t=Ao[n.type]||{scales:{}},r=e.scales||{},s=eg(n.type,e),o=Object.create(null);return Object.keys(r).forEach(l=>{const c=r[l];if(!He(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=tg(l,c,k4(l,n),bt.scales[c.type]),f=I4(h,s),g=t.scales||{};o[l]=Cc(Object.create(null),[{axis:h},c,g[h],g[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||eg(c,e),g=(Ao[c]||{}).scales||{};Object.keys(g).forEach(y=>{const _=T4(y,h),E=l[_+"AxisID"]||_;o[E]=o[E]||Object.create(null),Cc(o[E],[{axis:_},r[E],g[y]])})}),Object.keys(o).forEach(l=>{const c=o[l];Cc(c,[bt.scales[c.type],bt.scale])}),o}function P1(n){const e=n.options||(n.options={});e.plugins=We(e.plugins,{}),e.scales=A4(n,e)}function D1(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function R4(n){return n=n||{},n.data=D1(n.data),P1(n),n}const gw=new Map,j1=new Set;function Uh(n,e){let t=gw.get(n);return t||(t=e(),gw.set(n,t),j1.add(t)),t}const hc=(n,e,t)=>{const r=ko(e,t);r!==void 0&&n.add(r)};class N4{constructor(e){this._config=R4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=D1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),P1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Uh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Uh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Uh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return Uh(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let s=r.get(e);return(!s||t)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,t,r){const{options:s,type:o}=this,l=this._cachedScopes(e,r),c=l.get(t);if(c)return c;const h=new Set;t.forEach(g=>{e&&(h.add(e),g.forEach(y=>hc(h,e,y))),g.forEach(y=>hc(h,s,y)),g.forEach(y=>hc(h,Ao[o]||{},y)),g.forEach(y=>hc(h,bt,y)),g.forEach(y=>hc(h,Zp,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),j1.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ao[t]||{},bt.datasets[t]||{},{type:t},bt,Zp]}resolveNamedOptions(e,t,r,s=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=yw(this._resolverCache,e,s);let h=l;if(D4(l,t)){o.$shared=!1,r=Pi(r)?r():r;const f=this.createResolver(e,r,c);h=Ga(l,r,f)}for(const f of t)o[f]=h[f];return o}createResolver(e,t,r=[""],s){const{resolver:o}=yw(this._resolverCache,e,r);return He(t)?Ga(o,t,void 0,s):o}}function yw(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const s=t.join();let o=r.get(s);return o||(o={resolver:my(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(s,o)),o}const P4=n=>He(n)&&Object.getOwnPropertyNames(n).some(e=>Pi(n[e]));function D4(n,e){const{isScriptable:t,isIndexable:r}=v1(n);for(const s of e){const o=t(s),l=r(s),c=(l||o)&&n[s];if(o&&(Pi(c)||P4(c))||l&&Ut(c))return!0}return!1}var j4="4.5.1";const M4=["top","bottom","left","right","chartArea"];function vw(n,e){return n==="top"||n==="bottom"||M4.indexOf(n)===-1&&e==="x"}function _w(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function xw(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),it(t&&t.onComplete,[n],e)}function O4(n){const e=n.chart,t=e.options.animation;it(t&&t.onProgress,[n],e)}function M1(n){return yy()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const id={},ww=n=>{const e=M1(n);return Object.values(id).filter(t=>t.canvas===e).pop()};function L4(n,e,t){const r=Object.keys(n);for(const s of r){const o=+s;if(o>=e){const l=n[s];delete n[s],(t>0||o>e)&&(n[o+t]=l)}}}function V4(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let gf=class{static defaults=bt;static instances=id;static overrides=Ao;static registry=jr;static version=j4;static getChart=ww;static register(...e){jr.add(...e),bw()}static unregister(...e){jr.remove(...e),bw()}constructor(e,t){const r=this.config=new N4(t),s=M1(e),o=ww(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||n4(s)),this.platform.updateConfig(r);const c=this.platform.acquireContext(s,l.aspectRatio),h=c&&c.canvas,f=h&&h.height,g=h&&h.width;if(this.id=JM(),this.ctx=c,this.canvas=h,this.width=g,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new x4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gO(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],id[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}ms.listen(this,"complete",xw),ms.listen(this,"progress",O4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:s,_aspectRatio:o}=this;return Ze(e)?t&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return jr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $x(this.canvas,this.ctx),this}stop(){return ms.stop(this),this}resize(e,t){ms.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(s,e,t,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,Kx(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),it(r.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Xe(t,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,s=Object.keys(r).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=tg(l,c),f=h==="r",g=h==="x";return{options:c,dposition:f?"chartArea":g?"bottom":"left",dtype:f?"radialLinear":g?"category":"linear"}}))),Xe(o,l=>{const c=l.options,h=c.id,f=tg(h,c),g=We(c.type,l.dtype);(c.position===void 0||vw(c.position,f)!==vw(l.dposition))&&(c.position=l.dposition),s[h]=!0;let y=null;if(h in r&&r[h].type===g)y=r[h];else{const _=jr.getScale(g);y=new _({id:h,type:g,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(c,e)}),Xe(s,(l,c)=>{l||delete r[c]}),Xe(r,l=>{yi.configure(this,l,l.options),yi.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>t){for(let s=t;s<r;++s)this._destroyDatasetMeta(s);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(_w("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,s)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=t.length;r<s;r++){const o=t[r];let l=this.getDatasetMeta(r);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=c,l.indexAxis=o.indexAxis||eg(c,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const h=jr.getController(c),{datasetElementType:f,dataElementType:g}=bt.datasets[c];Object.assign(h,{dataElementType:jr.getElement(g),datasetElementType:f&&jr.getElement(f)}),l.controller=new h(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Xe(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,g=this.data.datasets.length;f<g;f++){const{controller:y}=this.getDatasetMeta(f),_=!s&&o.indexOf(y)===-1;y.buildOrUpdateElements(_),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),s||Xe(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(_w("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Xe(this.scales,e=>{yi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Dx(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:o}of t){const l=r==="_removeElements"?-o:o;L4(e,s,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),s=r(0);for(let o=1;o<t;o++)if(!Dx(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;yi.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Xe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Pi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ms.has(this)?this.attached&&!ms.running(this)&&ms.start(this):(this.draw(),xw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let s,o;for(s=0,o=t.length;s<o;++s){const l=t[s];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=tL(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&hy(t,s),e.controller.draw(),s&&dy(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return g1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,s){const o=ML.modes[t];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let s=r.filter(o=>o&&o._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=al(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const s=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,s);Uc(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ms.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$x(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete id[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},s=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Xe(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},s=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},o=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Xe(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Xe(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const s=r?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[s+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!Rd(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const s=this.options.hover,o=(h,f)=>h.filter(g=>!f.some(y=>g.datasetIndex===y.datasetIndex&&g.index===y.index)),l=o(t,e),c=r?e:o(e,t);l.length&&this.updateHoverStyle(l,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:s=[],options:o}=this,l=t,c=this._getActiveElements(e,s,r,l),h=sO(e),f=V4(e,this._lastEvent,r,h);r&&(this._lastEvent=null,it(o.onHover,[e,c,this],this),h&&it(o.onClick,[e,c,this],this));const g=!Rd(c,s);return(g||t)&&(this._active=c,this._updateHoverStyles(c,s,t)),this._lastEvent=f,g}_getActiveElements(e,t,r,s){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}};function bw(){return Xe(gf.instances,n=>n._plugins.invalidate())}function F4(n,e,t){const{startAngle:r,x:s,y:o,outerRadius:l,innerRadius:c,options:h}=e,{borderWidth:f,borderJoinStyle:g}=h,y=Math.min(f/l,Or(r-t));if(n.beginPath(),n.arc(s,o,l-f/2,r+y/2,t-y/2),c>0){const _=Math.min(f/c,Or(r-t));n.arc(s,o,c+f/2,t-_/2,r+_/2,!0)}else{const _=Math.min(f/2,l*Or(r-t));if(g==="round")n.arc(s,o,_,t-at/2,r+at/2,!0);else if(g==="bevel"){const E=2*_*_,I=-E*Math.cos(t+at/2)+s,T=-E*Math.sin(t+at/2)+o,C=E*Math.cos(r+at/2)+s,V=E*Math.sin(r+at/2)+o;n.lineTo(I,T),n.lineTo(C,V)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function U4(n,e,t){const{startAngle:r,pixelMargin:s,x:o,y:l,outerRadius:c,innerRadius:h}=e;let f=s/c;n.beginPath(),n.arc(o,l,c,r-f,t+f),h>s?(f=s/h,n.arc(o,l,h,t+f,r-f,!0)):n.arc(o,l,s,t+Dt,r-Dt),n.closePath(),n.clip()}function z4(n){return fy(n,["outerStart","outerEnd","innerStart","innerEnd"])}function B4(n,e,t,r){const s=z4(n.options.borderRadius),o=(t-e)/2,l=Math.min(o,r*e/2),c=h=>{const f=(t-Math.min(o,h))*r/2;return xn(h,0,Math.min(o,f))};return{outerStart:c(s.outerStart),outerEnd:c(s.outerEnd),innerStart:xn(s.innerStart,0,l),innerEnd:xn(s.innerEnd,0,l)}}function Ta(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Fd(n,e,t,r,s,o){const{x:l,y:c,startAngle:h,pixelMargin:f,innerRadius:g}=e,y=Math.max(e.outerRadius+r+t-f,0),_=g>0?g+r+t+f:0;let E=0;const I=s-h;if(r){const oe=g>0?g-r:0,J=y>0?y-r:0,ae=(oe+J)/2,ee=ae!==0?I*ae/(ae+r):I;E=(I-ee)/2}const T=Math.max(.001,I*y-t/at)/y,C=(I-T)/2,V=h+C+E,D=s-C-E,{outerStart:U,outerEnd:H,innerStart:O,innerEnd:q}=B4(e,_,y,D-V),A=y-U,k=y-H,P=V+U/A,F=D-H/k,L=_+O,B=_+q,j=V+O/L,Ce=D-q/B;if(n.beginPath(),o){const oe=(P+F)/2;if(n.arc(l,c,y,P,oe),n.arc(l,c,y,oe,F),H>0){const ce=Ta(k,F,l,c);n.arc(ce.x,ce.y,H,F,D+Dt)}const J=Ta(B,D,l,c);if(n.lineTo(J.x,J.y),q>0){const ce=Ta(B,Ce,l,c);n.arc(ce.x,ce.y,q,D+Dt,Ce+Math.PI)}const ae=(D-q/_+(V+O/_))/2;if(n.arc(l,c,_,D-q/_,ae,!0),n.arc(l,c,_,ae,V+O/_,!0),O>0){const ce=Ta(L,j,l,c);n.arc(ce.x,ce.y,O,j+Math.PI,V-Dt)}const ee=Ta(A,V,l,c);if(n.lineTo(ee.x,ee.y),U>0){const ce=Ta(A,P,l,c);n.arc(ce.x,ce.y,U,V-Dt,P)}}else{n.moveTo(l,c);const oe=Math.cos(P)*y+l,J=Math.sin(P)*y+c;n.lineTo(oe,J);const ae=Math.cos(F)*y+l,ee=Math.sin(F)*y+c;n.lineTo(ae,ee)}n.closePath()}function $4(n,e,t,r,s){const{fullCircles:o,startAngle:l,circumference:c}=e;let h=e.endAngle;if(o){Fd(n,e,t,r,h,s);for(let f=0;f<o;++f)n.fill();isNaN(c)||(h=l+(c%At||At))}return Fd(n,e,t,r,h,s),n.fill(),h}function W4(n,e,t,r,s){const{fullCircles:o,startAngle:l,circumference:c,options:h}=e,{borderWidth:f,borderJoinStyle:g,borderDash:y,borderDashOffset:_,borderRadius:E}=h,I=h.borderAlign==="inner";if(!f)return;n.setLineDash(y||[]),n.lineDashOffset=_,I?(n.lineWidth=f*2,n.lineJoin=g||"round"):(n.lineWidth=f,n.lineJoin=g||"bevel");let T=e.endAngle;if(o){Fd(n,e,t,r,T,s);for(let C=0;C<o;++C)n.stroke();isNaN(c)||(T=l+(c%At||At))}I&&U4(n,e,T),h.selfJoin&&T-l>=at&&E===0&&g!=="miter"&&F4(n,e,T),o||(Fd(n,e,t,r,T,s),n.stroke())}class H4 extends ll{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){const s=this.getProps(["x","y"],r),{angle:o,distance:l}=a1(s,{x:e,y:t}),{startAngle:c,endAngle:h,innerRadius:f,outerRadius:g,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),_=(this.options.spacing+this.options.borderWidth)/2,E=We(y,h-c),I=jd(o,c,h)&&c!==h,T=E>=At||I,C=vo(l,f+_,g+_);return T&&C}getCenterPoint(e){const{x:t,y:r,startAngle:s,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:f}=this.options,g=(s+o)/2,y=(l+c+f+h)/2;return{x:t+Math.cos(g)*y,y:r+Math.sin(g)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:r}=this,s=(t.offset||0)/4,o=(t.spacing||0)/2,l=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>At?Math.floor(r/At):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*s,Math.sin(c)*s);const h=1-Math.sin(Math.min(at,r||0)),f=s*h;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,$4(e,this,f,o,l),W4(e,this,f,o,l),e.restore()}}function O1(n,e){const{x:t,y:r,base:s,width:o,height:l}=n.getProps(["x","y","base","width","height"],e);let c,h,f,g,y;return n.horizontal?(y=l/2,c=Math.min(t,s),h=Math.max(t,s),f=r-y,g=r+y):(y=o/2,c=t-y,h=t+y,f=Math.min(r,s),g=Math.max(r,s)),{left:c,top:f,right:h,bottom:g}}function vi(n,e,t,r){return n?0:xn(e,t,r)}function q4(n,e,t){const r=n.options.borderWidth,s=n.borderSkipped,o=y1(r);return{t:vi(s.top,o.top,0,t),r:vi(s.right,o.right,0,e),b:vi(s.bottom,o.bottom,0,t),l:vi(s.left,o.left,0,e)}}function K4(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),s=n.options.borderRadius,o=La(s),l=Math.min(e,t),c=n.borderSkipped,h=r||He(s);return{topLeft:vi(!h||c.top||c.left,o.topLeft,0,l),topRight:vi(!h||c.top||c.right,o.topRight,0,l),bottomLeft:vi(!h||c.bottom||c.left,o.bottomLeft,0,l),bottomRight:vi(!h||c.bottom||c.right,o.bottomRight,0,l)}}function G4(n){const e=O1(n),t=e.right-e.left,r=e.bottom-e.top,s=q4(n,t/2,r/2),o=K4(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function _p(n,e,t,r){const s=e===null,o=t===null,c=n&&!(s&&o)&&O1(n,r);return c&&(s||vo(e,c.left,c.right))&&(o||vo(t,c.top,c.bottom))}function Y4(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Q4(n,e){n.rect(e.x,e.y,e.w,e.h)}function xp(n,e,t={}){const r=n.x!==t.x?-e:0,s=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,l=(n.y+n.h!==t.y+t.h?e:0)-s;return{x:n.x+r,y:n.y+s,w:n.w+o,h:n.h+l,radius:n.radius}}class X4 extends ll{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:s}}=this,{inner:o,outer:l}=G4(this),c=Y4(l.radius)?Od:Q4;e.save(),(l.w!==o.w||l.h!==o.h)&&(e.beginPath(),c(e,xp(l,t,o)),e.clip(),c(e,xp(o,-t,l)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),c(e,xp(o,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,r){return _p(this,e,t,r)}inXRange(e,t){return _p(this,e,null,t)}inYRange(e,t){return _p(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+s)/2:t,y:o?r:(r+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const Ew=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},J4=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class Sw extends ll{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=it(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=wn(r.font),o=s.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=Ew(r,o);let f,g;t.font=s.string,this.isHorizontal()?(f=this.maxWidth,g=this._fitRows(l,o,c,h)+10):(g=this.maxHeight,f=this._fitCols(l,s,c,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(g,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,s){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],g=s+c;let y=e;o.textAlign="left",o.textBaseline="middle";let _=-1,E=-g;return this.legendItems.forEach((I,T)=>{const C=r+t/2+o.measureText(I.text).width;(T===0||f[f.length-1]+C+2*c>l)&&(y+=g,f[f.length-(T>0?0:1)]=0,E+=g,_++),h[T]={left:0,top:E,row:_,width:C,height:s},f[f.length-1]+=C+c}),y}_fitCols(e,t,r,s){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],g=l-e;let y=c,_=0,E=0,I=0,T=0;return this.legendItems.forEach((C,V)=>{const{itemWidth:D,itemHeight:U}=Z4(r,t,o,C,s);V>0&&E+U+2*c>g&&(y+=_+c,f.push({width:_,height:E}),I+=_+c,T++,_=E=0),h[V]={left:I,top:E,col:T,width:D,height:U},_=Math.max(_,D),E+=U+c}),y+=_,f.push({width:_,height:E}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:s},rtl:o}}=this,l=Va(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Dn(r,this.left+s,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,h=Dn(r,this.left+s,this.right-this.lineWidths[c])),f.top+=this.top+e+s,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+s}else{let c=0,h=Dn(r,this.top+e+s,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,h=Dn(r,this.top+e+s,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+s,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;hy(e,this),this._draw(),dy(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:s}=this,{align:o,labels:l}=e,c=bt.color,h=Va(e.rtl,this.left,this.width),f=wn(l.font),{padding:g}=l,y=f.size,_=y/2;let E;this.drawTitle(),s.textAlign=h.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=f.string;const{boxWidth:I,boxHeight:T,itemHeight:C}=Ew(l,y),V=function(q,A,k){if(isNaN(I)||I<=0||isNaN(T)||T<0)return;s.save();const P=We(k.lineWidth,1);if(s.fillStyle=We(k.fillStyle,c),s.lineCap=We(k.lineCap,"butt"),s.lineDashOffset=We(k.lineDashOffset,0),s.lineJoin=We(k.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=We(k.strokeStyle,c),s.setLineDash(We(k.lineDash,[])),l.usePointStyle){const F={radius:T*Math.SQRT2/2,pointStyle:k.pointStyle,rotation:k.rotation,borderWidth:P},L=h.xPlus(q,I/2),B=A+_;p1(s,F,L,B,l.pointStyleWidth&&I)}else{const F=A+Math.max((y-T)/2,0),L=h.leftForLtr(q,I),B=La(k.borderRadius);s.beginPath(),Object.values(B).some(j=>j!==0)?Od(s,{x:L,y:F,w:I,h:T,radius:B}):s.rect(L,F,I,T),s.fill(),P!==0&&s.stroke()}s.restore()},D=function(q,A,k){Md(s,k.text,q,A+C/2,f,{strikethrough:k.hidden,textAlign:h.textAlign(k.textAlign)})},U=this.isHorizontal(),H=this._computeTitleHeight();U?E={x:Dn(o,this.left+g,this.right-r[0]),y:this.top+g+H,line:0}:E={x:this.left+g,y:Dn(o,this.top+H+g,this.bottom-t[0].height),line:0},b1(this.ctx,e.textDirection);const O=C+g;this.legendItems.forEach((q,A)=>{s.strokeStyle=q.fontColor,s.fillStyle=q.fontColor;const k=s.measureText(q.text).width,P=h.textAlign(q.textAlign||(q.textAlign=l.textAlign)),F=I+_+k;let L=E.x,B=E.y;h.setWidth(this.width),U?A>0&&L+F+g>this.right&&(B=E.y+=O,E.line++,L=E.x=Dn(o,this.left+g,this.right-r[E.line])):A>0&&B+O>this.bottom&&(L=E.x=L+t[E.line].width+g,E.line++,B=E.y=Dn(o,this.top+H+g,this.bottom-t[E.line].height));const j=h.x(L);if(V(j,B,q),L=yO(P,L+I+_,U?L+F:this.right,e.rtl),D(h.x(L),B,q),U)E.x+=F+g;else if(typeof q.text!="string"){const Ce=f.lineHeight;E.y+=L1(q,Ce)+g}else E.y+=O}),E1(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=wn(t.font),s=fr(t.padding);if(!t.display)return;const o=Va(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=r.size/2,f=s.top+h;let g,y=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),g=this.top+f,y=Dn(e.align,y,this.right-_);else{const I=this.columnSizes.reduce((T,C)=>Math.max(T,C.height),0);g=f+Dn(e.align,this.top,this.bottom-I-e.labels.padding-this._computeTitleHeight())}const E=Dn(c,y,y+_);l.textAlign=o.textAlign(d1(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,Md(l,t.text,E,g,r)}_computeTitleHeight(){const e=this.options.title,t=wn(e.font),r=fr(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,s,o;if(vo(e,this.left,this.right)&&vo(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(s=o[r],vo(e,s.left,s.left+s.width)&&vo(t,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!nV(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,o=J4(s,r);s&&!o&&it(t.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!o&&it(t.onHover,[e,r,this],this)}else r&&it(t.onClick,[e,r,this],this)}}function Z4(n,e,t,r,s){const o=eV(r,n,e,t),l=tV(s,r,e.lineHeight);return{itemWidth:o,itemHeight:l}}function eV(n,e,t,r){let s=n.text;return s&&typeof s!="string"&&(s=s.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+r.measureText(s).width}function tV(n,e,t){let r=n;return typeof e.text!="string"&&(r=L1(e,t)),r}function L1(n,e){const t=n.text?n.text.length:0;return e*t}function nV(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var rV={id:"legend",_element:Sw,start(n,e,t){const r=n.legend=new Sw({ctx:n.ctx,options:t,chart:n});yi.configure(n,r,t),yi.addBox(n,r)},stop(n){yi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;yi.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,s=t.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:s,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),g=fr(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(g.width+g.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:s||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const xc={average(n){if(!n.length)return!1;let e,t,r=new Set,s=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();r.add(h.x),s+=h.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((c,h)=>c+h)/r.size,y:s/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,s=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),g=hO(e,f);g<s&&(s=g,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function Dr(n,e){return e&&(Ut(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ps(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function sV(n,e){const{element:t,datasetIndex:r,index:s}=e,o=n.getDatasetMeta(r).controller,{label:l,value:c}=o.getLabelAndValue(s);return{chart:n,label:l,parsed:o.getParsed(s),raw:n.data.datasets[r].data[s],formattedValue:c,dataset:o.getDataset(),dataIndex:s,datasetIndex:r,element:t}}function Tw(n,e){const t=n.chart.ctx,{body:r,footer:s,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=wn(e.bodyFont),f=wn(e.titleFont),g=wn(e.footerFont),y=o.length,_=s.length,E=r.length,I=fr(e.padding);let T=I.height,C=0,V=r.reduce((H,O)=>H+O.before.length+O.lines.length+O.after.length,0);if(V+=n.beforeBody.length+n.afterBody.length,y&&(T+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),V){const H=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;T+=E*H+(V-E)*h.lineHeight+(V-1)*e.bodySpacing}_&&(T+=e.footerMarginTop+_*g.lineHeight+(_-1)*e.footerSpacing);let D=0;const U=function(H){C=Math.max(C,t.measureText(H).width+D)};return t.save(),t.font=f.string,Xe(n.title,U),t.font=h.string,Xe(n.beforeBody.concat(n.afterBody),U),D=e.displayColors?l+2+e.boxPadding:0,Xe(r,H=>{Xe(H.before,U),Xe(H.lines,U),Xe(H.after,U)}),D=0,t.font=g.string,Xe(n.footer,U),t.restore(),C+=I.width,{width:C,height:T}}function iV(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function oV(n,e,t,r){const{x:s,width:o}=r,l=t.caretSize+t.caretPadding;if(n==="left"&&s+o+l>e.width||n==="right"&&s-o-l<0)return!0}function aV(n,e,t,r){const{x:s,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let f="center";return r==="center"?f=s<=(c+h)/2?"left":"right":s<=o/2?f="left":s>=l-o/2&&(f="right"),oV(f,n,e,t)&&(f="center"),f}function Iw(n,e,t){const r=t.yAlign||e.yAlign||iV(n,t);return{xAlign:t.xAlign||e.xAlign||aV(n,e,t,r),yAlign:r}}function lV(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function cV(n,e,t){let{y:r,height:s}=n;return e==="top"?r+=t:e==="bottom"?r-=s+t:r-=s/2,r}function Cw(n,e,t,r){const{caretSize:s,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,f=s+o,{topLeft:g,topRight:y,bottomLeft:_,bottomRight:E}=La(l);let I=lV(e,c);const T=cV(e,h,f);return h==="center"?c==="left"?I+=f:c==="right"&&(I-=f):c==="left"?I-=Math.max(g,_)+s:c==="right"&&(I+=Math.max(y,E)+s),{x:xn(I,0,r.width-e.width),y:xn(T,0,r.height-e.height)}}function zh(n,e,t){const r=fr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function kw(n){return Dr([],ps(n))}function uV(n,e,t){return al(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Aw(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const V1={beforeTitle:fs,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:fs,beforeBody:fs,beforeLabel:fs,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Ze(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:fs,afterBody:fs,beforeFooter:fs,footer:fs,afterFooter:fs};function gn(n,e,t,r){const s=n[e].call(t,r);return typeof s>"u"?V1[e].call(t,r):s}class Rw extends ll{static positioners=xc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&t.options.animation&&r.animations,o=new S1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=uV(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,s=gn(r,"beforeTitle",this,e),o=gn(r,"title",this,e),l=gn(r,"afterTitle",this,e);let c=[];return c=Dr(c,ps(s)),c=Dr(c,ps(o)),c=Dr(c,ps(l)),c}getBeforeBody(e,t){return kw(gn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,s=[];return Xe(e,o=>{const l={before:[],lines:[],after:[]},c=Aw(r,o);Dr(l.before,ps(gn(c,"beforeLabel",this,o))),Dr(l.lines,gn(c,"label",this,o)),Dr(l.after,ps(gn(c,"afterLabel",this,o))),s.push(l)}),s}getAfterBody(e,t){return kw(gn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,s=gn(r,"beforeFooter",this,e),o=gn(r,"footer",this,e),l=gn(r,"afterFooter",this,e);let c=[];return c=Dr(c,ps(s)),c=Dr(c,ps(o)),c=Dr(c,ps(l)),c}_createItems(e){const t=this._active,r=this.chart.data,s=[],o=[],l=[];let c=[],h,f;for(h=0,f=t.length;h<f;++h)c.push(sV(this.chart,t[h]));return e.filter&&(c=c.filter((g,y,_)=>e.filter(g,y,_,r))),e.itemSort&&(c=c.sort((g,y)=>e.itemSort(g,y,r))),Xe(c,g=>{const y=Aw(e.callbacks,g);s.push(gn(y,"labelColor",this,g)),o.push(gn(y,"labelPointStyle",this,g)),l.push(gn(y,"labelTextColor",this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),s=this._active;let o,l=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{const c=xc[r.position].call(this,s,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=Tw(this,r),f=Object.assign({},c,h),g=Iw(this.chart,r,f),y=Cw(r,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,s){const o=this.getCaretPosition(e,r,s);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:s,yAlign:o}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:y}=La(c),{x:_,y:E}=e,{width:I,height:T}=t;let C,V,D,U,H,O;return o==="center"?(H=E+T/2,s==="left"?(C=_,V=C-l,U=H+l,O=H-l):(C=_+I,V=C+l,U=H-l,O=H+l),D=C):(s==="left"?V=_+Math.max(h,g)+l:s==="right"?V=_+I-Math.max(f,y)-l:V=this.caretX,o==="top"?(U=E,H=U-l,C=V-l,D=V+l):(U=E+T,H=U+l,C=V+l,D=V-l),O=U),{x1:C,x2:V,x3:D,y1:U,y2:H,y3:O}}drawTitle(e,t,r){const s=this.title,o=s.length;let l,c,h;if(o){const f=Va(r.rtl,this.x,this.width);for(e.x=zh(this,r.titleAlign,r),t.textAlign=f.textAlign(r.titleAlign),t.textBaseline="middle",l=wn(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(s[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,s,o){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:f}=o,g=wn(o.bodyFont),y=zh(this,"left",o),_=s.x(y),E=h<g.lineHeight?(g.lineHeight-h)/2:0,I=t.y+E;if(o.usePointStyle){const T={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},C=s.leftForLtr(_,f)+f/2,V=I+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Wx(e,T,C,V),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Wx(e,T,C,V)}else{e.lineWidth=He(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const T=s.leftForLtr(_,f),C=s.leftForLtr(s.xPlus(_,1),f-2),V=La(l.borderRadius);Object.values(V).some(D=>D!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Od(e,{x:T,y:I,w:f,h,radius:V}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Od(e,{x:C,y:I+1,w:f-2,h:h-2,radius:V}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(T,I,f,h),e.strokeRect(T,I,f,h),e.fillStyle=l.backgroundColor,e.fillRect(C,I+1,f-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:s}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:g}=r,y=wn(r.bodyFont);let _=y.lineHeight,E=0;const I=Va(r.rtl,this.x,this.width),T=function(k){t.fillText(k,I.x(e.x+E),e.y+_/2),e.y+=_+o},C=I.textAlign(l);let V,D,U,H,O,q,A;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=zh(this,C,r),t.fillStyle=r.bodyColor,Xe(this.beforeBody,T),E=c&&C!=="right"?l==="center"?f/2+g:f+2+g:0,H=0,q=s.length;H<q;++H){for(V=s[H],D=this.labelTextColors[H],t.fillStyle=D,Xe(V.before,T),U=V.lines,c&&U.length&&(this._drawColorBox(t,e,H,I,r),_=Math.max(y.lineHeight,h)),O=0,A=U.length;O<A;++O)T(U[O]),_=y.lineHeight;Xe(V.after,T)}E=0,_=y.lineHeight,Xe(this.afterBody,T),e.y-=o}drawFooter(e,t,r){const s=this.footer,o=s.length;let l,c;if(o){const h=Va(r.rtl,this.x,this.width);for(e.x=zh(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",l=wn(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(s[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,s){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:f,height:g}=r,{topLeft:y,topRight:_,bottomLeft:E,bottomRight:I}=La(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(c+y,h),l==="top"&&this.drawCaret(e,t,r,s),t.lineTo(c+f-_,h),t.quadraticCurveTo(c+f,h,c+f,h+_),l==="center"&&o==="right"&&this.drawCaret(e,t,r,s),t.lineTo(c+f,h+g-I),t.quadraticCurveTo(c+f,h+g,c+f-I,h+g),l==="bottom"&&this.drawCaret(e,t,r,s),t.lineTo(c+E,h+g),t.quadraticCurveTo(c,h+g,c,h+g-E),l==="center"&&o==="left"&&this.drawCaret(e,t,r,s),t.lineTo(c,h+y),t.quadraticCurveTo(c,h,c+y,h),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const l=xc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=Tw(this,e),h=Object.assign({},l,this._size),f=Iw(t,e,h),g=Cw(e,h,f,t);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=fr(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,t),b1(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),E1(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,s=e.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),o=!Rd(r,s),l=this._positionChanged(s,t);(o||l)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,r),c=this._positionChanged(l,e),h=t||!Rd(l,o)||c;return h&&(this._active=l,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,s){const o=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:s,options:o}=this,l=xc[o.position].call(this,e,t);return l!==!1&&(r!==l.x||s!==l.y)}}var hV={id:"tooltip",_element:Rw,positioners:xc,afterInit(n,e,t){t&&(n.tooltip=new Rw({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:V1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const dV=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function fV(n,e,t,r){const s=n.indexOf(e);if(s===-1)return dV(n,e,t,r);const o=n.lastIndexOf(e);return s!==o?t:s}const mV=(n,e)=>n===null?null:xn(Math.round(n),0,e);function Nw(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class pV extends cl{static id="category";static defaults={ticks:{callback:Nw}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:s,label:o}of t)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Ze(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:fV(r,e,We(t,e),this._addedLabels),mV(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,s=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let l=e;l<=t;l++)s.push({value:l});return s}getLabelForValue(e){return Nw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function gV(n,e){const t=[],{bounds:s,step:o,min:l,max:c,precision:h,count:f,maxTicks:g,maxDigits:y,includeBounds:_}=n,E=o||1,I=g-1,{min:T,max:C}=e,V=!Ze(l),D=!Ze(c),U=!Ze(f),H=(C-T)/(y+1);let O=Mx((C-T)/I/E)*E,q,A,k,P;if(O<1e-14&&!V&&!D)return[{value:T},{value:C}];P=Math.ceil(C/O)-Math.floor(T/O),P>I&&(O=Mx(P*O/I/E)*E),Ze(h)||(q=Math.pow(10,h),O=Math.ceil(O*q)/q),s==="ticks"?(A=Math.floor(T/O)*O,k=Math.ceil(C/O)*O):(A=T,k=C),V&&D&&o&&lO((c-l)/o,O/1e3)?(P=Math.round(Math.min((c-l)/O,g)),O=(c-l)/P,A=l,k=c):U?(A=V?l:A,k=D?c:k,P=f-1,O=(k-A)/P):(P=(k-A)/O,rd(P,Math.round(P),O/1e3)?P=Math.round(P):P=Math.ceil(P));const F=Math.max(Ox(O),Ox(A));q=Math.pow(10,Ze(h)?F:h),A=Math.round(A*q)/q,k=Math.round(k*q)/q;let L=0;for(V&&(_&&A!==l?(t.push({value:l}),A<l&&L++,rd(Math.round((A+L*O)*q)/q,l,Pw(l,H,n))&&L++):A<l&&L++);L<P;++L){const B=Math.round((A+L*O)*q)/q;if(D&&B>c)break;t.push({value:B})}return D&&_&&k!==c?t.length&&rd(t[t.length-1].value,c,Pw(c,H,n))?t[t.length-1].value=c:t.push({value:c}):(!D||k===c)&&t.push({value:k}),t}function Pw(n,e,{horizontal:t,minRotation:r}){const s=_s(r),o=(t?Math.sin(s):Math.cos(s))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class yV extends cl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:s,max:o}=this;const l=h=>s=t?s:h,c=h=>o=r?o:h;if(e){const h=Ti(s),f=Ti(o);h<0&&f<0?c(0):h>0&&f>0&&l(0)}if(s===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(s-h)}this.min=s,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=gV(s,o);return e.bounds==="ticks"&&cO(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-t)/Math.max(e.length-1,1)/2;t-=s,r+=s}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return uy(e,this.chart.options.locale,this.options.ticks.format)}}class vV extends yV{static id="linear";static defaults={ticks:{callback:m1.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Gn(e)?e:0,this.max=Gn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=_s(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const yf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_n=Object.keys(yf);function Dw(n,e){return n-e}function jw(n,e){if(Ze(e))return null;const t=n._adapter,{parser:r,round:s,isoWeekday:o}=n._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),Gn(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(s&&(l=s==="week"&&(Dd(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,s)),+l)}function Mw(n,e,t,r){const s=_n.length;for(let o=_n.indexOf(n);o<s-1;++o){const l=yf[_n[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=r)return _n[o]}return _n[s-1]}function _V(n,e,t,r,s){for(let o=_n.length-1;o>=_n.indexOf(t);o--){const l=_n[o];if(yf[l].common&&n._adapter.diff(s,r,l)>=e-1)return l}return _n[t?_n.indexOf(t):0]}function xV(n){for(let e=_n.indexOf(n)+1,t=_n.length;e<t;++e)if(yf[_n[e]].common)return _n[e]}function Ow(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:s}=cy(t,e),o=t[r]>=e?t[r]:t[s];n[o]=!0}}function wV(n,e,t,r){const s=n._adapter,o=+s.startOf(e[0].value,r),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+s.add(c,1,r))h=t[c],h>=0&&(e[h].major=!0);return e}function Lw(n,e,t){const r=[],s={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],s[c]=l,r.push({value:c,major:!1});return o===0||!t?r:wV(n,r,s,t)}class Vw extends cl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),s=this._adapter=new RL._date(e.adapters.date);s.init(t),Cc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:jw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:s,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!c&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),s=Gn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),r),o=Gn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=this.max,c=mO(s,o,l);return this._unit=t.unit||(r.autoSkip?Mw(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):_V(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:xV(this._unit),this.initOffsets(s),e.reverse&&c.reverse(),Lw(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=xn(t,0,l),r=xn(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,s=this.options,o=s.time,l=o.unit||Mw(o.minUnit,t,r,this._getLabelCapacity(t)),c=We(s.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,f=Dd(h)||h===!0,g={};let y=t,_,E;if(f&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,f?"day":l),e.diff(r,t,l)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+l);const I=s.ticks.source==="data"&&this.getDataTimestamps();for(_=y,E=0;_<r;_=+e.add(_,c,l),E++)Ow(g,_,I);return(_===r||s.bounds==="ticks"||E===1)&&Ow(g,_,I),Object.keys(g).sort(Dw).map(T=>+T)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,o=this._unit,l=t||s[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,s){const o=this.options,l=o.ticks.callback;if(l)return it(l,[e,t,r],this);const c=o.time.displayFormats,h=this._unit,f=this._majorUnit,g=h&&c[h],y=f&&c[f],_=r[t],E=f&&y&&_&&_.major;return this._adapter.format(e,s||(E?y:g))}generateTickLabels(e){let t,r,s;for(t=0,r=e.length;t<r;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,s=_s(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(s),l=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*l,h:r*l+c*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,s=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,Lw(this,[e],this._majorUnit),s),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,r=s.length;t<r;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const s=this.getLabels();for(t=0,r=s.length;t<r;++t)e.push(jw(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return c1(e.sort(Dw))}}function Bh(n,e,t){let r=0,s=n.length-1,o,l,c,h;t?(e>=n[r].pos&&e<=n[s].pos&&({lo:r,hi:s}=Jp(n,"pos",e)),{pos:o,time:c}=n[r],{pos:l,time:h}=n[s]):(e>=n[r].time&&e<=n[s].time&&({lo:r,hi:s}=Jp(n,"time",e)),{time:o,pos:c}=n[r],{time:l,pos:h}=n[s]);const f=l-o;return f?c+(h-c)*(e-o)/f:c}class LV extends Vw{static id="timeseries";static defaults=Vw.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Bh(t,this.min),this._tableRange=Bh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,s=[],o=[];let l,c,h,f,g;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=r&&s.push(f);if(s.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,c=s.length;l<c;++l)g=s[l+1],h=s[l-1],f=s[l],Math.round((g+h)/2)!==f&&o.push({time:f,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((s,o)=>s-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Bh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Bh(this._table,r*this._tableRange+this._minPos,!0)}}const F1="label";function Fw(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function bV(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function U1(n,e){n.labels=e}function z1(n,e,t=F1){const r=[];n.datasets=e.map(s=>{const o=n.datasets.find(l=>l[t]===s[t]);return!o||!s.data||r.includes(o)?{...s}:(r.push(o),Object.assign(o,s),o)})}function EV(n,e=F1){const t={labels:[],datasets:[]};return U1(t,n.labels),z1(t,n.datasets,e),t}function SV(n,e){const{height:t=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:f=[],fallbackContent:g,updateMode:y,..._}=n,E=N.useRef(null),I=N.useRef(null),T=()=>{E.current&&(I.current=new gf(E.current,{type:l,data:EV(c,o),options:h&&{...h},plugins:f}),Fw(e,I.current))},C=()=>{Fw(e,null),I.current&&(I.current.destroy(),I.current=null)};return N.useEffect(()=>{!s&&I.current&&h&&bV(I.current,h)},[s,h]),N.useEffect(()=>{!s&&I.current&&U1(I.current.config.data,c.labels)},[s,c.labels]),N.useEffect(()=>{!s&&I.current&&c.datasets&&z1(I.current.config.data,c.datasets,o)},[s,c.datasets]),N.useEffect(()=>{I.current&&(s?(C(),setTimeout(T)):I.current.update(y))},[s,h,c.labels,c.datasets,y]),N.useEffect(()=>{I.current&&(C(),setTimeout(T))},[l]),N.useEffect(()=>(T(),()=>C()),[]),m.jsx("canvas",{ref:E,role:"img",height:t,width:r,..._,children:g})}const TV=N.forwardRef(SV);function B1(n,e){return gf.register(e),N.forwardRef((t,r)=>m.jsx(TV,{...t,ref:r,type:n}))}const IV=B1("bar",IL),CV=B1("pie",AL);gf.register(H4,hV,rV,pV,vV,X4);function Uw(){const[n,e]=N.useState({users:[],products:[],totalUsers:0,totalProducts:0,admins:0,staff:0,customers:0,categories:{},recentUsers:[]}),[t,r]=N.useState(!0);N.useEffect(()=>{s()},[]);const s=async()=>{try{const h=(await dr(sn(je,"users"))).docs.map(T=>({id:T.id,...T.data()})),g=(await dr(sn(je,"products"))).docs.map(T=>({id:T.id,...T.data()})),y=h.filter(T=>T.role==="admin").length,_=h.filter(T=>T.role==="staff").length,E=h.filter(T=>T.role==="customer"||!T.role).length,I={};g.forEach(T=>{I[T.category]=(I[T.category]||0)+1}),e({users:h,products:g,totalUsers:h.length,totalProducts:g.length,admins:y,staff:_,customers:E,categories:I,recentUsers:h.slice(0,5)})}catch(c){console.error("Error:",c)}finally{r(!1)}},o={labels:["Admins","Staff","Customers"],datasets:[{data:[n.admins,n.staff,n.customers],backgroundColor:["#8B5CF6","#3B82F6","#10B981"],borderWidth:0}]},l={labels:Object.keys(n.categories).length?Object.keys(n.categories):["No Categories"],datasets:[{label:"Products by Category",data:Object.keys(n.categories).length?Object.values(n.categories):[0],backgroundColor:["#3B82F6","#F59E0B","#10B981","#EF4444","#8B5CF6"]}]};return t?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-600 border-t-transparent"})}):m.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Dashboard Overview"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[m.jsx($h,{title:"Total Users",value:n.totalUsers,icon:"",color:"bg-blue-500",link:"/admin/users"}),m.jsx($h,{title:"Total Products",value:n.totalProducts,icon:"",color:"bg-green-500",link:"/admin/products"}),m.jsx($h,{title:"Staff Members",value:n.staff,icon:"",color:"bg-purple-500"}),m.jsx($h,{title:"Customers",value:n.customers,icon:"",color:"bg-yellow-500"})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"User Roles Distribution"}),m.jsx("div",{className:"h-80 flex items-center justify-center",children:n.totalUsers>0?m.jsx(CV,{data:o,options:{maintainAspectRatio:!1}}):m.jsx("p",{className:"text-gray-500",children:"No users found"})})]}),m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Products by Category"}),m.jsx("div",{className:"h-80",children:n.totalProducts>0?m.jsx(IV,{data:l,options:{maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}}):m.jsx("p",{className:"text-gray-500",children:"No products found"})})]})]}),m.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Recent Users"}),m.jsx(De,{to:"/admin/users",className:"text-blue-600 hover:underline",children:"View All "})]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2 text-left",children:"Name"}),m.jsx("th",{className:"px-4 py-2 text-left",children:"Email"}),m.jsx("th",{className:"px-4 py-2 text-left",children:"Role"}),m.jsx("th",{className:"px-4 py-2 text-left",children:"Phone"})]})}),m.jsx("tbody",{children:n.recentUsers.map((c,h)=>m.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[m.jsx("td",{className:"px-4 py-2",children:c.name||"-"}),m.jsx("td",{className:"px-4 py-2",children:c.email}),m.jsx("td",{className:"px-4 py-2",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${c.role==="admin"?"bg-purple-100 text-purple-800":c.role==="staff"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:c.role||"customer"})}),m.jsx("td",{className:"px-4 py-2",children:c.phone||"-"})]},h))})]})})]})]})}function $h({title:n,value:e,icon:t,color:r,link:s}){const o=()=>m.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500 text-sm",children:n}),m.jsx("p",{className:"text-3xl font-bold mt-1",children:e})]}),m.jsx("div",{className:`${r} w-12 h-12 rounded-full flex items-center justify-center text-white text-2xl`,children:t})]})});return s?m.jsx(De,{to:s,children:m.jsx(o,{})}):m.jsx(o,{})}function kV(){const[n,e]=N.useState([]),[t,r]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({email:"",password:"",name:"",role:"customer",phone:""}),[h,f]=N.useState(!1),[g,y]=N.useState(""),[_,E]=N.useState(""),I=ln();N.useEffect(()=>{T()},[]);const T=async()=>{try{const A=sn(je,"users"),P=(await dr(A)).docs.map(F=>({id:F.id,...F.data()}));e(P)}catch(A){console.error("Error fetching users:",A),y("Failed to fetch users")}},C=async()=>{try{await _g(Lr),I("/login")}catch(A){console.error("Logout error:",A)}},V=A=>{c({...l,[A.target.name]:A.target.value})},D=(A=null)=>{A?(o(A),c({email:A.email,password:"",name:A.name||"",role:A.role||"customer",phone:A.phone||""})):(o(null),c({email:"",password:"",name:"",role:"customer",phone:""})),r(!0),y("")},U=async A=>{A.preventDefault(),f(!0),y("");try{if(s){const k=ct(je,"users",s.id);await Wr(k,{name:l.name,role:l.role,phone:l.phone,updatedAt:new Date().toISOString()}),l.password&&(await md(Lr,l.email),alert("Password reset email sent to user"))}else{const k=await $b(Lr,l.email,l.password);await su(sn(je,"users"),{uid:k.user.uid,email:l.email,name:l.name,role:l.role,phone:l.phone,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}r(!1),T()}catch(k){console.error("Error saving user:",k),y(k.message)}finally{f(!1)}},H=async A=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ru(ct(je,"users",A)),T()}catch(k){console.error("Error deleting user:",k),y("Failed to delete user")}},O=async A=>{try{await md(Lr,A),alert("Password reset email sent successfully")}catch(k){console.error("Error sending reset email:",k),y("Failed to send reset email")}},q=n.filter(A=>A.name?.toLowerCase().includes(_.toLowerCase())||A.email?.toLowerCase().includes(_.toLowerCase())||A.role?.toLowerCase().includes(_.toLowerCase()));return m.jsxs("div",{className:"min-h-screen bg-gray-100",children:[m.jsx("nav",{className:"bg-white shadow-sm",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between h-16",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"User Management"})}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("input",{type:"text",placeholder:"Search users...",value:_,onChange:A=>E(A.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{onClick:()=>D(),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Add New User"}),m.jsx("button",{onClick:C,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700",children:"Logout"})]})]})})}),m.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[g&&m.jsx("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:g}),m.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(A=>m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.name||"-"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.email}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${A.role==="admin"?"bg-purple-100 text-purple-800":A.role==="staff"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:A.role||"customer"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.phone||"-"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:A.createdAt?new Date(A.createdAt).toLocaleDateString():"-"}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[m.jsx("button",{onClick:()=>D(A),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),m.jsx("button",{onClick:()=>O(A.email),className:"text-yellow-600 hover:text-yellow-900",children:"Reset Password"}),m.jsx("button",{onClick:()=>H(A.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},A.id))})]}),q.length===0&&m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-500",children:"No users found."})})]})]}),t&&m.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:m.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:m.jsxs("div",{className:"mt-3",children:[m.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 mb-4",children:s?"Edit User":"Add New User"}),m.jsxs("form",{onSubmit:U,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Name *"}),m.jsx("input",{type:"text",name:"name",value:l.name,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Email *"}),m.jsx("input",{type:"email",name:"email",value:l.email,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0,disabled:s})]}),!s&&m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Password *"}),m.jsx("input",{type:"password",name:"password",value:l.password,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!s,minLength:"6"})]}),s&&m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"New Password (leave blank to keep current)"}),m.jsx("input",{type:"password",name:"password",value:l.password,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",minLength:"6"})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Phone"}),m.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Role *"}),m.jsxs("select",{name:"role",value:l.role,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:border-blue-500",required:!0,children:[m.jsx("option",{value:"customer",children:"Customer"}),m.jsx("option",{value:"staff",children:"Staff"}),m.jsx("option",{value:"admin",children:"Admin"})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:h?"Saving...":s?"Update":"Create"})]})]})]})})})]})}function AV(){const[n,e]=N.useState([]),[t,r]=N.useState(!1),[s,o]=N.useState(null),[l,c]=N.useState({name:"",description:"",price:"",category:"furniture",image:"",inStock:!0,featured:!1}),[h,f]=N.useState(!1),[g,y]=N.useState(!0),[_,E]=N.useState(""),{currentUser:I,userData:T}=cn(),C=ln();N.useEffect(()=>{if(!I){ve.error("Please login first"),C("/login");return}T?.role!=="admin"&&(ve.error("Admin access required"),C("/dashboard"))},[I,T,C]),N.useEffect(()=>{I&&T?.role==="admin"&&V()},[I,T]);const V=async()=>{y(!0);try{const q=(await dr(sn(je,"products"))).docs.map(A=>({id:A.id,...A.data()}));e(q)}catch(O){console.error("Error fetching products:",O),ve.error("Failed to load products: "+O.message)}finally{y(!1)}},D=async O=>{if(O.preventDefault(),f(!0),isNaN(l.price)||l.price<=0){ve.error("Please enter a valid price"),f(!1);return}try{const q={name:l.name.trim(),description:l.description.trim(),price:Number(l.price),category:l.category,image:l.image||"",inStock:l.inStock,featured:l.featured,updatedAt:new Date().toISOString()};s?(await Wr(ct(je,"products",s.id),q),ve.success("Product updated successfully!")):(await su(sn(je,"products"),{...q,createdAt:new Date().toISOString()}),ve.success("Product added successfully!")),r(!1),V()}catch(q){console.error("Error saving product:",q),ve.error("Error saving product: "+q.message)}finally{f(!1)}},U=async O=>{if(window.confirm("Are you sure you want to delete this product?"))try{await ru(ct(je,"products",O)),ve.success("Product deleted successfully!"),V()}catch(q){console.error("Error deleting product:",q),ve.error("Error deleting product: "+q.message)}},H=n.filter(O=>O.name?.toLowerCase().includes(_.toLowerCase())||O.category?.toLowerCase().includes(_.toLowerCase())||O.description?.toLowerCase().includes(_.toLowerCase()));return!I||T?.role!=="admin"?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):m.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Product Management"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("input",{type:"text",placeholder:"Search products...",value:_,onChange:O=>E(O.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 w-64"}),m.jsxs("button",{onClick:()=>{o(null),c({name:"",description:"",price:"",category:"furniture",image:"",inStock:!0,featured:!1}),r(!0)},className:"bg-amber-500 hover:bg-amber-600 text-white px-4 py-2 rounded-lg transition flex items-center gap-2",children:[m.jsx("span",{children:"+"})," Add Product"]})]})]}),g?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(O=>m.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 animate-pulse",children:[m.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-lg mb-4"}),m.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2 mb-4"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-full mb-2"}),m.jsx("div",{className:"h-4 bg-gray-300 rounded w-5/6 mb-4"}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("div",{className:"h-8 bg-gray-300 rounded w-24"}),m.jsx("div",{className:"h-8 bg-gray-300 rounded w-20"})]})]},O))}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.length===0?m.jsxs("div",{className:"col-span-3 text-center py-12",children:[m.jsx("p",{className:"text-gray-500 mb-4",children:"No products found."}),m.jsx("button",{onClick:()=>{o(null),c({name:"",description:"",price:"",category:"furniture",image:"",inStock:!0,featured:!1}),r(!0)},className:"bg-amber-500 hover:bg-amber-600 text-white px-6 py-3 rounded-lg transition",children:"Add Your First Product"})]}):H.map(O=>m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:O.image||"https://via.placeholder.com/400x300?text=No+Image",alt:O.name,className:"w-full h-48 object-cover",onError:q=>{q.target.src="https://via.placeholder.com/400x300?text=No+Image"}}),O.featured&&m.jsx("span",{className:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 px-2 py-1 rounded-full text-xs font-medium",children:" Featured"})]}),m.jsxs("div",{className:"p-4",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold",children:O.name}),m.jsx("p",{className:"text-sm text-gray-500 capitalize",children:O.category})]}),m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${O.inStock?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O.inStock?"In Stock":"Out of Stock"})]}),m.jsx("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:O.description}),m.jsxs("div",{className:"flex justify-between items-center mt-4",children:[m.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:["",O.price]}),m.jsxs("div",{className:"space-x-3",children:[m.jsx("button",{onClick:()=>{o(O),c(O),r(!0)},className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),m.jsx("button",{onClick:()=>U(O.id),className:"text-red-600 hover:text-red-800 font-medium",children:"Delete"})]})]}),m.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Last updated: ",O.updatedAt?new Date(O.updatedAt).toLocaleDateString():"N/A"]})]})]},O.id))}),t&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:m.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4",children:s?"Edit Product":"Add New Product"}),m.jsxs("form",{onSubmit:D,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Product Name *"}),m.jsx("input",{type:"text",value:l.name,onChange:O=>c({...l,name:O.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:!0,placeholder:"e.g., Luxury Wooden Sofa"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),m.jsx("textarea",{value:l.description,onChange:O=>c({...l,description:O.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",rows:"3",placeholder:"Describe your product..."})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price () *"}),m.jsx("input",{type:"number",value:l.price,onChange:O=>c({...l,price:O.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",required:!0,min:"0",step:"1",placeholder:"1000"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),m.jsxs("select",{value:l.category,onChange:O=>c({...l,category:O.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:[m.jsx("option",{value:"furniture",children:"Furniture"}),m.jsx("option",{value:"lighting",children:"Lighting"}),m.jsx("option",{value:"decor",children:"Decor"}),m.jsx("option",{value:"fabric",children:"Fabric"}),m.jsx("option",{value:"kitchen",children:"Kitchen"}),m.jsx("option",{value:"bathroom",children:"Bathroom"}),m.jsx("option",{value:"bedroom",children:"Bedroom"}),m.jsx("option",{value:"living",children:"Living Room"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Image URL"}),m.jsx("input",{type:"url",value:l.image,onChange:O=>c({...l,image:O.target.value}),className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),l.image&&m.jsx("div",{className:"mt-2",children:m.jsx("img",{src:l.image,alt:"Preview",className:"w-20 h-20 object-cover rounded border",onError:O=>{O.target.src="https://via.placeholder.com/80?text=Invalid+URL"}})})]}),m.jsxs("div",{className:"flex items-center gap-6",children:[m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:l.inStock,onChange:O=>c({...l,inStock:O.target.checked}),className:"rounded text-amber-500 focus:ring-amber-500"}),m.jsx("span",{className:"text-sm",children:"In Stock"})]}),m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:l.featured,onChange:O=>c({...l,featured:O.target.checked}),className:"rounded text-amber-500 focus:ring-amber-500"}),m.jsx("span",{className:"text-sm",children:"Featured Product"})]})]}),m.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[m.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-100 transition",disabled:h,children:"Cancel"}),m.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition disabled:opacity-50 flex items-center gap-2",children:h?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):s?"Update Product":"Add Product"})]})]})]})})]})}function RV(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),{currentUser:s,userData:o}=cn(),l=ln();N.useEffect(()=>{if(!s){l("/login");return}if(o?.role!=="admin"){ve.error("Admin access required"),l("/dashboard");return}c()},[s,o]);const c=async()=>{try{console.log("Fetching contacts...");const g=(await dr(sn(je,"contacts"))).docs.map(y=>({id:y.id,...y.data()}));console.log("Messages fetched:",g),e(g)}catch(f){console.error("Error fetching messages:",f),ve.error("Failed to load messages: "+f.message)}finally{r(!1)}},h=async f=>{if(window.confirm("Delete this message?"))try{await ru(ct(je,"contacts",f)),ve.success("Message deleted"),c()}catch(g){console.error("Error deleting:",g),ve.error("Failed to delete: "+g.message)}};return t?m.jsx("div",{className:"p-6 flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):m.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Contact Messages"}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left",children:"Name"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Email"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Message"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),m.jsx("tbody",{children:n.map(f=>m.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4",children:f.name||"-"}),m.jsx("td",{className:"px-6 py-4",children:f.email||"-"}),m.jsx("td",{className:"px-6 py-4 max-w-md truncate",children:f.message||"-"}),m.jsx("td",{className:"px-6 py-4",children:f.createdAt?new Date(f.createdAt).toLocaleDateString():"-"}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("button",{onClick:()=>h(f.id),className:"text-red-600 hover:text-red-800",children:"Delete"})})]},f.id))})]}),n.length===0&&m.jsx("p",{className:"text-center py-8 text-gray-500",children:"No messages yet"})]})]})}function NV(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,o]=N.useState("all");N.useEffect(()=>{l()},[]);const l=async()=>{try{const g=cf(sn(je,"orders"),ny("orderDate","desc")),_=(await dr(g)).docs.map(E=>({id:E.id,...E.data()}));e(_)}catch(g){console.error("Error fetching orders:",g)}finally{r(!1)}},c=async(g,y)=>{try{await Wr(ct(je,"orders",g),{orderStatus:y,updatedAt:new Date().toISOString()}),l(),alert("Order status updated successfully!")}catch(_){console.error("Error updating order:",_),alert("Error updating order status")}},h=g=>{switch(g){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=s==="all"?n:n.filter(g=>g.orderStatus===s);return t?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):m.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Orders Management"}),m.jsxs("select",{value:s,onChange:g=>o(g.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500",children:[m.jsx("option",{value:"all",children:"All Orders"}),m.jsx("option",{value:"pending",children:"Pending"}),m.jsx("option",{value:"processing",children:"Processing"}),m.jsx("option",{value:"completed",children:"Completed"}),m.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left",children:"Order ID"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Customer"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Items"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Total"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Payment"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),m.jsx("tbody",{children:f.map(g=>m.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[m.jsxs("td",{className:"px-6 py-4 font-mono text-sm",children:[g.id.slice(0,8),"..."]}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:g.customerName}),m.jsx("p",{className:"text-sm text-gray-500",children:g.customerEmail}),m.jsx("p",{className:"text-sm text-gray-500",children:g.customerPhone})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("div",{className:"space-y-1",children:g.items?.map((y,_)=>m.jsxs("div",{className:"text-sm",children:[y.name," x",y.quantity," - ",y.price*y.quantity]},_))})}),m.jsxs("td",{className:"px-6 py-4 font-bold",children:["",g.totalAmount]}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(g.orderStatus)}`,children:g.orderStatus})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.paymentStatus==="paid"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.paymentStatus})}),m.jsx("td",{className:"px-6 py-4 text-sm",children:g.orderDate?new Date(g.orderDate).toLocaleDateString():"-"}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("select",{value:g.orderStatus,onChange:y=>c(g.id,y.target.value),className:"px-2 py-1 border rounded text-sm",children:[m.jsx("option",{value:"pending",children:"Pending"}),m.jsx("option",{value:"processing",children:"Processing"}),m.jsx("option",{value:"completed",children:"Completed"}),m.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]},g.id))})]}),f.length===0&&m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-500",children:"No orders found"})})]})]})}function PV(){const[n,e]=N.useState([]),[t,r]=N.useState(!0),[s,o]=N.useState("all");N.useEffect(()=>{l()},[]);const l=async()=>{try{const y=cf(sn(je,"reviews"),ny("createdAt","desc")),E=(await dr(y)).docs.map(I=>({id:I.id,...I.data()}));e(E)}catch(y){console.error("Error fetching reviews:",y),ve.error("Failed to load reviews")}finally{r(!1)}},c=async(y,_)=>{try{await Wr(ct(je,"reviews",y),{status:_,moderatedAt:new Date().toISOString()}),ve.success(`Review ${_==="active"?"approved":"hidden"}`),l()}catch(E){console.error("Error moderating review:",E),ve.error("Failed to moderate review")}},h=async y=>{if(window.confirm("Are you sure you want to delete this review?"))try{await ru(ct(je,"reviews",y)),ve.success("Review deleted"),l()}catch(_){console.error("Error deleting review:",_),ve.error("Failed to delete review")}},f=n.filter(y=>s==="all"?!0:y.status===s),g=y=>"".repeat(y)+"".repeat(5-y);return t?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-amber-500 border-t-transparent"})}):m.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Reviews Management"}),m.jsxs("select",{value:s,onChange:y=>o(y.target.value),className:"px-4 py-2 border rounded-lg",children:[m.jsx("option",{value:"all",children:"All Reviews"}),m.jsx("option",{value:"active",children:"Approved"}),m.jsx("option",{value:"hidden",children:"Hidden"})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left",children:"Product"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Customer"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Rating"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Review"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Date"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left",children:"Actions"})]})}),m.jsx("tbody",{children:f.map(y=>m.jsxs("tr",{className:"border-t hover:bg-gray-50",children:[m.jsxs("td",{className:"px-6 py-4",children:[y.productId?.slice(0,8),"..."]}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:y.userName}),m.jsx("p",{className:"text-sm text-gray-500",children:y.userEmail})]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("div",{className:"flex text-yellow-400",children:g(y.rating)})}),m.jsx("td",{className:"px-6 py-4 max-w-md",children:m.jsx("p",{className:"text-sm",children:y.comment})}),m.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(y.createdAt).toLocaleDateString()}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${y.status==="active"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status||"pending"})}),m.jsxs("td",{className:"px-6 py-4 space-x-2",children:[y.status!=="active"&&m.jsx("button",{onClick:()=>c(y.id,"active"),className:"text-green-600 hover:text-green-800 text-sm",children:"Approve"}),y.status==="active"&&m.jsx("button",{onClick:()=>c(y.id,"hidden"),className:"text-orange-600 hover:text-orange-800 text-sm",children:"Hide"}),m.jsx("button",{onClick:()=>h(y.id),className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})]},y.id))})]}),f.length===0&&m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-500",children:"No reviews found"})})]})]})}function DV(){return m.jsx(RC,{children:m.jsx(BS,{children:m.jsxs(Yj,{children:[m.jsxs(JS,{children:[" ",m.jsx(Gj,{position:"top-right",toastOptions:{duration:3e3,style:{background:"#363636",color:"#fff"}}}),m.jsxs(oC,{children:[m.jsx(ft,{path:"/",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(Qj,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/services",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(ZS,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/products",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(EM,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/about",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(Xj,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/contact",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(Jj,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/register",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(yM,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/login",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(vM,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/forgot-password",element:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(_M,{}),m.jsx(Pn,{})]})}),m.jsx(ft,{path:"/cart",element:m.jsx(Ea,{children:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(SM,{}),m.jsx(Pn,{})]})})}),m.jsx(ft,{path:"/checkout",element:m.jsx(Ea,{children:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(IM,{}),m.jsx(Pn,{})]})})}),m.jsx(ft,{path:"/order-confirmation/:orderId",element:m.jsx(Ea,{children:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(CM,{}),m.jsx(Pn,{})]})})}),m.jsx(ft,{path:"/wishlist",element:m.jsx(Ea,{children:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(kM,{}),m.jsx(Pn,{})]})})}),m.jsx(ft,{path:"/dashboard",element:m.jsx(Ea,{children:m.jsxs(m.Fragment,{children:[m.jsx(Nn,{}),m.jsx(xM,{}),m.jsx(Pn,{})]})})}),m.jsxs(ft,{path:"/admin",element:m.jsx(Ea,{adminOnly:!0,children:m.jsx(AM,{})}),children:[m.jsx(ft,{index:!0,element:m.jsx(Uw,{})}),m.jsx(ft,{path:"dashboard",element:m.jsx(Uw,{})}),m.jsx(ft,{path:"users",element:m.jsx(kV,{})}),m.jsx(ft,{path:"products",element:m.jsx(AV,{})}),m.jsx(ft,{path:"orders",element:m.jsx(NV,{})}),m.jsx(ft,{path:"reviews",element:m.jsx(PV,{})}),m.jsx(ft,{path:"contacts",element:m.jsx(RV,{})})]}),m.jsx(ft,{path:"*",element:m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"404 - Page Not Found"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"The page you're looking for doesn't exist."}),m.jsx("a",{href:"/",className:"text-amber-500 hover:text-amber-600",children:"Go Home"})]})})})]})]})," "]})})})}iI.createRoot(document.getElementById("root")).render(m.jsx(JT.StrictMode,{children:m.jsx(BS,{children:m.jsxs(JS,{children:[" ",m.jsx(DV,{})]})})}));
